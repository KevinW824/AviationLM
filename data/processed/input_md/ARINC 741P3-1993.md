
        Copyright0 
                    
                   1994 
                         
                        by 
  AERONAUTICAL, RADIO, INC. 
          2551 Riva Road 
Annapolis,  Maryland  21401-7465 USA 

## Arinc Characteristic 741 Aviation Satelljte Communications System Part 3 Circujt Mode Voice And Data  Services

Published: January 15, 1994 
Prepared  by the Airlines Electronic Engineering Committee 

Characteristic 741 
                     Adopted 
                               
                             by the Airlines Electronic Engineering Committee: October 19, 1993 

Characteristic 741 
                     Adopted 
                              
                             by the Industry: December 15, 
                                                               
                                                              1993 

## Foreword

# Activities Of Aeronautical Radio, Inc. (Arinc)

## And The Purpose Of Arinc Characteristics

Aeronautical  Radio,  Inc.  is a corporation 
 
in 
 
which 
 
the 
 
United 
 
States 
 
scheduled 
 
airlines are 
 
the 
 
principal 
 
stockholders. 

 
Other 
 
stockholders 
 
include a variety of other 
 
air 
 
transport companies,  aircraft  manufacturers  and  non-U.S.  airlines. 

Activities 
 
of 
 
ARINC 
 
include 
 
the 
 
operation 
 
of an extensive 
 
system 
 
of 
 
domestic and overseas  aeronautical  land  radio  stations, the fulfillment  of  systems  requirements  to  accomplish ground  and  airborne  compatibility, the allocation and assignment  of  frequencies  to meet those needs, 
 
the 
 
coordination 
 
incident 
 
to 
 
standard 
 
airborne 
 
communications 
 
and 
 
electronics 
 
systems and  the exchange of technical  information.  ARINC  sponsors the Airlines  Electronic Engineering Committee  (AEEC),  composed of airline  technical  personnel. The AEEC  formulates  standards for 
 
electronic 
 
equipment and systems 
 
for the airlines. 

 
The 
 
establishment 
 
of 
 
Equipment Characteristics  is a principal  function of this  Committee. 

An ARINC Equipment Characteristic  is  finalized  after  investigation  and  coordination  with the airlines who have a requirement  or  anticipate a requirement,  with  other  aircraft  operators, with  the  Military  services having similar  requirements, and with  the  equipment  manufacturers. 

It  is  released as an ARINC Equipment  Characteristic  only  when  the  interested  airline  companies are 
 
in 
 
general 
 
agreement. 

 
Such a release 
 
does 
 
not 
 
commit any airline 
 
or 
 
ARINC 
 
to 
 
purchase equipment so described 
 
nor 
 
does 
 
it 
 
establish 
 
or 
 
indicate 
 
recognition 
 
of 
 
the 
 
existence 
 
of an operational 
 
requirement 
 
for such equipment, 
 
nor does it 
 
constitute 
 
endorsement 
 
of any manufacturer's  product  designed  or  built  to meet the Characteristic. An ARINC  Characteristic has a twofold  purpose,  which is: 

(1) 
To indicate 
 
to the prospective 
 
manufacturers 
 
of 
 
airline 
 
electronic 
 
equipment 
 
the 
considered **opinion** of the 
 
airline 
 
technical 
 
people, 
 
coordinated 
 
on 
an industry 
b
a
s
i
s
,
 
concerning requisites  of  new  equipment, and 
(2) 
T
o
 **channel** new equipment 
 
designs 
 
in 
a direction 
 
which 
can result 
 
in 
 
the 
maximum possible  standardization  of  those  physical 
and electrical  characteristics 
which 
 
influence 
 
interchangeability 
 
of 
 
equipment 
 
without 
 
seriously 
 
hampering 
engineering 
 
initiative. 

## Table Of Contents

ITEM 
SUBJECT 
VOICE 
 
ENCODER 
 
STANDARDS 
Introductipn General  Introduction  to  Multipulse-Excited  LPC 
LPC  Synthesis Multipulse-Excited  LPC 
Multipulse-Excited  LPC  Encoder Multipulse-Excited  LPC  Decoder 
Introduction 
Multipulse-Excited  LPC  Encoding 
5.0 5.1 
5.2 
5.2.1 5.2.2 5.2.3 5.2.4 5.3 5.3.1 
5.3.1.1 5.3.1.2 5.3.1.3 
5.3.1.4 
5.3.1.4.1 
5.3.1.4.2 5.3.2 
5.3.3 5.3.3.1 
5.3.3.2 
5.3.3.3 5.3.3.4 
5.3.3.5 
5.3.4 
5.3.4.1 
5.3.4.2 
5.3.4.3 
5.3.4.4 
Encoder **Framing** Structure 
High-Level  Language  Conventions Requirements  for  Numeric  Calculations Audio  Input  Characteristics 
Audio Input  Spectral  Characteristics 
Sampling,  Quantization,  and  Scaling 
The  Encoding  Process 
LPC  Analysis 
Segmentation  and  Windowing Autocorrelation 
Durbin's Recursion 
Quantization of the  Partial  Correlation 
Coefficients 
step up Procedure 
Long  Term  Correlation  Analysis 
Iuverse  Filtering 
Long  Term  Correlation  Process 
Quantization  of  Long  Term  Correlation 
Gain 
Line **Codes** Allocated  to  the  Long  Term 
Correlation  Delay  Parameter 
The Local Decoder 
The 
Excitation  Generator 
The 
Long Term  Predictor 
The 
Short Term  Predictor 
Excitation Analysis 
Derivation of t
h
e
 
Error  Signal 
Impulse  Response  Calculations Cross-Correlation  Calculation 
Pulse Selection Procedure 
Pulse Amplitude  Quantization 
Pulse Amplitude  Normalization 
Pulse Position  Encoding 
5.3.5 
5.3.5.1 
5.3.5.2 
5.3.5.3 5.3.6 5.3.6.1 5.3.6.2 
5.3.6.3 5.3.6.4 
5.3.6.5 5.3.6.6 5.3.6.7 
5.4 5.4.1 5.4.2 5.4.2.1 
5.4.2.2 
5.4.3 
5.5 
5.5.1 5.5.2 
5.5.3 5.5.4 5.5.4.1 5.5.4.2 5.5.5 5.5.5.1 
5.5.5.2 
Parametet  Transmission 
Introduction 
Error Protection 
Single Bit  Error  Conection  and  Double 
Error  Detection 
Burst **Error** Detection 
Transmission Frame Structure 
T
h
e
-
 
. 
Introduction 
Decoding of  the  Partial  Correlation 
Coefficients 
Long Term  Predicator  Parameter Decoding 
Excitation  Parameter  Decoding 
Pulse Positions 
Pulse  Amplitudes 
Operation  of 
the Decoder 
The  Muting procesS 
Speech Output  Transcoding 
PAGE 
2 
2 
4 
4 
5 5 
5 
5 
5 
6 6 
7 
7 
14 
14 
15 
15 
15 16 
16 16 17 17 
17 
17 
18 
18 18 
19 
20 24 
24 24 
25 
25 28 28 28 28 
28 
20 
30 
30 
30 31 
31 
31 

## Table Of Contents

| ITEM                                                     |                                    | SUBJECT    |
|----------------------------------------------------------|------------------------------------|------------|
| PAGE                                                     |                                    |            |
| 6.0                                                      |                                    |            |
| 6.1                                                      |                                    |            |
| 6.2                                                      |                                    |            |
| 6.3                                                      |                                    |            |
| DATA  INTERFACE  UNIT  FUNCTIONAL  REOUIREMENTS          |                                    |            |
| General                                                  |                                    |            |
| -                                                        |                                    |            |
| Plesiochronous  Interconnection  Requirements            |                                    |            |
| Rate  Adaption  Scheme                                   |                                    |            |
| 33                                                       |                                    |            |
| 33                                                       |                                    |            |
| 33                                                       |                                    |            |
| 33                                                       |                                    |            |
| 7.0                                                      | TERMINAL                           |            |
| 37                                                       |                                    |            |
| I                                                        |                                    |            |
| ATTACHMENT                                               |                                    | 3X         |
| 38                                                       |                                    |            |
| 39                                                       |                                    |            |
| 41                                                       |                                    |            |
| 53                                                       |                                    |            |
| 61                                                       |                                    |            |
| 6                                                        |                                    |            |
| 7                                                        |                                    |            |
| 8                                                        |                                    |            |
| 9                                                        |                                    |            |
| 10                                                       |                                    |            |
| 11                                                       |                                    |            |
| 12                                                       |                                    |            |
| The  Terminal  Interface  Function  (TIF)                |                                    |            |
| TIF  Functional  Requirements                            |                                    |            |
| TIF  Operation                                           |                                    |            |
| TIF  Interface  Requirements                             |                                    |            |
| Power  Control  for  Higher-Quality  Channels            |                                    |            |
| Summary  of  Voice                                       |                                    |            |
| and                                                      |                                    |            |
| TIF  Encoder/Decoder                                     |                                    |            |
| Transmission  Delays                                     |                                    |            |
| and                                                      |                                    |            |
| Timings                                                  |                                    |            |
| Applicable  Documents                                    |                                    |            |
| Glossary                                                 |                                    |            |
| 62                                                       |                                    |            |
| 63                                                       |                                    |            |
| 64                                                       |                                    |            |
| ATTACHMENT  3X  TABLES                                   |                                    |            |
| 12                                                       |                                    |            |
| 38                                                       |                                    |            |
| 56                                                       |                                    |            |
| 56                                                       |                                    |            |
| 56                                                       |                                    |            |
| 57                                                       |                                    |            |
| 56                                                       |                                    |            |
| 57                                                       |                                    |            |
| 58                                                       |                                    |            |
| 58                                                       |                                    |            |
| 59                                                       |                                    |            |
| 59                                                       |                                    |            |
| 60                                                       |                                    |            |
| 13                                                       |                                    |            |
| 14                                                       |                                    |            |
| 15                                                       |                                    |            |
| 16                                                       |                                    |            |
| 17                                                       |                                    |            |
| 18                                                       |                                    |            |
| 19                                                       |                                    |            |
| 20                                                       |                                    |            |
| 21                                                       |                                    |            |
| 22                                                       |                                    |            |
| 23                                                       |                                    |            |
| 24                                                       |                                    |            |
| 69                                                       |                                    |            |
| 25                                                       |                                    |            |
| 70                                                       |                                    |            |
| 26                                                       |                                    |            |
| 71                                                       |                                    |            |
| 27                                                       |                                    |            |
| 72                                                       |                                    |            |
| 28                                                       |                                    |            |
| 73                                                       |                                    |            |
| 29                                                       |                                    |            |
| 14                                                       |                                    |            |
| 30                                                       |                                    |            |
| 75                                                       |                                    |            |
| 31                                                       |                                    |            |
| 76                                                       |                                    |            |
| 32                                                       |                                    |            |
| Performance  of  the  TIF Error Protection/Correction    |                                    |            |
| Schemes  for  User  Data                                 |                                    |            |
| Rate  Adaption  Summary                                  |                                    |            |
| 300 bitls User  Data  Rate  (V.21)                       |                                    |            |
| 600 bit/s User  Data  Rate  (V.22)                       |                                    |            |
| 1.2 kbit/s User  Data  Rate  (V.22/V.22,.J               |                                    |            |
| 2.4 kbit/s User  Data  Rate  (V.22,/V.27,J               |                                    |            |
| 4.8 kbit/s User                                          |                                    | Data       |
| 7.2 kbit/s User  Data  Rate  (V.29)                      |                                    |            |
| 9.6k bit/s User  Data  Rate  (V.29)                      |                                    |            |
| 31 bit  Signalling  Control  Codes                       |                                    |            |
| Plesiochronous  Buffer                                   |                                    |            |
| Codes                                                    |                                    |            |
| BursT  Error  Detection  Bits                            |                                    |            |
| TIF  Transmission  Frame  Structure                      |                                    |            |
| 300 bitls User  Data-Rate                                |                                    |            |
| TIF  Transmission  Frame  Structure                      |                                    |            |
| 600                                                      |                                    |            |
| bit/s  User  Data-Rate                                   |                                    |            |
| TIF  Transmission  Frame  Structure                      |                                    |            |
| 1.2kbit/s  User  Data-Rate                               |                                    |            |
| TIF Transmission  Frame  Structure                       |                                    |            |
| 2.4kbitIs  User  Data-Rate                               |                                    |            |
| TIF  Transmission  Frame  Structure                      |                                    |            |
| 4.8kbith User  Data-Rate                                 |                                    |            |
| TIF                                                      |                                    |            |
| Transmission  Frame  Structure                           |                                    |            |
| 7.2kbitIs  User  Data-Rate                               |                                    |            |
| TIF                                                      |                                    |            |
| Transmission  Frame  Structure                           |                                    |            |
| 9.6kbitIs  User  Data-Rate  (preamble  frame)            |                                    |            |
| TIF                                                      |                                    |            |
| Transmission  Frame  Structure                           |                                    |            |
| 9.6kbit.I~                                               |                                    |            |
| User                                                     |                                    |            |
| Data-Rate  (data                                         |                                    |            |
| frame)                                                   |                                    |            |
| T                                                        | I                                  | F          |
| Transmission  Frame  Structure                           |                                    |            |
| 9.6kbitIs  User  Data-Rate  (postamble  frame)           |                                    |            |
| 77                                                       |                                    |            |
| ATTACHMENT  3X  FIGURES                                  |                                    |            |
| 65                                                       |                                    |            |
| 66                                                       |                                    |            |
| 67                                                       |                                    |            |
| 11                                                       |                                    |            |
| 12                                                       |                                    |            |
| 13                                                       |                                    |            |
| 14                                                       |                                    |            |
| 68                                                       |                                    |            |
| Simplified  Functional  Block  Diagram  of  TIF  Encoder |                                    |            |
| Simplified  Functional  Block  Diagram  of  TIF  Decoder |                                    |            |
| simplified                                               | TIF  Encoder  Operation  Flowchart |            |
| Simplified  TIF  Decoder  Decision  Logic                |                                    |            |
| (Error Burst DetectiodCodec  Muting  Strategy)           |                                    |            |

# Aviation Satellite Communication System Part 3 Circuit  Mode  Voice And  Data  Services Arinc  Characteristic 741 Published: January 15,1994

DOCUMENT 

I 
1 
This **document** is b
a
s
e
d
 on material submitted 
 
by 
various 
participants 
 
during 
the drafting process. 
 
Neither 
AEEC nor 
ARINC has 
made any determination  whether these materials could 
be subject t
o
 claims of patent  or other proprietary rights by  third 
parties, and 
no 
r
e
p
r
e
s
e
n
t
a
t
i
o
n
 
or warranty,  express  or  implied, is 
made i
n
 
this regard. **Any** use of or reliance on this document shall 
constitute m acceptance 
 
hereof 
"as is" and be subject to this 
disclaimer. 

## $.O Voice Encoder =Andards 5.1 Introduction

This section 
 
describes, in a high-level 
 
language, 
 
the 
9.6 kbit's 
 
multipulse-excited 
 
LPC 
 
voice 
 
coding 
 
algorithm recommended  by t h e
 
AEEC's satellite s u b m m i t t e e for  aeronautical  mobile  satellite  communications.  The  voice  coding algorithm  is  described in sufficient detail in this document, so that  those  skilled  in the art can implement  the  algorithm precisely, in accordane with the standard. 

The WE DSP32 **(or** the WE DSP32C) 32 bit  floating  point  digital  signal  processor  (DSP)  is  the  preferred  digital  signal processing 
 
device 
 
for 
 
the 
 
implementation 
 
of 
 
the 
 
algorithm. 

 
DSP32 
 
source 
 
code, 
 
corresponding to the 
 
algorithm description 
 
of **this** document, will be provided, 
 
royalty free, for 
 
aeronautical 
 
mobile 
 
satellite 
 
applications 
 
only, 
 
in accordance  with  the  license  statement  submitted by  British  Telecom. 

Richard  Polom MLB3 
1 
b British  Telecom  Research  Laboratories Martlesham Heath Ipswich lP5 7RE 
ENGLAND 
- 
Note: This voice  encoding  algorithm  is  subject to BT  patent  rights  and  copyrights.  BT 
has agreed  to  grant  royalty-free nonexclusive licenses  under  such  patent  rights and copyrights  to  all  manufacturers  of AES and  GES  equipment  operating in the *A M S S*  service. These manufacturers 
 
should 
 
enter 
 
into a royalty-free 
 
license 
 
agreement 
 
with BT Laboratories prior  to  incorporating  the  algorithm  in  equipments  operating  in  the A M S S  service. 

## 5.2 General  Introduction To Multiduke-Excited Lpc

This section,  starting from conventional  LPC  synthesis,  provides a short  introduction  to  multipulse-excited  LPC  speech coding. 

## 5.2.1 Lpc Swthesis

A simplified  speech  production  model  is  presented in Figure 5-1. In **this** speech  production  model,  the  vocal-tract  filter models the **response** of the  vocal-tract,  and the remaining  elements  model  the  excitation.  The  excitation  model  requires a decision as to  whether  the  speech  to be **synthesized** is voiced or unvoiced.  If  the speech is  voiced,  the voiced/unvoid switch  selects the upper  excitation  model,  and unipolar, unity amplitude  pitch  pulses  excite  the  vocal-tract  filter.  The pitch  period  of  the  voiced  speech is controlled by the pitch  period  input to the  pulse  generator.  For  unvoiced speech, the  voiced/unvoiced  switch  selects t h e lower  excitation  model,  and t h e
 
random  noise  generator  excites  the  vocal-tract filter. For both 
 
voiced 
 
and 
 
unvoiced **speech,** the 
 
gain 
 
value is periodically 
 
updated 
 
to 
 
control 
 
the 
 
amplitude 
 
of 
 
the synthesized  speech.  For a LPC  synthesizm, the vocal-tract f i l t e r
 **model** is  an  all-pole,  time-varying  digital  filter.  The filter  coefficients *are* updated  typically  every 
10-2Oms; this is  sufficient to model  the  slowly  varying  characteristics  of the  vocal-tract. 

## 5.0 Voice Encoder Standards Kont'D) 5.2.2 Multipulse-Excited Lpc

A multipulse-excited LPC 
synthesizer  is  illustrated  in  Figure 
5-2. The  vocal-tract  response  is  modelled  by  the  same  allpole,  time-varying digital filter as u s e d
 
ü~ 
conventional LPC 
synthesis.  The  multipulse  excitation  model,  however,  does not  distinguish  between  voiced  and  unvoiced  speech;  the  excitation  in  both cases consists  of  a series of  non-uniformly spaced pulses, 
 
having 
 
differing 
 
amplitudes. 

 
Multipulse-excited LPC 
thus 
 
avoids the **need** to 
 
make 
 
voicedlunvoiced decisions 
 
and 
 
pitch 
 
period 
 
estimations 
 
and 
 
replaces 
 
these by the 
 
determination 
 
of 
 
appropriate 
 
pulse 
 
positions 
 
and amplitudes. The pulse  positions  and  amplitudes  are  determined  for  excitation frame durations of typically  between 4 
and 20 m. The  quality  of  the  synthesized  speech from a multipulse  coder  is  determined  by,  among  other  things,  the number  of  pulses  per  excitation **frame** - the  more  pulses  per h m e
, the  better  the **speech** quality.  All  pulse  positions and  amplitudes,  however,  must  be  quantized  and  transmitted;  therefore,  the  maximum  number  of  pulses  per  frame  is limited by the  desired  transmission  bit-rate. A multipulse-excited LPC 
encoder  is  presented  in  the  next  section. 

## F I G U R E 5-2 Multipulse-Excited Lpc Synthesizer 5.2.3 Multidulse-Excited Lpc Encoder

A multipulse-excited LPC 
encoder is illustrated  in  Figure **5-3.** The ending process involved  splitting  the  incoming speech  into frames of 10-20 ms duration to derive  the LPC 
coefficients,  followed  by  an  analysis-by-synthesis  process to obtain the **pulse** positions  and  amplitudes.  The  excitation  analysis-by-synthesis  procedure  involves  a  search  for  the pulse **positions** and  amplitudes  which minimize the **squared** error between a block  of  the  input  and  synthesized  speech signals. The derivation of the excitation may be carried out  for  the  entire LPC 
block  length or the LPC 
frame may  be split  into  several  excitation Erames and  the  excitation  derived  for euch excitation f r a m e
 
separately. To find  all  the  pulse positions  and *amplitudes* simultaneously  for a frame, requires **the** solution  of non-linw equations  and  is  thus  very complex.  Sub-optimal methods have  therefore been developed, to derive  the  pulse  positions  and  amplitudes  sequentially. 

The long-term  predictions  included in t h e
 **encoding** process takes advantage  of  the  long-term  correlations  in speech, primarily as a  result  of pitch related c o r r e l a t i m in voiced  speech.  With  the  inclusion  of  long-term  prediction  less  pulses arereqwedperpitchperiodtoobtainthesamespeechquality. 

## 5.2.4 Multidulg&&Ed L P C Decoder

The multipulse-exchi LPC 
decoder **corresponding** to 
 
the 
 
encoder 
 
of 
 
Figure 
5-3 is 
 
presented in Figure *5-4.* The decoding  process is very straightforward **requiring** the  formation  of  the  excitation  signal  and  the  application of this excitation to t h e
 
long-term a n d short-term predictors to synthesis  the  output signal. 

## 5.3 Multiduke-Excited Lpc Encoding

Extensive use of flow 
 
charts 
 
and a high-level 
 
language 
 
description 
 
are used in **this** section 
 
to 
 
define 
 
the 
 
encoding operations. A schematic 
 
representation 
 
of 
 
the 
 
overall 
 
processing 
 
algorithm 
 
is 
 
presented 
 
in 
 
Figure 
5-1 
l. However, before  commencing  the  detailed  description  of t h e encoder,  it  is  important  to  examine  the **framing** structure which is employed  by  the  encoder  and  outline the conventions used in  the  high-level  language  description  which  follows. 

## 5.3.1 Introduction

The  incoming **speech** signal, sampled  at 8 kHz, is subject  to  the **framing** structure  outlined  below. 

## 5.0 Voice Encoder Standards (Cont'D) 5.3.1.1 Encoder Framian Structure

The  encoder **uses** three frame sizes, namely: 

1. A 32 
ms (
2
5
6
 
sample) 
 
"window f
r
a
m
e
.
 
" 
2
.
 A 20 ms **(160** sample) **"speech** f
r
a
m
e
.
 " 
3. A 
4 
ms (32 
sample) "excitation f
r
a
m
e
.
"
 
The relationship of these three **frames** to one  another  is  illustrated  in  Figure 
5-5. A
s
 **this** figure  illustrates  the  window frames **are** arranged  such  that  the first **and** last  12 ms of each frame is  overlapped  with  the  previous  and sub window f r a m e s
.

 **Each** overla **ped** window frame is used in the  calculation of the LPC coefficients.  However, coefficients  calculated from J e  
window frame are only  considered  valid  over  the  corresponding speech **frame,** i.e., the central 20 
ms **(160** samples) of the  window frame. 

## F I G ~ R E 5-5 Relatioll~Hip Behveen The Various Frame

The **speech** Frame as well as being  the frame size used in  the  updating  of  the  LPC  coefficients  is  also  the frame size used in  the  updating  of  the  long-term  correlation  parameters. 

The excitation parameters, i.e., the  pulse  amplitudes  and positions, are updated  every  excitation frame. The  excitation calculation  loop  is  thus  executed 
5 rimes for **each** execution  of  the  LPC  and  long-term  correlation  calculation  loops. 

## 5.3.1.2 Hiph-Level Lanpuane Conventions

The  following  conventions  have been adopted  for  the  high-level  language  algorithm  descriptions of this and  subsequent sections. 

The high-level  code demiption  is besed on the high-level  language  Pascal. 

AU 
high-level  code is printed in *itdics* and **all** high-level  variable names are also  printed in *italics* in the  associated text,  e.g., t h e
 
scalar variable, 'scalar', would be printed  in  the  text a s
,
 
scalar. 

Vectors or two dimensional arrays are distinguished from s c a l a r
 
variables  in  the  text by appending 'o' to  the  variable name; 
e.g. the vector  variable,  'vector',  would be printed  in  the  text a s
, vecror[J. 

AU variables shordd be amsidered t o
 
be 32  bit  floating  point  values unless otherwise  stated. The exception  to this rule is loop v u h b b  
rmd indices which **are** always  16  bit  variables. 

## 5.3.1.3 Re-Uuhmmts For Numeric Calculations

Except where explicitly noted, and except  for  obvious  integer  variables  such as vector  indices  and  loop  counters, all variables shall be **maintained** as floating-point  values  with  a minimum mantissa  precision of 24 bits inclusive of a sign bit. **The** range of the associated  exponent  shall be such t h a t the  magnitude  of a  positive or negative  non-zero  variable can vary over a **minimum** range  of 5.87747*1OS to 3.40282*10".. 

Note: Compliance 
 
with this miuimum numeric 
 
range is essential 
 
if 
 
interoperability between different 
 
vocoder implementations  is to be e n s u r e d
.

 

## $.O Voice Encoder Standards (Cont'Dl 5.3.1.4 Audio B U T Characteristics 5.3.1.4.1 Audio B U T Swtral Characteristics

Prior  to  sampling  and  quantization, 
&h audio  which is  presented  to  the  encoding  algorithm  shall  exhibit  the  following minimum  spectral  characteristics. These characteristics may be met  by  any  combination of specific  anti-aliasing  filters and/or the ~ t u r a l  
spectral  roll-off  characteristics of  transducers  and  audio  channels: 
Note: 
 
All 
 
specifications 
 
are 
 
referenced to 1020 H
z
.

 

a)  Over  a  passband  of 300 to 3400 H
z
,
 
a **gain** variation of no more than +2 dB; 
b)  Over  a  transition  band  of 4OOO H
z
 
to 4600 H
z
,
 
a gain of **-45** or lower;  and 
c) At 4600 H
z
 
and  above,  a  gain  of **-75** dB or lower. 
Note 1: I
n addition 
 
to 
 
the 
 
listed spectral characteristics, 
 
additional 
 
filtering 
 
appropriate 
 
to 
 
the 
 
particular 
 
equipment installation  should be provided in t h e
 
low  end *response* characteristics of the  vocoder so  as to  mitigate  the  effects  of power  supply  noise  pickup.  (e.g., 4
0
0
 
H
z
 
for AES 
installations.) 
Note 2: The  input  to the encoding  algorithm  is dehed in  Section 
5.3.1.4.2 to be quantized  audio  samples  with  at  least 
12 bits  of  resolution.  Consequently,  all  required  spectral  characteristics  at  the  point  of  sampling  are  defined  with  this in mind. The use of u-law or A-law  companded  audio in conjunction with both  reduced  resolution  (e.g., 8 bits)  and appropriately  relaxed  transition-band  and stopband **gain** characteristics  is  permitted  provided  that  the  quantized  samples are decompanded  (linearized)  prior  to  their  presentation  to  the  algorithm. 

## 5.3.1.4.2 Samdlinn. Ouantization. And Scaling

Audio  which  exhibits  the  spectral  characteristics  defined  in Section 5.3.1.4.1 shall be sampled  at  a  continuous 8 kHz r a t e
, and the resultant *series* of s a m p l e s  **shall** be quantized to an  equivalent  time-ordered series of  linear  (i.e., nonc o m p a n d e d
)
 binary  values. **Each** quantivltion  operation  shall be performed  with  a  precision  of  at  least 12 bits  and  a linearity of a t least 10 bits.  The  maximum  dynamic  range  of this series **shall** be scaled  up or down in magnitude a s
 
appropriate s o t h a t it is tightly  bounded  by  the  floating-point  range  of 4095.0 to -
4
0
9
6
.

0
 
without  exceeding it. The resultant  time-ordered series of  scaled  values  shall be presented  to  the  segmentation  and  windowing  logic  defined  in Section 5.3.3.1. 

- 
Note: The above  bounding  range  of  scaled  values  is  indicative of a  fixed-point  signed  value  of 
13 bits  in  length.  Scaling of 
 
the 
 
time-ordered 
 
series of binary 
 
values 
 
to 
 
the 
 
indicated 
 
numeric 
 
range 
 
is 
 
required 
 
in 
 
order 
 
to 
 
take 
 
maximum advantage  of the internal  numeric  range  of  the  algorithm. 

## 5.3.2 The **Encodhi** Process

The  encoder  of  Figure 
5-3 is reproduced as Figure *5-6:* t h e
 
high-level  variable names of  key  encoder  parameters  have been added to  Figure 5-6 so that the reader may use this figure as a reference,  while  studying the detailed  high-level description to follow.  Figure **5-6** illustrates the **main** processes  executed  by  the  encoder,  namely: 

1. LPC analysis 
2. **Long** term correlation analysis 
3. Formation o
f
 bcrl 
decoder 
consisting  of  a **short** term  and  long  term  predictor 
4. A  closed 1
-
 
error **mhimhtion** process  to  calculate the excitation  pulse  positions  and  amplitudes. 
These  processes **ale** described-in detail in the following sub-sections. 

## 5.3.3 Lpc Analysis

The  LPC  analysis  process *can* be broken  into  the  following  steps: 
- Segmentation 
 
and 
 
windowing 
- Autocorrelation - **Durbin's** recursion 
- Quantization  of  the  partial  correlation  values 

## $.O Voice Encoder Standards (Cont'Dl 5 . 3 . 3 Lpc Analvsis (Cont'D)

- Step-up 
 
procedure These steps are detailed below. 

## 5.3.3.1 **Senmentation** And Windowing

The  speech  signal is' 
first divided  into 32 
ms (
2
5
6
 
samples)  overlapping segments segspch 1
.

 
The first and  last 1
2
 
ms 
(% **samples)** of each  segment is overlapped with the previous  and  subsequent 
32 
ms segments  (Figure 
5-5). Windowing is  performed on each 32 
ms segment **using** a Hamming  window: the Hamming  window  vector, hamwindow[], is defined a s
:
 

FOR 
   n: =O TO 
         255 DO 
              hamwindow[n]: =O.W..46*COS((2*3.1415927*n/255); 

and the 
       windowing  operation i
                             s
                              defined a
                                       s
                                       :
                                         

FOR 
   n: = 
     O TO 
         255 Do 
              windrpch[n]: =segpch[n]*hamwin&w[n]; 

It  is 
      the 256 elemeat 
                                           , 
                                             vector  which 
                                                               is used 
                                                                         in the 
                                                                                 calculation of the LPC  filter  coefficients,  however, 
                                                                                                                                                       the LPC 
coefficients 
                thus 
                                      are 
                                            d y  
                                                  d & d  
                                                                  valid 
                                                                         
                                                                        over the ce~tral20 
                                                                                                    ms (160 
                                                                                                                samples) of each 
                                                                                                                                       
                                                                                                                                      window frame (
                                                                                                                                                              s
                                                                                                                                                               e
                                                                                                                                                                e
                                                                                                                                                                  
Figure 5-5); i.e., (
                          I
                          I
                           P
                              I
                                t
                                 b
                                    
                                     corresponding speech frame. 
                       cdtz2?@ 

An 
  additional  time-ordered vitor s
                        p
                         c
                          h
                          u
                            corresponding to the 
                                           c
                                           e
                                            n
                                             t
                                             r
                                              a
                                               l
                                                160 s a m p l e s  of each segspchfl vector shall be 
generated by 
         the 
           operation defined by: 

FOR 
   n:=O TO 
         159 DO 
              spch[]:=segpch[n +M];. 

## 533.2 Autocorrelation

A loth order LPC 
analysis requires **the** calculation of the 11 
element autocorrelation vector, *cm[],* as fo~ows: 

FOR i:=O TO 
            10 DO 
BEGIN 
dot: =& 
    FÖR n: =O TO 
                25.5-i DO dot: 
                            =.dor + 
                                 windspch[n]"windspch[n 
                                                      +i]; 
cmri 
    I: =dot 
END,: 
       .
       .
         
        - . 

## 5.3.3.3 Durbin'S Recursion

IF con[O] 
          = 
            O THEN FOR i: = 
                               1 TO 
                                     10 DO parcor[i]: =O; 
ELSE 
     BEGIN 
    parcor[l]:  =cm[l]/cotr[O]; 
     taps[l]:  =parcor[l]; 
     e
        m
              
           = 
            (l-sqr(parcor[l])) 
                               *co~[O]; 
     FOR i:=2 TO 
                    10 DO 
          BEGIN 
          FOR j: = 
                   1 TO 
                         pred(i) DO alphafi]: =tapso]; 
         parcorli/: = 
                      confi]; 
          FOR j: = 
                   1 TO 
                         pred(i) DO parco$]: =parcor[i]~phafi]*co~[i-j]; 
         paxor[i]: 
                    =parcor[i]/eerrot; 
          taps[i]: =parcor[i]; 
          FOR j: = 
                   1 TO 
                         pred(i) DO tapsfi]: =alpha~]-parcor[i]*~p~[i-j]; 
          error: 
                = 
                 (1-sqr(parcor[i])) 
                                   * e m  
          END 
     END; 

## 5.3.3.4 Quantization Of The  Partial  Correlation  Coefficients

The quantization  of  the  partial  correlation  coefficients is achieved using a set of non-uniform  quantizers.  The  decision levels for **the** partial 
 
correlation 
 
quantizers is represented in Table **5-1.** The decision 
 
levels are **stored** in the two dimensional array pardlfl, where  the first dimension  of  the array refers to the  partial  correlation  coefficient  number  and the second  dimension is t h e
 
decision  level index. 

The quantization  levels **corresponding** to the  decision  levels  of  Table 5-1 **are** derived as **illustrated** below. The two dimensional array, *parql[J,* contains 10 *sets* of quantization 
 
values corresponding to the 10 partial 
 
correlation coefficients. The appropriate  value  for each coefficient is selected  and inserted in qparcorfl. 

{Quantizer initialimion procedure) 

{No. of quantizer 
h
  l
  s
    f
      o
       r
         each 
m$ìcietu) 

p h l ( 1  
         J: = 
              64; 
p h 4 2 ~  
            =a; 
pleveu3J: 
            =32; 
p h q 4 J :  
            =32; 
p h l [ 5 J :  
            = 
              16; 
pleVel[6]: = 
              16; 
p h u 7 J :  
            =8; 
p h l [ 8 J :  
            = 
              8; 
ph1[9]: 
            = 
              4; 
plew~1OJ: 
             =4; 

FOR i:=l TO 
           10 DO 
  FOR j:=O TO pred(phel[iJ) 
                         DO 
      parql[iJJ: 
              =pardl[i,pred~)J+pardl[ijJ/2; 

## 5.3.3.4 Ouantization Of The Partial  Correlation  Coefficients  (Cont'D)

-0.7512804, -0.6485097, 
-0.5322449, -0.4049051, 
-0.2691401, -0.1277748, 
0.0162492, 0.1599351, 0.300293 1, 
0.4344026, 0.5594731, 0.6729020, 0.7723293, 0.8556859, 0.9212375, 0.%76200, 
0.9938684, 
-0.9394747, -0.8862653, -0.8176653, 
-0.7348658, -0.6393048, -0.5326418, -0.4167289, -0.2935792, -0.1653312, -0.0342122, 
0.0975010, 0.2275210, 0.3535898, 
0.4735184, 0.5852238, 0.6867664, 
-0.5412097, 
-0.3668540, -0.1784146, 
0.0168742, 0.2115152, 0.3980361, 0.5692760, 0.7186612, 
-0.8576206, -0.7400368, -0.5936806, -0.4242423, 
-0.2383097, -0.043 
11 
16, 
O. 1537625, 
0.3446585, 
-0.5728675, -0.281  1575, 
0.0399893, 
0.3569492, 
0.6365371, 
-0.5364712, -0.2775567, 
0.0037500, 0.2847542, 
-0.1913133, 
0.3732410, 
-0.509841  1, 
0.0449848, 
-0.4259395, 
0.7242872, 
O. 1986693, 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

-0.7017226, 
-0.5919189, 
-0.4697985 -0.3379026 
-0.1989756, 
-0.0559084, 
0.0883222, 0.2307150, 0.3683071. 0.4982354; 0.6177%5, 0.7245026, 0.8161331, 0.8907816. 0.9468949; 0.9833051, 
-0.9600082, -0.9148581, -0,8538207, -0.7779561, -0.6885817, -0.5872494, -0.4757191, -0.3559275, -0.2299549, -0.0999890, 
0.0317133, 
O. 1628649, 
0.2911882, 
0.4144548, 0,5305240, 0.6373802, 
-0.6209860, -0.4562265, 
-0.2739522, -0.081  1606, 
O. 1147467, 
0.3062488, 
0.4859939, 0.6470813, 0.7833269, 
-0.8027395, -0.6701235, 
-0.51  14532, 
-0.3328978, 
-0.1413995, 
0.0555%3, 0.2504306, 0.4355282, 
-0.4327131. -0.1221939; 
0.201  1188, 0.5033747, 
-0.6508853, -0.4111817, 
-0.1383052. 
O. 1457292; 
-0.4617792, 
0.0948572, 0.6209860, 
-0.2425563, 
O. 328769  1, 
O. 1839465, 
-0.2763557, 
-0.6755562 -0.5624482 
-0.4376369 -0.3037192 
-0.1634817 -0.0198425 
O. 12410% 
0.2656771 0.4016164 0.5291989 0.6457698 0.7489037 0.8364543 0.9o66001 0.9578813 0.98923  11 
-0.9502578 
-0.9010514 -0.8361974 
-0.7568223 -0.6643043 -0.5602500 
-0.4464666 
-0.3249299 
-0.1977505 -0.0671371 
0.0646423 
O. 1952991 
0.3225643 
. 
0.4442280 0.5581772 0.6624333 
-0.5817980 
-0.4120361 -0.2264559 -0.0321819 
O. 1633275 
o. 
3525667 
0.5282706 0.6836939 
-0.8819578 -0.7723294 -0.632673  1 -0.4684186 -0.2859522 
-0.0923682 
O. 1048072 
0.2979076 0.4794255 
-0.3581167 -0.0412383 
0.2799576 0.5718424 
-0.5951883 -0.3452452 -0.0674487 
0.2157892 
-0.3299494 
0.2364883 
-0.6287930 -0.0998334 
0.4617791 0.4772301 
-0.0399893 
-0.7269750, -0.6206185, 
-0.5013483, -0.3716459, 
-0.2342104, 
-0.0919014, 
0.0523198, 
O. 1954524, 
0.3345180, 
O. 4666229, 
0.5890184, 0.6991577, 0.7947488, 0.8738029, 0.9346749, 0.9760983, 
-0.%87151, -0.9276705, -0.8705161, -0.7982445, -0.7121107, -0.6136106, 
-0.5044546, -0.3865382, -0.2619094, -0.1327322, -0.0012501, 
O. 1302537, 0.2594956, 0.3842311, 0.5022941, 0.61  16344, 
0.7103531, 
-0.4993190, -0.3207891, -0.1299440, 
0.0658897, 0.2591939, 0.4425475, 
0.6089114, 
0.7518988, 
-0.83  1  1930, 
-0.7059404, -0.5532411, -0.3790320, 
-0.1900863, 
0.0062499, 0.2023432, 0.3905694, 
-0.5044545, -0.2023432, 
O. 120953  1, 
0.4315858, 
-0.7032794, 
-0.4750316, 
-0.2084599, 
0.0749297, 0.3522742, 
-0.0487307, 
0.5022942, 
-0.3801884, 
O. 1888589, 
-0.1271548, -0.4968801, 
0.4259395 

## 5.0 Voice Encoder Standards (Cont'D)

The partial o
           o
            r
             r
             e
              l
               a
                t
                i
                 m
                    coefficient quantizer i
                                      s
                                        defíned a
                                               s
                                                :
                                                  

FOR 
   ì:=I TO 
         10 Do 
  BEGIN 
  i
   :
    = 
    O; 

The 
   quantized 
           
          partial 
                
               correlation 
                         coefficients are stored in 
                                             
                                            vector qpurcor[J. A line cade corresponding to each 
quantized partial correlation coefficient contained 
                                    in qparcofl shall be generated  by the table  look-up  operation  defíned 
by: 

a) For *qpurcor[l]* use Table 5 - h ;  
b) 
 
For *qparcor[2]* use Table 
 
5-2b; 
c) For *qpmcor[3]* use Table 5 - 2 ;  
d) For qparCor[rf] use 
Table 5-2d; 
e) For *eparcor[5]* use Table S-%, 
f) For *qpurcor[6]* use Table 5-2f; 
g) For q
p
a
r
c
o
r
[
7
]
 use Table 5-2g; 
h) For *qpurcor[8]* use Table 5-2h; 
i) For qparcor[9] use 
Table 5-2i; and 
j) For *qparcor[lO]* use Table 5-2j. 

## 5.0 Voice Encoder Standards (Cont'D) 5 3 3 (Cont'D)

II 
QUANTIZER I LINE 
CODE 
i 
-0.7391278 
l~ -000000 
U 
I 
-
0
.
7
 
 
1
4
3
4
8
9
 
I 
OOOOO1 
I
I
 
I 
l 
-
0
.
6
8
8
6
3
9
5
 
I 
oooo 
1
0
 
II 
n 
-0.6620330 
I 
o o o o l l  
II 
i 
-0.6062688 
I 
o00101 
n 
0
.
5
4
4
3
3
6
0
 
 
1
0
0
1
 
11 
0.5742458 
 
101o00 
- 
0.6034074 
101001 
0.6317832 
101010 
I 
0.6593359 
1
0
1
0
1
 
1 
0.6860299 
1
0
1
 
 
1
0
0
 
t 
0.7118301 
101101 
0
.
7
3
6
7
0
3
 
1 
1
0
1
  1
1
0
 
0.7606165 
1
0
1
1
1
1
 
0.7835391 
1 
loo00 
I 
0.8054410 
1 
l
o
0
0
1
 
~ 
O
.
 
846070 
1 
1
1
0
0
1
 
1 
0.8647444 
 
110100 
0.8822923 
1
1
0
1
0
1
 
0.8986909 
1
1
0
1
 
 
1
0
 
I 
- 
0.9139188 
 
110111 
0.9279562 
 
111o00 
I 
0
.
9
4
0
7
8
4
9
 
11 
1
0
0
1
 
0.9523881 
 
111010 
I 
0
.
9
6
2
7
5
0
7
 
i 
111011 
H 
0
.
9
7
 
 
1
8
5
9
2
 
I 
111100 
II 
I 
0.9797017 
I 
111101 
II 
.
.
 
0.9862680 
 
111110 
0.9915497 
111111 
I 
-0.4537177 
I 
001010 
i 
-0.4212710 
I 
00101 
1 
I 
1 
-0.3882755 
I 
0
0
1
 
 
1
0
0
 
I 
-0.3547743 
I 
001101 
I 
I -0.3208109 
I 
0
0
1
 
 
1
1
0
 
I 
-
0
.
2
8
6
4
2
%
 
I 
001111 
I 
I 
-0.2516752 
I 
Oloooo 
-0.2165930 
 
01o001 
-0.1812287 
 
O10010 
-0.1456282 
 
o1001 
1 
-0.1098381 
 
O10100 
-
0
.
0
7
3
9
0
4
9
 
010101 
-0.0378754 
010110 
4 
I 
-0.0017966 
 
O101 
11 
0
.
0
3
4
2
8
4
5
 
o1 
lo00 
I 
0.0703210 
 
o11001 
O
.
 
1062659 
o1 
1
0
1
0
 
O
.
 
1420724 
o1 
1
0
1
 
1- 
O
.
 
1776938 
o1 
1
1
0
0
 
Il 
0.2130837 
I 
o1 
1
1
0
1
 
II 
x 
0.2481961 
011110 
0.=1 
o11111 
h 
QUANTIZER  LEVEL 
0.3174056 
1OOOOO 
t 
0.3514125 
loo001 
~ 
0
.
3
8
4
%
1
8
 
1o0010 
i 
O
.
 
8262937 
 
110010 
I 
LINE 
CODE 
-
0
.
9
6
4
3
6
1
7
 
I 
'
0
0
0
0
0
0
 
I 
-0.9551330 
I 
W o 0 0 1  
-0.9448663 
oooO10 
m 
-0.9335726 
I 
o o o o l l  
W 
-0.9212644 
I 
o00100 
-0.9079548 
o00101 I 
1 
-0.8936584 
I 
o
0
0
1
 
 
1
0
 
II 
I 
I 
-0.8783907 
I 
o00111 
I
I
 
1 
-0.8621684 
I 
001o00 
U 
I 
U 
-0.8450091 
I 
001001 
I 
-
0
.
8
2
6
9
3
 
 
1
4
 
 
0
0
1
0
1
0
 
-0.8079550 
 
00101 
1 
I 
-0.7881004 
001100 
-0.7673892 
001101 
I 
-
0
.
7
4
5
8
4
4
1
 
001110 
-0.7234883 
001111 
-0.7003462 
01oooO 
-0.6764430 
01ooo1 I 
-0.6518046 
010010 
-0.6264577 
o1001 
1 
-0.4315977 
o1 
1010 
i 
-0.4016336 
o1 
1
0
1
 
1 
I 
-0.3712329 
 
o11100 
-0.3404287 
o1 
1
1
0
1
 
~.3(w2546 
011110 
-0.2727443 
o11111 
A 
0.0810716 
I 
101010 
O
.
 
1138773 
I 
1
0
1
0
1
1
 
II 
0.3993429 
I 
110100 
n 
O
.
 
42934 
13 
I 
1
1
0
1
0
1
 
II 
I 
II 
0.4588732 
I 
1
1
0
1
 
 
1
0
 
II 
U 
0.4879062 
I 
1
1
0
1
 
11 
II 
0.6245073 
I 
111100 
U 
0.6499068 
I 
111101 
n 
I 
n 
0.6745999 
I 
111110 
n 
n 
0.6985598 
I 
111111 
I
I
 

## 5.0 Voice Encoder Standards Icont'D) 5.3.3.4 Quantization Of The Partial Correlation Coefficients (Cont'D) $.O Voice Encoder Standards (Cont'D)

5.3.3.4 puantization of the Partial 
 
Correlation 
 
Coefficients 
 
(cont'd) 
 
0.3305883 
0.0283959 

## 5.3.3.5 Steu Ud Procedure

qtaps:=paxo~ 
            {all 10 elements o
                        f
                          vector qtaps set equal to comspnding elements in qpmor} 
FOR i:=2 TO 
           1
           0
             
             DO 
BEGIN 
  FOR j:= 
        1 TO pred(i) DO alphab]:=qtaps[j]; 

END; 
     FOR i: 
          = 
            1 TO pred(i) DO qtapsb}: =alphali]-4taps[i]l+a[i~] 

## 5.3.4 **Long** Term Correlation Analysis

The  operations  involved  in  the long term correlation  analysis are summarized i n Figure **5-7.** All the  operations  involved in  the  LPC  analysis **block** to calculate  the  quantized  filter **tap** coefficients, *qtapsn,* have been described  above:  it  is these  quantized  filter  tap  values, *qapsn,* which are employed by the  inverse  LPC  filter  in the calculation of the  LPC 
residual signal. 

## 5.0 Voice Encoder Standards (Cont'D)

The  LPC  inverse filtering operation is *applied* to  each  speech frame , spch u, 
(corresponding  to  the  central 
160 samples of  the  current **window** frame). The  output **from** the  inverse  filter  is known as the  LPC  residual  signal:  the  operations involved 
 
in 
 
forming the residual, residueu, *are* defined as follows: 

FOR n: = 
      O TO 159 DO 
  BEGIN 
  sum: = 
      spch[n]; 
  FOR i: = 
        1 TO 10 DO sum: =sum-4taps[i]*spch[n-ì]; 
  resimte[n]: 
          =sum 
  END; 

Note:  The  values near 
                         the start of  each  speech  frame,  for  which  the  index of spch[] is less t
                                                                                                 h
                                                                                                  a
                                                                                                   n
                                                                                                     
                                                                                                     zero,  refers  to  speech 
samples 
         
         at 
            
           the 
               
               end of the 
                            
                           previous 
                                      
                                     speech frame. For 
                                                           
                                                          the 
                                                               
                                                              first frame processed 
                                                                                      
                                                                                      by 
                                                                                          
                                                                                         the 
                                                                                             
                                                                                             encoder, 
                                                                                                       
                                                                                                      these 
                                                                                                             
                                                                                                            values 
                                                                                                                    
                                                                                                                   are 
                                                                                                                        
                                                                                                                       all 
considered  to  be zero. 

## 5.3.4.2 **Long** Term Correlation Process

The final output **from** the 
 
long 
 
term 
 
correlation 
 
analysis 
 
is 
 
the 
 
gain 
(gain) and 
 
delay 
(delay) parameters: 
 
these parameters are updated  at  the same rate as the  LPC  coefficients,  i.e.,  every 20 ms (160 samples). 

The  calculation  of the 
 
delay 
 
and **gain** values **from** the 
 
residual 
 
signal is defined by 
 
the 
 
high-level 
 
code 
 
presented 
 
below. 

 
The 
 
range 
 
of values  chosen  for  the  delay  parameter is 32 t o
 
95 samples  (inclusive). **Note** that  the  parameter, delay, is a 16 bit  integer ValW. 

m m  
=O 
FOR *lag=33* TO 9
6
 
DO 
BEGIN 
sum: =O; 
FOR n: = 
O TO 159 DO sum:-sum +resimte[n]*resi~e[n-lag]; 
IF m 
>mat THEN 
BEGIN 
mm=sum; 
delay: =lag END 
END; 
sum: =O; 
FOR n: =O TO 159 DO s u m : = m  
+sqr(m~[n-deIay]); 
IF sum=O THENgain:=O  ELSE 
gulin:=mar/sum; 
- 
Note:  Negative  values  of  the  indices, n-hg, and n-&Zuy, point to LPC 
residual  values  calculated  in  the  previous  speech frame. 

 
For t h e
 
first frame the residual samples of the 
 
previous frame are considered 
 
to 
 
be 
 
zero. 

## 5.3.4.3 Quantization Of Long Term  Correlation  Gain

The  long  term  predictor *gain* value, *gain,* i s quantized with a 2 bit **non-uniform** quantizer as illustrated  below: 

IF gain > 
         O. 75 THEN 
                   A!Ñ- 
                           -0.9 ELSE 
     IF gain > 
              0.45 
                           &
                               :
                                 
                                 = 
                                   0.60 ELSE 
         IFgain>&2 l'ZEN qg&=0.325 
                                            ELSE qgain:=O.l 

The line  codes allocated to  the quantized  long  term  correlation 
                                                        gain parameter are presented in Table 5-3. 

| Long-term    |     | predictor    |
|--------------|-----|--------------|
| Line         |     |              |
| code         |     | Decoded      |
| gain         |     |              |
| gain         |     |              |
| parameter,   |     |              |
| gain         |     |              |
| parameter,   |     |              |
| qguin        |     |              |
| gain         |     |              |
| c            |     |              |
| =0.2         |     |              |
| 0            | 0   |              |
| 0.2          |     |              |
| <            |     |              |
| gain         |     |              |
| <            |     |              |
| =            |     |              |
| 0.45         |     |              |
| o1           |     |              |
| 0325         |     |              |
| 0.45         |     |              |
| c            |     |              |
| gain         |     |              |
| c            |     |              |
| =            |     |              |
| 0.75         |     |              |
| 1            | 0   |              |
| 0.600        |     |              |
| gain         |     |              |
| >            |     |              |
| 0            | .   | 7            |
| 11           |     |              |
| 0.900        |     |              |

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## 5.0 Voice Encoder **Sandards** Kont'D) 53.4.4 B E Codes Allocated To The *Long* Term Correlation Delav Parameter

As the delay 
 
value *can* only 
 
have 64 
distinct 
 
values **(32-99,** no quantization is required 
 
and the 6 
bit 
 
line 
 
code presented in Table 5
-
4
 
below is **allocated** directly to it. 

| Delay  value    | Line  code    |
|-----------------|---------------|
| 32              |               |
| 000000          |               |
| 33              |               |
| OOOOO1          |               |
| 34              |               |
| m 1 0           |               |
| 35              |               |
| oooo11          |               |
| 9               |               |
| I               |               |
| 9               |               |
| 63              |               |
| o11111          |               |
| 64              | 1OOOOO        |
| 65              | loo001        |
| 66              |               |
| 1ooo10          |               |
| Y               | Y             |
| 9               |               |
| Y               | Y             |
| 92              |               |
| 111100          |               |
93 
111101 
9
4
 
111110 
95 
111111 

## 5 3 5  The Local Decoder

The local decoder consists of the excitation generator, the long  term  predictor  and the s h o r t
 
term predictor. 

M: 
The local decoder **logic** is used to generate a locally-derived  version of the e n d e d  
speech for  feedback to the excitation anatyrir b@c defined i n Section 5
3
.

6
.

 The local  decoder  logic is a l s o
 
used in the definition of the decodiog  process m stdroa 
55. 

## 535.1 The Gene Ratox . .

The excitation generator for& the excitation **signal,** for  each  excitation  frame,  from the pulse **pition** and  amplitude information 
 
derived in the e n d e r  squared error **minimization** block. The excitation signal, S
I
(
]
, thus 
 
formed, consists of **pulses** located at the defined positions, *psns[],* and **having** the corresponding q u a n d  
amplitudes, qamp[], as dustrated below. 

FOR 
   n: = 
     b TO 
         b +31 DO 
               sl[n]: = 
                    9 
FOR 
   pulse: 
       = 
        1 TO 
           3 DO 
               sllpsns[pulse] 
                        + 
                         b]: 
                           = 
                            qamp[pulse]; 

where b is the sample  number  in 
                             the current S ech  frame  corresponding 
                                                                to the  start 
                                                                          of the current excitation frame 
and, posns[j, i
            s
              the vector of pulse positions Clanging to the current  excitation  frame. 

N
o
 t
 e
 :
   For the first, second, third, fourth  and fifth excitation frames of each  speech  frame, the value of b equals O, 
32,64, 
  %
   ,
    and 128 
       respectively. 

## 5.0 Voice Encoder Standards (Cont'D) 5352 The L O W - Term Predictor

The long term predidor is defined by the high-level  code  description  presented  below. The input to this recursive filter is the excitation **vector** correspanding to the current exatation frame, *sl[],* and the output, s2[], in turn becomes the input to  the short term predictor. 

FOR 
n: = 
b TO 
b + 
31 DO *s2[n]:* = 
egcrin 
+s2{[n&lay] +sl[n]; 
m: 
Values of the index, *n-&Zay,* are always  less  than b (the beginning of the current excitation  frame)  and the index  thus  points to values  in the long term predictor  filter  memory. **For** the first frame processed  these  values will be undefined  and  should be taken as zero. 

## 5353 The Short Term Predictor

The input to the short term predictor  recursive  fdter is the output from the long  term predidon  fiter, s
2
[
]
.

 
The operahons performed on the vector, s
2
[
]
,
 
to calculate the output of the short term predictor, *synrhspch[],* are defined below. 

FOR 
   n:=b TO b+3I DO 
BEGIN 
s
u
 m
  :
    
   =O: 
 FOR, 
     i: = 
       1 TO 10 DO s
               u
                m
                 :
                  =sum +qtaps[i]*ythspch[n-i]; 
 synthspch[n]: 
          =s2[n] +sum 
END; 
W: 
    The index, n-i, points to values 
                        
                       in the short  term  predictor  memory. 
                                               For the fnst speech frame processed, 
the contents of the short term  predictor  fdter  memory are set to zero. 

## 53.6 Excitation Analmis

As Figure *5-6* illustrates the determination of the excitation  involves a closed l m  error minimization  process. The error which is minimized is the square of the difference, on a sample-by-samp P 
e basis,  between the input speech vector, *spch[],* and the output from the local 
 
decoder, thspch I. The frame size over 
 
which **this** squared error minimization occurs is the excitation frame size of 4 ms 
 
sampfes): 
three pulses are derived per excitation  frame. 

W: The transmission frame that is generated by **this** encoding 
 
algorithm 
 
contains five excitation 
 
frames. 

 
Each grou of five  excitation frames is associated with the same  speech frame (spchu) from  which the partial correlation coe f! lcients of the current transmission frame were  calculated. 

## 5 3 . 6 . 1 Derivation Of  The  Error Simal

As the short term 
 
and 
 
long term predictors, 
 
defined 
 
above, are recursive, the effect of the excitation 
 
signal 
 
in previous  excitation frames must be accounted  for,  before the  error minimization  process  commences  for the current excitation  frame. The output of the local  decoder, due to  the excitation  signal  in  previous  frames, is calculated by taking the current excitation as zero, and  calculating the current  excitation as zero, and  calculating the output of the local 
 
decoder. (Note: It is t h e
 **quantized** fdter taps, *qtapsfl,* and long t e r m correlation parameters **for** the 
 
current speech frame which are used in h s  
dculation.) The **error** signal, *mora,* is then  formed a s the  difference between t h e
 **speech** *signal,* m
,
 
rad the output of the local decoder, *sytuhspchfl,* as illustrated  below. 

b c a l - q t u h s - = - ;  
                                          {cruate a h
                                                             l
                                                                   
                                                               copy of the shon mm 
                                                                                              predictorjìlter m
                                                                                                                       e
                                                                                                                        m
                                                                                                                           o
                                                                                                                             t
                                                                                                                             y
                                                                                                                               }
                                                                                                                                
local s2:=s2: (
                       c
                         r
                           a
                             ~
                               r
                                  
                               a M 
                                          copy of the long term predictor 
                                                                                      filter m
                                                                                                 r
                                                                                                  m
                                                                                                     o
                                                                                                       t
                                                                                                        y
                                                                                                         }
                                                                                                           
FORk-=b TO 
                     b+3t DO 
    BEGIN 
    sum: =o: 

~cal_synrhspch[n]: 
                 =qgain*Cocal s2[n-delayl+sum; 
mor[n]:  =sp~n]-bcal-~mhspc3[n] 
END; 

       FOR i: = 
              1 TO 10 DO sum: =sum 
                                +qtaps[~*rocal-sy#~pch[n-~; 
- 
Note:  Changes t
            o
              the 
                 short term aud long  term filter memories  values are 
                                                        kept  local to this 
                                                                     routine. 

The 
   aim of the 
          closed  loop  error  minimization  process 
                                       is t
                                         o
                                           
                                          select  the 
                                                 t
                                                  h
                                                   r
                                                   e
                                                    e
                                                      
                                                     pulses for this 
                                                                current  excitation 
                                                                             frame which 
m
    i
   n
     i
   *
    the 
          square 
               of the error over the period of t
                                       h
                                       e
                                         
                                         excitation frame. 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## 5.0 Voice Encoder Standards (Cont'D) 5.3.6.1 &Xivation Of The Error S I D (Cont'D)

. .  . 

The selection  of the three pulse positions and amplitudes to minimize  the squared error  is  performed  sequentially. 

Three indepeudent e m r  m 
'm are thty r e q u i r e d
, i.e., t h e
 
effect  of the first pulse  selected  is t a k m account off in t h e
 
searchforthe~pulse,mdthecombinedeffectofthefirstandsecondpulsesistakensccountofinthesearchfor the third pulse. It *can* be shown that t h i s
 
squared error  minimization  is  equivalent to maximizing the **normalized** c m -  
correlption function **defined** below. 

## 5.3.6.2 Lmrtulse **Remonse** Calculations

The first *step* in the 
 
error 
 
minimization 
 
process is the 
 
formation 
 
of 
 
the crosscorrelation between the 
 
error 
 
vector, morn, **and** the  impulse respoase of the short term and long t e r m predictor  combination,  for  all  possible 
(32) positions that a pulse **may** occupy 
 
within an excitation f r a m e
.

 As the 
 
excitation frame size is 32 samples 
 
long, 
 
the 
 
impulse response need **only** be  calculated  for 32 sample  values, and only **once** per  speech frame, as the short **and** long term predictor parameters do not  change  over t h a t period. The impulse r e s p o n s e
,
 *irespa,* is calculated as shown below. 

ircrp[OJ: 
         = 
           1 
            ; 
ipw[31]: = 
            1; 
FOR n:=l TO 
                31 DO 
   BEGIN 
   sum: =o; 
   FOR 
        j :  
           = 
             1 TO 
                   10 DO 
                           IF n > 
                                  =j THEN sum: =sum -k qtaps~J*iresp[ny"; 
   iresp[nJ: 
            =sum; 
   ipwr[32-succ(n)]: =ipw[32-n]+sqr(sum) 
   END; 

Note: As 
         the 
            minimum value that the delay  parameter  may 
                                                    not be 
                                                          less than 32, the  long 
                                                                             t
                                                                              e
                                                                               r
                                                                                m
                                                                                  
                                                                                  predictor has not influence 
on 
  the first 32 samples  of  the  impulse r
                                    e
                                     s
                                      p
                                      o
                                       n
                                        s
                                         e
                                          .
                                            

The calculation  of the energy, ipwrfl, of that part of t
                                                h
                                                 e
                                                   impulse response which  falls  within  the  current  excitation 
frame, 
      for all possible 
                     
                    positions 
                             
                            of a pulse within 
                                             
                                            a frame, is also illustrated 
                                                                     
                                                                    above: 
                                                                            these values are used later to 
normalize the 
            crosscorrelation function. 

## 5.3.6.3 Cross-Correlation Calculation

The calculation  of the crosscorrelation, *xcorrfl,* of the impulse *response* with  the  error  vector, *morn,* is  illustrated below. 

FOR  n:=O TO 
              31 DO 
  BEGIN 
  dot: =o; 

FOR j: 
     = 
      n TO 31 DO d
                 o
                 r
                  :
                   
                   =cior + 
                        morp 
                              + 
                               jJ*iresp&nJ; 

xcorr[nJ: =abt 
END; 

where b is the 
             sample  number  of 
                             t
                              h
                               e
                                 
                                start 
                                     of the 
                                          current  excitation  frame  within  the  current  speech  frame.  For  the 
                                                                                                     first, 
secop1cI, third, fourth and fifth excitation Erames of 
                                               
                                              each 
                                                   
                                                  speech ftame, 
                                                                the  value  of  b equals 
                                                                                    O, 32, 6
                                                                                           4
                                                                                             ,
                                                                                              %, and 128 
respec 
     tive1  y. 

## 5.3.6.4 Pulse A Procedure

Using the *xcorrn* w d o r
, tbe three pulse positions **and** amplitudes  per  excitation frame are calculated as shown below. 

FOR pulse: = I  TO 
                 3 DO 
  BEGIN 
       =O: 
  ~. 
    "" 
  FOR X-LO 
             TO 
                 31 DO 
         IF (sqr(xcorr[nJ) 
                        > 
                          =max*ipwr[nJ) and 
                                             not (n in  posn-set) THEN  BEGIN 
         mur.- =sqr(xcorr[nJ)/ipwr[nJ; 
         pos: 
             =n 
  END; 
  pn-set: =posn-set +[pos]; 
  pos~u[pulse]: 
               =pos; 
  a
    m
     p
      :
        
       = xcorr[posJ/ipwr[posJ; 
  qamp[puhel: =q-mp(mp,puW; 

## 5.0 Voice Encoder !Ixandards (Cont'D)

{Account 
        for the &a of the quantized 
                                    pulse just calculated on  the error to be minimized} 
      W
        H
          I
          L
           E
             puke < 
                     npuke 
                           DO 
      BEGIN 
            FOR n
                  :
                    
                    =O TO 
                           prdfpos) 
                                    DO 
            BEGIN 
            dot: =o; 

FOR j: 
      =O TO 
             31 
               -PS DO 
                       dot:  =dot 
                               + 
                                 iresp/j]*iresp/j 
                                              -b (ps-n)]; 

xcorr[nJ: =xcorr[nJqmp*dot 
END; 

FOR n:= pos TO 
              31 DO 
BEGIN 
dot: =o; 

xcorr[nJ: 
         =xcorr[nJqamp*dot 
      FOR j :  
              =O TO 
                     31 
                        -n DO dot:  =dot 
                                        + 
                                          iresp/j]*iresp/j 
                                                        + 
                                                          (n-pos)]; 

where psn-setfl, is a set used to  hold  the  pulse  positions  for  the  current  excitation  frame,  and 
                                                                                   quantamp is a function 
used to quantize  the  pulse  amplitudes 
                                 (
                                  s
                                   e
                                    e
                                      
                                     Section  5.3.6.5). 
- 
Note: The  second  and third pulses  selected  in each excitation frame are not allowed  to  occupy a position  already 
occupied  by a previously  selected  pulse  in  that  excitation 
                                                   f
                                                    r
                                                    a
                                                     m
                                                      e
                                                       .
                                                         

The 
   pulse  selection  routine  above,  selects  the 
                                 b
                                 e
                                  s
                                   t
                                    position  for  each  pulse, 
                                                     as 
                                                       the  position 
                                                                in the  excitation 
                                                                            frame (value 
of the  index n) a
            t
             which  the normalized crossamlation function: 

sqr(xmrr[n])/ípwr[nJ; 
                     n =O to 31 

is a maximum. 

After  the 
          first 
               pulse has 
                         been 
                              selected,  and  the  pulse 
                                                      amplitude quantized,  the  effect 
                                                                                       of this 
                                                                                              pulse on the  error  signal  must 
be accounted 
              for, before the selection of the second and t
                                                             h
                                                              i
                                                               r
                                                                d
                                                                  
                                                                  pulses  take  place. It is in  fact  easier  to  account  for  the 
effects of this 
               pulse  directly, by  modifying  the crossamlation vector, xcorrfl, as illustrated  above. 

## 5.3.6.5 Pulse Amditude Ouantization

T
h e t h r e e
 
pulse  amplitudes  selected per excitation frame are quantized  using 
4 bits  each,  for  the  first  and  second  pulses in  each  excitation frame, and 3 bits  for t h e
 
third pulse  in the f r a m e
.

 The quantization  of  each  pulse  amplitude  involves two *separate* normalization stages: the first w n n a l i z a t i o n pn>cess takes 8ccount  of  the  average  variation  in  the  modules of the  pulse amplitudes w i t h i n
 
an excitation frame and t h e
 
second process takes  account of the  variation  in  speech  energy from one  excitation frame to the next. No explicit **information** is  transmitted t o the  receiver  regarding  either  of  these normalizations. 

After  each  pulse has been normalized it  is quantized using a non-uniform  quantizer: a 4-bit  quantizer  is  employed  for the  first  and second pulses in each excitation f r a m e
.

 The  decision  thresholds,  decoded  output  levels  and  the  line  codes for this 4 bit quantim **are** illustrated in Table *5-5* below. 

Index 
Decision 
 
Line 
Code 
Decoded 
 
Output 
Thteshold 
Level 
7 
-2.4010 
1111 
-2.7330 
6 
-1.8440 
1110 
-2.0690 
5 
-1.4370 
1101 
-1.6180 
4 
-1.0990 
1100 
-1.2560 
3 
-0.79% 
101 
1 
-0.9424 
2 
-0.5224 
1010 
-0.6568 
1 
-0.2582 
1001 
-0.3881 
5.0 VOICE 
 
ENCODER STANDARDS (cont'dl 
lo00 
~ -
0
.
o
o
O
o
 
ooOo 
O.ooO0 
-0.1284 
o. 
1284 
0.2582 
O001 
0.3881 
0.5224 
0010 
0.6568 
O. 79% 
001  1 
0.9424 
o100 
1.2560 
1 
.o990 
1.4370 
O101 
1.6180 
1.8440 
2.0690 
o1 
10 
o111 
2.4010 
2.7330 

For the third **normalized** pulse 
 
amplitude, 
 
a 
 
3-bit 
 
non-uniform 
 
quantizer 
 
is 
 
employed. 

 
Table 
5-6 defines 
 
the 
 
pulse amplitude  quantizers  for  the third pulse. 

| Decision    |         | Line    |     | Code    |
|-------------|---------|---------|-----|---------|
| Threshold   |         |         |     |         |
| I           | H       |         |     |         |
| 3           | -1.7480 | 111     |     |         |
| -2.1520     |         |         |     |         |
| I           | I       |         |     |         |
| 2           |         |         |     |         |
| 110         |         |         |     |         |
| -1.3440     |         |         |     |         |
| I           | I       |         |     |         |
| 1           |         |         |     |         |
| 101         |         |         |     |         |
| -0.5006     |         |         |     |         |
| O           |         |         |     |         |
| 100         |         |         |     |         |
| -           | 0       | .       | o   | o       |
| O           |         |         |     |         |
| 0.ooOo      |         |         |     |         |
| o00         |         |         |     |         |
| O.          | 245     |         | 1   |         |
| II          |         |         |     |         |
| I           |         |         |     |         |
| 0.5006      |         |         |     |         |
| I           |         |         |     |         |
| 001         |         |         |     |         |
| I           |         |         |     |         |
| 0.7560      |         |         |     |         |
| II          |         |         |     |         |
| 2           |         | 1       |     |         |
| .O500       |         |         |     |         |
| O10         | 1.3440  |         |     |         |
| II          |         |         |     |         |
| u 3         |         |         |     |         |
| I           |         |         |     |         |
| 1.7480      |         |         |     |         |
| 1           |         |         |     |         |
| O11         |         |         |     |         |
| I           |         |         |     |         |
| 2.1520      |         |         |     |         |
| II          |         |         |     |         |

The normalization of the pulse ampliaades before  quantization  is  crucial to the s u c c e s s f u l
 
operation  of the pulse  amplitude quantizer. The two mrmpliption s t a g s are explained in the  next  subsection. 

. .  
m 

## 5.3.6.6 Normahah

The first *stage* of tim mnmdhtion p r o c e s s
 
is an intraframe **normalization** and  is  achieved  by  multiplying **each** pulse in an excitation fram by a s e t of fixed **scaling** factors (
s e e
 
Table **5-7** below). 

Pulse 
scaling factor 
First **pulse** found 
via the 
sequential **search** procedure 
1.0 
via the 
sequential **search** procedure 
1.6 
S
e
c
o
n
d
 pulse  found 
via  the  sequential **search** procedure 
1/0.375(-2.67) 
Third pulse  found 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## 5.0 Voice Encoder =Andards (Cont'D)

These d i n g  
factors  adjust  the  pulse  amplitudes within an  excitation frame so that on average  they  are  more  nearly e q u a l
.

 
The  pulse  amplitude  information is traqmitted in  the  order  in  which  the  pulses are  found.  Thus  the  decoder  can  take account  of  the  encoder scale factors by dividing  the  decoded  pulse  amplitudes  by 
1, **1.6** and *2.67* respectively,  for  the first,  second  and  third  pulses  received  for each excitation frame. 

The  second  pulse  amplitude  normalization  stage  accounts  for t h e
 
variation  in  speech  energy  from  one  excitation  frame to  the  next.  The **gain** factor u s e d for  this  normalization  is  adapted  in a backward  fashion  according  to  the line  codes generated  by  the  pulse  amplitude  quantizers.  After  quantization  of  the  normalized  first  pulse  amplitude  the  gain  factor is  adjusted by the  multipliers  presented  in  Table 
5-8 below. 

Thus if the  line  code  issued  for  the  quantized first pulse  amplitude  is  either O1 
11 or 1
O
0
0
, corresponding  to  the  most positive  and **most** negative  quantizer  levels  respectively,  the gain factor is increased  by a factor of 2. If the  line  code issued,  however, is either o o
0
0
 
or 11 
11, **corresponding** to the  smallest  quantizer  levels,  then  the gain factor  is  decreased by a factor of *0.75.* The **gain** factor  adaptations  for **all** other  line codes issued  for  the  first  and  second  pulses can be obtained  by  reference  to  Table 5-8. 

The **gain** factor  adaptations  after  quantization  of  the third pulse  amplitude is defined  by  Table *5-9* below. 

After 
 
the **gain** factor is adjusted 
 
according to the  line  code just issued, t examining **the** line  code  issued  for  the  previous  pulse. If pulse,  indicate t h pulses were increased  further. **This** further **gain** factor  increased is by a multiplication  factor **corresponding** to the most gain factor may be increased  by a further  factor of 2 and  following **the** quantization  of  the  third  pulse,  the **gain** factor may be f u r t h e r
 
increased  by a factor of 1.5. 

- 
Note: **This** further  adjustment of the **gain** factor,  according  to  the  line codes issued  for  the  pulse just quantized  and  the previous  pulse,  is  continuous  across  excitation  and  speech frame boundaries. 

After 4 
adjustments of the **gain** factor, g f
¿
z
~
r
_
Z
e u k
,
 
it is hard  limited,  ensuring  that it is bounded,  such  that: 

$$0.5=<g f a c t\_l e a k<=512$$
%
g
 
initialization both the a m d e r  
ani w e r
 **gain** factors are set to **unity.** Provided  there are no transmission  error the d e c o d e r
 
pulse  amplitude **gain** factor w i l l track the encoder pulse  amplitude **gain** factor  exactly. To minimize the effects of  transmission errors a **degree** of  leakage is included 
 
in t h e
 **gain** factor  adjustment a t both  the encoder and decoder. The **gain** factor 
 
calculated from the adaptation  rules,  and  including  leakage, *&act-led,* is  givea by: 
It  is the leaked **gain** factor, *gfact-leak,* which i s u s e d
 
to normalize  each  pulse  amplitude, i.e., normalized  pulse  amplitude 
= pulse  amplitude / *duct-leak.* A flowchart **summarizing** the **operation** of the  pulse  amplitude  quantizer is presented in Figure **5-8** and  the  high-level code description  of t h e
 
quantizer  is  presented  below. 

{Puke amplitude  quantizer  initialization} 

aClap[3,0]:=0.875;  &pt[3,1]:=0.875;  adapt[3,2]:=1.0; 
                                                          d
                                                           '
                                                           [
                                                            3
                                                             ,
                                                             3
                                                              ]
                                                              :
                                                               =
                                                                1
                                                                 .
                                                                 5
                                                                  ;
                                                                   
qU[3,0]: 
           =O. 5
                c
                1
                 1
                  0
                   6
                    ;
                      
                     q~nt[3,1]: 
                                = 
                                  l. 
                                    050; quant[3,2]: 
                                                    = 
                                                      l. 
                                                        748; 
inv-quant[3.0]:  =0.2451;  inv_quant[3,1]: 
                                         =O. 7560;  inv_quant[3,2]:=1.3&; 
inv_qrcant[3,3]:  =2.152; 

{4  bit  quantizer  initialization} 

*t[4,0]:=0.75;  Niapt[4,1]:=0.875;  &pt[4.2]:=0.875;  adapr[4,3]:=0.875;  &pt[4,4]:=1.0; 
adapt[4,5]: = 
             l. 
               25; 
                   adapr[4,6]: 
                              = 
                                l. 
                                  5; adapt[4,7]: = 
                                                  2. 
                                                    O; 
q~atU[4,0]:=0.2582; 
                     qu~t[4,1]:=0.5224; 
                                           q~ant[4,2]:=0.79%; 
quant[4,3]:=l.m; quant[4,4]:=1.437;  quant[4,5]:=1.844;  g~ant[4,6]:=2.401; 
inv_quant[4,0]: 
               =O. 1284;  inv_quant[4,1]:  =0.3881;  inv-quant[4,2]: 
                                                                   =
                                                                    0
                                                                     .
                                                                       6
                                                                        5
                                                                         6
                                                                          8
                                                                           ;
                                                                              
inv-quant[4,3]: =O. 9424;  inv_quant[4,4]: 
                                         = 
                                           l. 
                                             2
                                              5
                                               6
                                                ;
                                                   
                                                  inv_quant[4,5]: 
                                                                  = 
                                                                   l. 
                                                                     61 
                                                                        8; inv_quant[4,6]: 
                                                                                          = 
                                                                                            2.069; 
inv_quant[4,7J-  =2.733; 

FUNCllON qUantamp(leV:real,  pulse:integer):real; 

VAR 
       i,qbits 
                  : 
                   integer 

BEGIN 
       sgn : 
               -1.. 
                  
                1; 

lev: 
    = 
      lev*rdjust[puke] 
l
F
  puke < 
            3 THEN  BEGIN  qbits: 
                                      =4; q h l s :  
                                                     = 
                                                       7 
                                                         E M  

ELSE BEGIN qbits:  =3; 
                    q h k :  
                          =3 END; 

IF lev>O ZYEN sgn:=l ELSE  sgn:=-1; 
i: =O; 
W
   L
    L
     E
        (abs(lcv) > 
                    &qbìts,iJ*gfiut-M) 
                                                 and 
                                                      (i 
                                                       < 
                                                          q h k )  
                                                                  DO i: =succ(i); 
quantamp: 
           = 
             inv q
                   n
                    a
                      ~
                       #
                        i
                         #
                          i
                            t
                             s
                              ~
                               i
                                J
                                  *
                                   s
                                    f
                                     a
                                       c
                                        r
                                          
                                        Wsgn/djust[puke]; 
gfact-leak: =E~O.W%N(gfact_ld)); 

IF i=qlevels THEN 
  BEGIN 
  IF mexadapt THEN  gfact ¡
                              e
                               &
                                :
                                 =gfact_leak*adapt[qbits,qlevels]; maxadapt: =true 
  END  ELSE maxadqt: 
                          =fãlse; 
gfact  leak: =gfact-leak*adapGqbits,i]; 
IF g&t leak>512.0 THEN  gfact-leak:=512.0  ELSE 
   IF &t-leak<O.5 
                     
                    THEN 
                              gfrpct-leak: =0.5 
END 
     
    of 
          quantamp. 
                      }; 

## 5.0 Voice Encoder Standards (Cont'Dl $.O Voice  Encoder Standards (Cont'Dl

5.3.6.6 Pulse **AmDlitude** Normalization 
 
(cont'dl 
- 
Note: **This** operation is performed  for  each  of  the  five  excitation frames contained  within  a  transmission  frame. 

Note: The line codes for the pulse aniplitudes are available  after  execution  of  the  line  of  code: 

WHILE (äbs(zevl> quant[qbits,iJ*gfact-kd) 
                                 and (i < 
                                        qlevels) DO 
                                                 i: =succ(i); 

The line code for  pulses 1 and 2 are defined in 
                                         Table 5-5 and  the  line d e  
                                                                 for  pulse 3 is  defined  in  Table 5-6. The 
value  of  the  variable 
                  "i" 
                     at  completion  of 
                                   the execution  of  the  line  of  code  above 
                                                                     acts as the  index  to  these  tables. 
                                                                                                 The 
value of the  variable 
                  "sgn" a
                        t
                         this 
                             same point  in  the  function  determines  whether 
                                                                    the msb  of  the  line  code  is  zero 
                                                                                               or one 
corresponding  to  a  positive 
                        or negative  pulse  amplitude  respectively 
                                                           (
                                                           s
                                                            e
                                                             e
                                                               
                                                              Tables 5-5 and 5-6). 

## 5.3.6.7 Pulse Position Encoding

Each 
 
pulse 
 
position is e n d e d  with 
 
reference 
 
to 
 
the 
 
beginning 
 
of 
 
the 
 
excitation frame within which 
 
it 
 
falls. 

 
With excitation **frame** durations  of 4 m, and 8 **kHz** sampling,  there **are** 32 sample  positions  per  excitation  frame. A S-bit line  code  is  thus  required  to  encode  each  pulse  position.  Positions  within  each  excitation  frame are numbered  from O 
to **31,** with O corresponding to the  first  sample  position  within  each  frame **and** 31 corresponding  to  the **last** sample position.  Table **5-10** below  presents  the  line codes corresponding t o various  pulse  positions. 

## Positiom And Corresponding Line Code 5.4 Parameter Transmission

This section **describes** the  transmission frame structure used by the  encoder. 

## 5.4.1 Introduction

A specification *summary* of the 
 
multipulse-excited LPC 
e n d e t  is 
 
presented 
 
in 
 
Table 
5-1 
1. All 
 
the 
 
parameters presented in **this** Characteristic  have been defined  in  Section 
5.3, except  the  error  protection  codes  which are associated with the partial **correlation** coefficients. 

5.0 VOICE 
ENCODER S T A N D A R D S  
Icont'd) 
values 
Forameter 
hput bandwidth 
0.2 - 3.4 KHz 
sampling rate 
~ 
8.0 KHz 
Short-term  Predictor 
loth order 
LPC  analysis 
Autocorrelation  analysis with 32-  Hamming  window 
and 
2Oms predictor  coefficient  update  rate 
Partial  correlation coefficients 
192 
394 
5,6 
798 
9,lO 
Error  Protection 
6 bits 
5 bits 
4 bits 
3 bits 2 bits 
14  bits 
54  bits/20ms 
Total 
Long-term  Predictor 
one-tap 
6 bits 
2 bits 
Long-term  correlation  lag 
G
a
i
n
 
parameter 
8 bits/20ms 
T
o
t
a
l
 
Excitation 
Three **pulses** per 4 m excitation **frame** (i.e., 5 excitation 
f
r
a
m
e
s
n
p
c
 f
r
a
m
e
)
 
5 bits 
5 bits 
5 bits 
Pulse  position 1 
Pulse  position 
2 
Pulse position 3 
Pulse 
amplitude 1 
Pulse amplitude 2 
Pulse  amplitude 
3 
4 bits 
4 bits 
3 bits 26 bitsMms 
Total 

## Summary 5.4.2 Error Protectim

Shgle bit error -double error detection i s applied to 26 bits  out of the 4
0
 
bits u s e d to  quantize  the partid correlation coefficida **Figure** 5-9 illuskates which  of the  partial  correlation  coefficient  bits are protected.  Burst  error detection is also and burst **errors** occurring within the same 26 **partial** correlation 
 
coefficient 
 
bits or the single 
 
bit error/ 
m detection bits (Figure 
 
5-9) *can* be 
 
detected. 

## 5.4.2.1  Single Bit Error Correction And Double  Error  Detection

Single 
 
bit error correction is provided 
 
for t h e protected 
 
partial 
 
correlation 
 
coefficient bits by a 5-bit Hamming Codeword. A **parity** bit *( o d d*  **parity)** is  augmented  to  the **Hamming** &word to  provide  double error detection.  The Hamming function **presented** below d e f i n a the  operations  involved in finding a Hamming deword. 

## 5.0 Voice Encoder *Standards* (Cont'Dl 5.4.2.1 Single  Bit Error Correction And Double Error Detection  (Cont'D)

 
f f  
 
f f  
 
f f f  
3 2   4 3 2 1   4 3 2 1   5 4 3 2 1   5 4
4 3 2   5 4 3 2 1  
3 2 1   5 4 3 2 1   4 3 2 1  
5 4   4 3 2 1  
3 2 1  
4 3 2 1   5 4 3 2 1   3 2 1  

* Bits covered by Hamning code 
                                         f Bits covered by turst 
                                                                   
                                                                 error 
                                                                        
                                                                       detection 
                                       F
                                        -
                                         
                                               5 3  Transmission 
                                                                    Frame Stmcture 

## Generasion Of Hamminp Cudewords

TYPE hamrng = 1.26; 
     hamword = 
               away e
                          d
                                 
                            of hlean; 

hamw0rd):integer; 

BEGIN 

FOR i:=l TO 26 DO 
n: =4; count: 
          =3; h
               a
               m
                 :
                  =O; 

BEGIN 
IF word[i] W E N  
              h
               a
               m
                 :
                  =EXOR(ham,count); 
count: 
     =succ(count); 
II: 
  count=n THEN  BEGIN n: =n*2;  count:  =succ(count)END 
END 

  hammin -=ham 
  END { o f k i n g .  
                 1; 
- 
Note:  'EXOR function is bit-by-bit exclusiw - OR operation  on 
                                                    two integer  values 

The odd-parity bit is prepended to t
                                h
                                 e
                                   5-bit d e w o r d  
                                                 as the most  significant  bit. 

## 5.0 Voice Encoder Standards Kont'Dl 5.4.2.1 Single Bit **Error** Correction And Double Error Detection (Cont'D)

Single error correction is provided  with a (31,26) Hammin 
 
code 
 
which is  further  augmented  with a 32-nd  parity  bit to provide  double error detection. The Hamming  code  is (B 
efined  by a parity check  matrix H, where  H-transpose is and G, the  generator  matrix,  is G26,31 = (126,261P5,2d For binary 
 
elements recal P = -P 
The **row** vector 
 
codeword c31 
= i26 G26,31 

$$\begin{array}{l}{{=i_{26}\,x\;(i_{26,26})^{P}26,5)}}\\ {{=i_{26}\;^{1}\;(i_{26}\,x\;P_{26,5})}}\end{array}$$
where I is the  identity  matrix  of  the  appropriate  dimension, i is the  26-bit  information-bit  vector. 

and i P
 **forms** 5 parity  check  bits. 

Note  that  only  the 5 parity  bits p5 = iP need be calculated. These are simply  appended  to  the i vector  to **form** c = 
i \p. 

On decoding,  where  the ' 
denotes  bits  possible  received  in  error,  the  syndrome 

$$\begin{array}{r l}{s_{5}\ =\ c^{\prime}s_{1}H^{T}}\\ {\ }&{{}=(i^{\prime}|p^{\prime}s)\,x\ (\ P26,5)}\\ {\ }&{{}=(i^{\prime}P)\ +\ (p^{\prime}l)}\end{array}$$
Thus  the  syndrome can be found  by "reencoding" 
the  received  information  bits to fínd a new  set  of " arity"  bits, ¿'P, and thea 
 
adding **the** new s e t to 
 
the 
 
received set, P'. The syndrome co nds to 
 
the c o l u m n  
of 8 
or row 
 
of HZ, where  the  single error m u d .  **This** *can* be determined by  table l o o k - u z n o t  
error occurred, S 
= 
O. In both cases the same **Pascal** code for  forming iP (or i 'P) 
is the **basis** of  their  calculation. 

The  particular  systematic Hamming code chosen uses 

HT31,5x (-PT  I I) = (3,5,6,7,9,10,I1,12,13,14.15,17,18,19,W,21.22,23,24,25,26,27,28.29,30,31  l1,2,4,8,16 
where  each  digit reps#aes the cotresponding 5-digit  column  vector. 

For example:  1  O  , 5 ,  = I  O  O 
Notice that the  values of T, n = **0,1,2,3,4,** form  the  identity matrix at  the  end. 

We **need** to  form iP for encoding, or iP for  decoding.  The **Pascal** code  utilizes  the  variable i to store  the  information bits. Rather than **perform** 5 *sets* of 
 
26 multiply/~umulates to **generate** the 5 parity 
 
bits, 
 
the 
 
entire grou of 5 is generated 
 
in 
 
the 
 
variable '
h a m
'
 
in one s e t of 26 exclusive-OR operations. **Beginnin** with 
 
the *first* row 
 
of dl 'count' 
= 3 = .... 

. 

OOolI, '
h a m
'
 
is ex-OR'ed 
 
with 
'count' 26 
 
times. 

A **trap** is 
 
set 
 
to 
.

&
P
 the 
 
first 
 
rnteger 
 
power of 2 
encountered, n = 4. When 
4 is  encountered, it is  skipped,  and  the  trap is reset for  the  next  integer  power of  2, and so on. 

## 5.0 Voice Encoder Standards (Cont'D) 5 . 4 . 2 . 2 Burst Error Detection

To enable  the  decoder to detect  burst  errors  occurring  across  the  most  critical  partial  correlation  coefficients  bits,  a hrther 8 bits **are** augmented 
 
to 
 
the 26 
most importaut 
 
partial 
 
correlation 
 
bits 
 
and 
 
their 
 
associated 
6 
bits of error protection.  The 2
6
 
partial correlation  coefficients  bits, P, the 6 
single  bit  error  correction/double  error  detection  bits, e, and  the 8 burst error detection  bits,  b, are arranged m a 8 by 5 matrix  structure as illustrated  below. 

inadequate,%e 
 
line 
 
codes are then 
 
and 
 
the 
 
output 
 
of 
 
the 
 
decoder is muted as per 
 
Section 5
.

5
.

5
.

1
.

 
Even **parity** bit error rotection is provided, on a column-by-column  basis,  to this matrix  of bits,  using  the 
8 burst  error detection bits.  The fburst error 
 
detection 
 
bits 
 
are 
 
excluslve-ORed 
 
with 
 
the 
 
mask 10101010 
before 
 
transmission. 

 
At the  decoder  the  received  burst  error  detection  bits are similarly  exclusive-ORed  with this mask,  before  the  error  detection process c o m m e n c e s
.

 Each 
 
column 
 
of 
 
the 
 
resultin 
 
matrix are then 
 
examined 
 
for a tential 
 
lack 
 
of 
 
even arity. The matrix 
 
and 
 
the 
 
associated 
 
column 
 
error 
 
in P 
ormation **are** then 
 
submitted 
 
to $e error 
 
detection 
 
an B correction p'ocess defined i n Section 5
.

5
.

2
.

 
I 
rocess 
 
indicates 
 
that 
 
the 
 
corrected 
 
error 
 
level 
 
of 
 
the 
 
received 
 
coefficient 
 
line codes is ad uate, 
 
the 
 
coefficients 
 
decoded 
 
from 
 
the 
 
line 
 
codes. 

 
However, 
 
if 
 
the 
 
corrected 
 
error 
 
level 
 
is 
- 
Note: The  purpose  of  the 
8 Burst Error  Detection  bits is to  guard  against a pathological case where  an  extremely íon burst error **senes** mi t render **'O'** bits 
 
in 
 
all 4
0
 
positions 
 
of 
 
the 
 
Calculation 
 
Matnx. 

 
In 
 
that case, the exclusive-Oi operahon on the "b" 
?

!

l
 
its of  the  matrix  would c a w
 *odd* **parity** to be made  in  four  of  the  columns,  thereby  forcing  the error  detection  and  correction pn>cess to  discard  the  transmission f r a m e
.

 

## 5 . 4 . 3 Transmission Frame Structure

For a transmission  bit-rate  of 
9
.

6
 
kbit/s and a 20 
ms **speech** frame size, 1
9
2
 
bits are available  per  speech  frame  for  voice encalhg and 
 
synchronization. 

 
Frame synchronktlon is accomplished 
 
using a 20 
ms frame 
 
synchronization 
 
signal available **from** the  modem. The order  in  which  the  multipulse  parameters are transferred  to  the  transmission  controller hardware  follows  precisely  the  order in which  they are calculated.  The  order  of  parameter  derivation  per 
20ms speech frame is as follouk 

1
.
 Partial 
 
correlation 
 
coefficients 
2
.
 **Long-term** predictor 
 
parameters 
3
.
 **Pulse** positions 
 
and 
 
amplitudes 
 
for 
 
excitation frame number 1. 
4
.
 Pulse 
 
positions 
 
and 
 
amplitudes 
 
for 
 
excitation frame 
number 2
.
 
5. **Pulse** positions 
 
and 
 
amplitudes 
 
for 
 
excitation frame 
number 3
.
 
6. Pulse 
 
positions 
 
and 
 
amplitudes 
 
for 
 
excitation frame 
number 4
.
 
7
.
 Pulse 
 
positions 
 
and 
 
amplitudes 
 
for 
 
excitation 
frame 
number 5
.
 
The  orderin  of the parametei line code bits  prior to transmission is illustrated  in  Figure 5-9, where  each  line  code  bit is numbemf t h e
 
largez the number t h e
 
more signifiaut the  bit.  Before  the parameters are  finally  transmitted  to  the number one? 

decoder 
 
the line code bits are grouped **mto** bytes (bytes are formed **starting** with 
 
partial 
 
correlation 
 
coefficient Tb6 
m significant  bit  of **each** byte  is t h e
 
left-most  bit.  Each  byte  is transmitted least  significant  bit first, 
 
starting with tbs byte. 

## 5 . 5 The Decoder 5 . 5 . 1 Introduction

The 
 
structure 
 
and 
 
operation 
 
of 
 
the 
 
decoder is identical to the structure and 
 
ration 
 
of 
 
the 
 
local 
 
decoder 
 
of 
 
Section 
5
.

3
.

5
.

 
However,  the  parameters  of the decoder, unlike  those  of  the  local d a r
 
of  Section 5
.

3
.

5
,
 
requires  appropriate decoding  of the t r a n s m i t t e d
 
bit  stream. 

## 5 . 5 . 2 Decoding Of The  Partial  Correlation  Coefficients

Before  the  partial  correlation  coefficients are decoded  the  partial  correlation  coefficients  error  protection  codes  are first examined. The burst  error  detection  bits  (after  being  exclusive-ORed  with  the 
10101010 
mask)  and  the  Hamming  code word  protection are u s e d
 
to  direct  the  error  correctionldetection  process as illustrated by the  flowchart  of  Figure 
5-10. 

The  flowchart **has** the  following  outcomes: 
--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## 5.0 Voice Encoder Standards (Cont'D) 5.0 Voxce Encoder !3Tandards Kont'D)

1. 
External squelch **signal** is active. 
 
Mute 
the &. 
2. 
No 
errors i
n
d
i
c
a
t
e
d
 
by burst or Hamming error c
o
d
e
s
.
 Decode  the  received  line 
codes 
in accordance 
with  the  highlevel *eode* and 
line code 
Table **5-2,** presented  in Section 5.3. 
3. 
Burst **and** Hamming error codes 
indicate **that** a single 
 
bit error has **occurred** in 
 
the 
 
critical **partial** correlation 
coefficient  bits.  Correct error and 
decode the 
corrected l
i
n
e
 c
o
d
e
s
.
 
4. 
Burst Md Hamming error & 
i
n
d
i
c
a
t
e
 
t
h
a
t
 a 
 
double 
 
bit error has **occurred** in 
 
the 
 
critical 
 
partial 
 
correlation 
coefficient  bits.  If  the  partial  correlation  coefficieats 
from the 
previous frame 
were 
 
received 
 
with no more than 
one 
bit  in error, then 
use the 
partial **correlation** coefficients  from  the  previous  frame,  otherwise  mute  the c
o
d
e
c
.
 
5. Burst **error** code 
indicates *two* or three bits  in  error.  If  the  partial  correlation  coefficients **from** the  previous  frame 
were  received  with no more than 
one 
bit  in error, t
h
e
n
 
use the 
partial  correlation  coefficients **from** the  previous 
frame, otherwise  mute  the c
o
d
e
c
.
 
6. 

Burst error codes indicate **that** more than three errors have 
 
occurred. 

 
Mute the c o d e e
.

 
After error correction/detection **has** been applied,  the  decoder's s e t of filter tap  values, *qtapsu,* **are** derived  from  the partial  correlation  coefficients, **using** the  step  up  procedure (
s e e
 
Section 5.3.3.5). 

## 5.5.3 **Long** Term Predictor Parameter Decoding 5.5.4 Excitation Parameter Decoding 5.5.4.1 Pulse Positions

The  pulse  positions  for  each  excitation  frame are decoded  in accordance with  line  code  Table 
5-10. Each  position  thus d e c o d e d
, is referenced to the  beginning  of  the  current  excitation f r a m e
.

 

## 5.5.4.2 Pulse Amditudes

The 
 
pulse 
 
litudes in each 
 
excitation frame **are** received 
 
in 
 
the order in 
 
which 
 
they 
 
were 
 
transmitted. 

Thus after decodin t h e
%
 
pulse  amplitude,  the  amplitude  normalizations described in Section **5.3.6.6** must  be taken account of. 

For the f r s t
 
Ise m each excitation  frame the decoded ulse **amplitude** is multiplied  b  the  decoder  value of gfact-leak, to give **the** & 
pulse  amplitude. n e  
decoder, *d a c t - h ,*  **parameter** is then updatedrin the same way as the  encoder, 
&act-&&, value. 

The decoded second ulse amplitude is multiplied  by the updated act *leak* parameter and the m n d  
stage,  intraframe, normalization is  appted. For the second pulse h s  
means divi & 
g t
&
 
result  of  the  above  multiplication  by 1.6 (
s e e
 
Section 5.3.6.6) to give the f i n a l
 
pulse amplitude  value.  The *&act-leak* **parameter** is updated. 

The  third pulse amplitude is obtained by  multiplyin  the decoded value  by 
&act-leak **and** dividing the result  by the third pulse  intraframe  normalization  constant 
2.67 (see 
&
t i o n
 **5.3.6.6).** The *&act-leak* panmeter 1s **again** updated. 

The  amplitude c
               o
                 m
                   p
                    e
                     m
                       a
                         t
                         i
                         m
                            process 
                                    described  above is defined  by the 
                                                                     following  process: 

{lnitialiration] 

13 bit initialization} 

*t[3,0]:=0.875; 
               
              t[3,1]:=0.875; 
                            
                          *t[3,2]:=1.0; 
                                                       ada t[3,3]:=1.5; 
inv-quant[3,01: =o245 
                   9 
                        inv_quant[3,11: 
                                       =O. 7560; inv-quant[.2~:=1.3~; 
                                                                       inv-quant[3,31: 
                                                                                      =2.152; 

{4 bit initialization} 

adapr[4,0]:=0.75; 
                 
                adapt[4,1]:=0.875; 
                                   
                                 t[4,2]:=0.875; 
                                               
                                              adapt[4,3]:=0.875; 
                                                                 
                                                               adapt[4,4]:=1.0; 
adapt[4,5]:=1.25; ada t[4,6]:=1.5; 
inv_quant[4,0]: 
              =O. 12&; inv_quant[4,1]: 
                                     =0.3881; inv-quant[4,2]: =
                                                              0
                                                                .
                                                                 6
                                                                   5
                                                                     a
                                                                      ;
                                                                         
[nv-quant[4,3]:=0.9424;  inv_quant[4,4]:=1.256;  inv-quant[4,5]:=1.618;  inv-quant[4,6]:=2.069; 
tnv_quant[4,7]: 
              =2.733; 

VARi,qbits: integer 
sgn: -1.. 1; 

## 5.0 Voice Encoder =Andards (Cont'Dl 5.5.4.2 **Pulse** Amdlitudes (Cont'D)

FOR uLre:= 1 To 
               3 DO 
BEG& 
~- 
IF puke < 
       3 
         TUEN BEGIN qbits: 
                        =4; c
                             o
                              r
                              e
                               l
                                s
                                :
                                  
                                 = 
                                   7 END 
ELSE  BEGIN  qbixs: 
              =3; qkwls: 
                        =3 E
                            b
                              ;
                                
i: =O; 
WHaE (abs(qamp[pulse]) 
                   > 
                     inv quant[ bits,ì]) and (i < 
                                         qkwls) DO i: =suCC(ì); 
qamp[ ulse]:- am [ 
                uLse]* a 3  le 
                          ak? 
                             adj~ut[pulse]; 
gfaa-$& 
        =Ë&(&&LN($&?&)); 

If muting of the  decoder  output  is  indicated  (Section 5
                                                                        .
                                                                          5
                                                                           .
                                                                            5
                                                                             .
                                                                              1
                                                                                )
                                                                                 ,
                                                                                   the contents of qampu shall be set to zero after the 
completion of the above  operation. 

## 5.5.5 Oderation Of The Decoder

Once all 
 
the 
 
parameters 
 
have been appropriately M d ,  
t h e decoder 
 
operates 
 
in an identical fashion to t h e local decoder of Section 5
.

3
.

5
.

 The o ration 
 
of the excitation 
 
generator, **short** term **and** long term predictors, 
 
which constitute the M e r ,  
have been g f i n e
-
d
 
in  Sections 5
.

3
.

5
.

1
,
  5
.

3
.

5
.

2
 
and 5
.

3
.

5
.

3
 respectively. 

## 5 . 5 . 5 . 1 The Mutine Process

The muting **process** is invoked  when  there  is  an  indication 
t
h
a
t
 
a severe  error  condition  exists. T
o
 
mute the &: 
- 
the 
pulse amplitude 
 
received 
 
line & 
for the first and 
s
e
c
o
n
d
 pulses are 
set to binary '
0
1
0
0
'
 
and 
the received 
line code 
for the third 
 
pulse is *set* to binary **'010'.** (B forcing the 
receiyed h e  
codes 
to these 
 
values the gain 
factor used **for** pulse  amplitude  normalization, 
gfact-led, 
is adjusted 
to a md-range  value 
in readiness **for** the start 
of w
n
n
a
l
 decoding.) 
- 
set the 
decoded pulse 
 
amplitudes to zero and 
operate the decoder as 
outlined 
 
in Section 5
.
3
.
5
.
 

## 5.5.5.2 Soeech Oumut Transcoding

Each  speech  sample  derived from the vector s y n t h s p ~  
will exhibit the internal  floating  point  numeric  range a s
 
defined in Section 5
.

3
.

 
l
.

 3
.

 The numeric range of the speech sample *stream* should be appropriately 
 
scaled **prior** to any subsequent **digital** ttanscodig or d o g  
spxzh feco11stTuctioil. 

## 6.0 Data  Interface Unit Functional Reoulrellients 6.1 General

The data interface  unit 
(DIU) 
shall interwork  with a **user's** CCITT V 
series d e m  
and  with  the  DIU 
a t the  distant end through a C-chvlnel pair in *OCCOCdPIlCC* with requiremats in  the  following  sections. 

## 6.2 Plesiochnous Intctcoanection Reuuirements

The clock rate accuracy 
 
of **the** received data **from** the 
 
terrestrial **network** is, in 
 
general, **worse** than the required clock rate stability of the satellite  channel.  It is therefore *mxeaary* to implement a plesiochronous  interconnection  arrangement  in both is not required in the retum direction,  if t h e
 
v o i c e "  **modems** associated  with  both t h e AES 
and GES are synchronized to the satellite  C-channel  clock. 

The rpte adaption scheme  described  in Section 6.3 provides  the meam to transfer  a  variable number of *octets* in  each  C-channel frame. **This** capability,  referred to as 
"stuff  control,' is used to adjust  the  plesiochronous  buffer contents when  a buffer overflow or underflow o c c u r s
.

 
As a result,  integrity  of  the user data **stream** is preserved  by  avoiding t h e
 
occumce of  slips  during buffer adjustment. 

## 6.3 Rate Adaotion Scheme

This rate  adaption  scheme  applies to both  the  forward  and  return  directions.  The  plesiochronous buffer and  the  associated  buffer adjustment  mechanism  would **not** be used in  the  return  direction,  if t h e
 
voice-baud **modems** associated with both  the AE3 and GES are synchronized to the  satellite  channel  clock. 

The received **data** is arbitrarily  divided into 20 ms lengths 
 
which **are** referred to as described 
 
in 
 
Table 
 
2A. l. The available transmission capacity on the C-~hannel is **also** framed i n t o
 
20 ms primary  fields as shown in  Attachment 2X, Figure 3A. The basic  transmission **scheme** is to divide  each  primary  field into a  number  of  subfields,  each  of  length 
48 bits as shown in  Figure 
3
G
.

 
Provided t h e
 
user data  rate is less than the available  channel  capacity,  the  last  subfield has a special  format  consisting  of three copies  of  a  2-octet  field  made  up as follows: 

1. 
One **octet** being  either all zeros 
(the normal 
c
a
s
e
)
 
or a l-octet adjustment made to the  plesiochronous  buffer a
t
 the  fransmit 
end (PBA). 
2. 
One octet packing *code* (
P
C
)
 which 
 
indicates W 
of t
h
r
e
e
 conditions; 
 
i.e., 
 
overflow, 
no change, or underflow 
 
of 
 
the 
plesiochronous  buffer. 
The coding **rules** for the  PC  field and the  corresponding contents of  the  PBA  field  and t h e
 
reiterated  data  subfields  for  each  code value are given  in  Table  2A.2. 

The  subfields  from  the start of the primary  field carry 48-bit data fields as received  from  the  incoming  side  reiterated to the  extent possible  in the capacity  available.  The  possible  C-channel  primary  field  formats  for  the  various  channel  rates  and  the  different user data rates *are* shown in Tables  2B.1,  2B.2,  and 2B.3. 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## 6.0 **Data  Interface** Unit Functional Reouirehlehts (Cont'D)

bith 
First 48 
Second 48 
Third 48 
Fourth 48 
bits 
bits 
bits 
bits 
2400 4800 7200 
dl**- 
- 
- 
dl* 
- 
- 
- 
dl 
- 
- 
dl 
d2 
- 
- 
dl 
d2 
d3 
- 
dl 
d2 
d3 
d4 
where., 
* 
two copies o
f
 24 bits 
 
(bit interleaved) 
** eight 
 
copies o
f
 6 bits 
 
(bit interleaved) 
| I           | I                   |
|-------------|---------------------|
| PC          |                     |
| Value       |                     |
| Meaning     |                     |
| I           |                     |
| PBAContents |                     |
| I           |                     |
| ~           |                     |
| loo0        |                     |
| 1111        |                     |
| ~           |                     |
| 1111        |                     |
| o001        |                     |
| o111        |                     |
| 1110        |                     |
| U           | n                   |
| No          |                     |
| chauge      |                     |
| overflow    |                     |
| 48          |                     |
| data        | bits                |
| 48          |                     |
| data bits   |                     |
| where,      |                     |
| dll         |                     |
| dl,         |                     |
| d2          |                     |
| or          |                     |
| d3,         |                     |
| being       |                     |
| the         |                     |
| one present |                     |
| with        |                     |
| the highest |                     |
| suffix      |                     |
| value       |                     |
| PC          |                     |
| Packing     |                     |
| c           | o                   |
| PBA         | P l e s i a h o u s |

## 6.0 Data  Interface Unlt Functional Reouirements (Cont'D) Circult-Mode Data Channel Rate Adaption

| SubfieldNsar    | Bit    |
|-----------------|--------|
| Rate            |        |
| 1               |        |
| 200             |        |
| 2400            |        |
| TaMe 2B.1       |        |
| C-Channel       |        |
| Primary         |        |
| Band            |        |
| Rate            |        |
| =               |        |
| 2400            |        |
| bps             |        |
| Subfield/User   |        |
| Bit             |        |
| Rate            |        |
| 1               |        |
| 2               |        |
| 300             | dl     |
| 1200            |        |
| dl              | PBA/PC |
| 2400            |        |
| dl              | PBA/PC |
| 4800            |        |
| dl              |        |
| d2              |        |
bps 
SubfieldNser Bit Rate 
1 
2 
3 
4 
300 
dl 
dla 
 
dlb 
P B M  
1200 
dl 
dla 
 
dlb 
PBA/PC 
2400 
dl 
dla 
 
dlb 
PBAA'C 
4800 
dl 
d2 
dla 
PBA/PC 
7200 
dl 
d2 
d3 
PBA/PC 
%o0 
dl 
d2 
d3 
d4 

Where, 

a,  b denote copies of the suffixed bit s
                                                 e
                                                   ~
                                                     u
                                                       e
                                                        n
                                                          c
                                                           e
                                                             ;
                                                              

K P B A  
        dewtes 
                3 copies of a 16  bit sequence composed of: 
    8 bit  Plesiochrooous  Buffer  Adjustment field 
    8 bit  Packing Code field 

TaMe 2B.3 **C-Channel** Primary Band 
Rate = 9600 
bps 

## 6.0 **Data  Interface** Unlt Functional Reouirements (Cont'Dl

for 2400 bps C-channel primary  rate, N 
                                              = 1; we 
                                                         Table 28.1 for sub-field contents 
    4
     8
       0
         0
           
           bps cchannel primary rate, N = 2
                                                  ;
                                                    
                                                   see 
                                                        TaMe 26.2 for sub-fiekl contents 
    9600 
           bps C-channel primary rate, N - 
                                                 4
                                                  ;
                                                    
                                                    see 
                                                         TaMe 28.3 for sub-fieid contents 

## 7.0 Terminal Interface **Functional** Unlt Ctifq 7.1 Letroduction

For i n f o d o n  
                ou 
                   the Tstminal Interface Function Unit (TEU) 
                                                                 refer t
                                                                       o
                                                                         Attachment 3X. The material i
                                                                                                         n
                                                                                                          Attachment 3X 
                                                                                                                          has 
been 
     reprinted with the pstmission of Inmarsat 
                                               with all rights t
                                                               e
                                                                s
                                                                 e
                                                                  r
                                                                   v
                                                                    e
                                                                     d
                                                                      .
                                                                        Change Notice 64 is i
                                                                                              n
                                                                                               c
                                                                                                o
                                                                                                  r
                                                                                                  p
                                                                                                    o
                                                                                                     r
                                                                                                      a
                                                                                                       t
                                                                                                        e
                                                                                                         d
                                                                                                          .
                                                                                                            

## Terminal Interface Function I T I F ) 6.1 Gama

Tbe T
I
F
 is a 
 
semi-transparent 
 
function 
 
using 
 
in-band 
 
signalling 
 
in 
 
the 
 
primary-band of t h e
 
A4iooautical 
 
System C - c b l  
and may be implemented 
 
entirely 
 
within t h e
 **same** hardware platform as the voice *codec* software. 

6.1.1 
The TIF **uses** a blocked fnune 
structure,  in-band  signalling, **and** is  autonomous  in  operation  for 
user **data** rates up to 
and 
including **4.8** kbit/s,  requiring no interaction  with  the 
access and  control 
functions  of t
h
e
 
AES or GES a
t
 t
h
e
s
e
 
r
a
t
e
s
.
 
6.1.2 
Higher user **data** r
a
t
e
s
,
 i.e. 7.2 and 
9.6 kbit/s, may require  a higher 
quality  channel, or may be 
accommodated using **other** throughput 
 
enhancing 
 
techniques, 
 
such 
as real-time 
 
image/data 
compression. 
6.1.3 
At higher 
user **data-rates,** i.e. 7.2 and *9.6* kbit/s,  signalling  is  required between t
h
e
 
T
I
F
 and 
the 
host  equipment 
to 
change t
h
e
 
Power Control Decision  Table  in 
t
h
e
 
GES to 
enable  a 
higher 
quality 
transmission path through **iacreased** forward 
 
and 
 
return 
 
link 
EIRPs. **This** signalling 
 
shall be 
in-band. 
6.1.4 
A packet-orieuted  structure  is used to **accommodate** the user **data** at  the *9.6* kbit/s **data-rate** with 
in-band  signalling. 
6.1.5 
I
n
 
order t
o
 
ensure at least a minimum level of interoperability, all TIF implementations 
m
u
s
t
 
support the 
2400/4800 
bids facsimile 
function 
(using CCITT V.21, V.27,), and 
the 
1200/2400 
bids d
a
t
a
 function (using CCITT **V . W .**  The implementation 
 
of **all** other d
m
 
t
y
p
e
s
 
and 
data rates is o p t i d .  

## 6.2 Tif P E R F O R M A N C E Reauimen&

6.2.1 
U
s
e
r
 
Data 
E m  
Rate Performance 
6.2.1.1 
The TIF **userdata** error protection/correction  algorithms 
are 
designed to ensure 
that the 
user data 
is sdequately 
 
protected 
 
against **the** informstion 
 
channel errors likely to be encountered 
 
in the 
Aeronautical  System  which are 
bursty in **nature** following t
h
e
 
Viterbi decoder. 
6.2.1.2 
The 
error protectidcorrection scheme  selected  for **2.4** and **4.8** kbit/s  facsimile ensures 
t
h
a
t
 the 
picture  quality is high 
a
t
 the **nominal** voice-mode  operating BER. 
6.2.1.3 
Error protection/correction schemes  for higher user 
data rates **are** P D ] .  
6.2.1.4 
T
h
e
 
effect  of the 
coding **schemes** adopted for **2.4** kbit/s V.27JV.22, data 
and 
4.8 kbit/s V.27, 
data 
is such as 
t
o
 
produce the 
following  average 
Line 
Errors Per  Page  (LEPPs) 
andlor information 
rate BERS a
t
 the 
nominal Aeronautical  System c
b
l
 
BER of 1.OE-3. 

| "               | R   | a      | t   | e   |     |
|-----------------|-----|--------|-----|-----|-----|
| Coding          |     |        |     |     |     |
| M               | e   | t      | h   | o   | d   |
| LEP&            |     |        |     |     |     |
| Information     |     |        |     |     |     |
| Rate            |     |        |     |     |     |
| BER             |     |        |     |     |     |
| 2 4             |     |        |     |     |     |
| Lbitls-         |     |        |     |     |     |
| Majority-Voting |     |        |     |     |     |
| 1.52            |     | 0.7E-4 |     |     |     |
| 4.8             |     |        |     |     |     |
| kbit/s          |     |        |     |     |     |
| Cyclic          |     | Code   |     |     |     |
| 1.53            |     |        |     |     |     |
| 4.4E-4          |     |        |     |     |     |

## Attachment 3X (Cont'D) 63.2 Facsimile Picture Data

6.2.2.1 
T h  
TIF operates 
with the 
spme 
quality  channel 
as 
the **normal** voice  channel for the  picture  element 
dah **nte** of 2.414.8 kbitk **and** provides highquality facsimile 
 
transmissions at the 
 
voice-mode 
C-chmoel BER of3.OE-3 or better, 
 
consistent 
 
with 
 
the 
 
SDM 
 
specification 
 
for 
 
the 
normal link 
operating BER. 
6.2.2.2 
A highquality focsimile is **assumed** to be  one  in  which 
standard graphics or text **test** charts,  e.g. 
the CCITT T
e
s
t
 Chart No. 2, e
t
c
.
,
 
show no 
visible,  subjective  evidence  of  any  errored  lines  in 
any 
single sheet and **are** delivered  with no satellite  network-related  transmission-related 
error reports 
from  the **airborne** or ground-based  facsimile  terminal  equipment. 

## 6.2.3 Voicemode Integrity

As t h e TIF is implemented 
 
entirely within the voice-ccdec 
 
function, t h e integrity 
 
of **the** voice function is preserved 
 
first and foremost 
 
and ensures t h a t transitions 
 
from voicetodata and vice-versa **are** functionally 
 
separable 
 
and are handled 
 
in a reliable 
 
fashion. 

 
Switching between voice and data m o d e s
, or **just** to the 
 
data 
 
mode, is **performed** automatically by 
 
the 
 
function as described in detail  in section 8. 

The  default  mode  of  the T
I
F
 
decoder  is  to  process  voice frames; a voice-tedata transition  by  the function's  decoder is only **permitted** when the start of a data frame has been detected  with a high degree  of  confidence. 

6.2.3.1 
The 
decoder  decision  logic 
can deal  with  severely  corrupted  voice or data frames 
by the 
number 
of  parity errors detected  in  an 8 bit parity check  word,  the  number 
of bits successfully  matched  in 
a 31  bit  signalling  control  codeword  and  consideration  of 
past decoded 
frames in 
 
each 
 
24-byte, 
20 **ms,** frame. Further  details *are* given 
 
in 
 
Section 
 
8.2.4. 
6.2.3.2 
T
e
s
t
s
 
using *5,600* data-mode frames have shown 
t
h
a
t
 
the TIF decoder's  in-band control  signalling 
scheme always 
 
remains 
 
in 
 
data m
o
d
e
,
 never  switching  incorrectly to voice  mode,  at  an  average 
channel BER  of 6.4E-3. The 
decision  logic  only 
begins to 
exhibit  false  switches  between  data  and 
voice mode a
t
 a BER  of 0.952. 
6.2.3.3 
The TIF processes a
l
l
 '
u
m
e
c
o
g
n
i
s
e
d
'
 speech-band **data** signals as speech. 

## 6.2.4 Aes Demodulator Reamble-Les Reacquisition

6.2.4.1 
Because 
the 
circuit-mode  data  signals  may 
be continuous, 
for  example  facsimile  data  during 
Phase 
C, **burst-mode** carrier-activation based on an 
 
'active' *state* signalled 
 
by a voice  detected/present 
signal  from 
the 
voice 
codec, 
may **not** take  place  in  the  forward  direction  during 
a **data** transmission 
once 
it **has** c
o
m
m
e
n
c
e
d
.
 
The transmission of **forward** link burst preambles will therefore **not** recur once facsimile  picture data **has** commenced until **the** phase **has** completed. **Short** interruptions to **the** forward 
 
signal longer than a few tens of milli-, caused by deep fading for  instance,  will **not** be followed by the commeacanent  of a **new** burst with a preamble a t
 **some** point when voice-activation  takes plwx t o
 
eaable the 
&modulator to reacquire  synchronization. 

6.2.4.2 
lt i
r
 **therefore** a requirement *that* **the** AES demodulator 
 
shall 
 
be 
 
capable 
 
of 
 
preamble-less 
maapiaition **following** a break in signal. 

## 7 Funci'Ional Reouirement{

Airborne and ground-based calls  supported by the Inmarsat Aeronautical  System can be enhaacsd using the Termiaal  Interface  Function  (TIF) t o include  analogue-interconnect  1988  (Blue Book) 
CCITT  Recommendations T.4 and T.30 Group3 facsimile  and V 
series  voice-band  data  services in manual, automatic, private  circuit or PSTN m o d e s
.

 Such  circuit-mode data calls *can* be msde through  analogue  2/4-wire or digital  telephone  circuits  (e.g. PCM encoded 
64 kbit/s) which are carried 
 
by a pair of 21 kbit/s Cchannels scross **the** satellite 
 
subnetwork 
 
in the Inmarsat Aer~nautid System. 

The 
   T
    I
     F
      
      will support the following  functions; this 
                                      l
                                      i
                                      s
                                       t
                                        is not necesmily complete, other modem 
~muydsobesupportedbytheTIFifrequired. 

T b  
   use 
      of square brackets i
                      n
                       d
                        i
                        c
                         a
                          t
                           e
                           s
                             
                             that 
                                the requirements contained in this 
                                                           Section of  Module 5 
are 
  not supported by tested solutions. 

## 7.1 M I &

Group3 facsimile, **supporting** a n a l o g u e - i n t e r t  **1988** (Blue  Ebok) 
CCITI' Recommendations T.4 and T.30 only,  with the following combhatkg of **data** rates **and** V series **modem** t y p e s
:
 

7.1.1 
300 bit/s **300** b
a
u
d
 halfduplex operation 
 
for 
 
binary-coded 
 
signalling 
sequences using CCI'IT 
Recommendation **V.21** channel 
2. 
7.1.2 
2.4/4.8 kbit/s **1200/1600** baud halfduplex operation  using **CCITI'** Recommendation V.27,. 
7.1.3 
[7.2/9.6 kbit/s **2400** baud 
halfduplex operation  using 
CCI'IT Recommendatioa V.291. 

## 7.2 Voice-Band D A &

The following **CCIlT** V series  voice-band data modems: 

7.2.1 
1300 bit/s **300** baud  duplex  operation  using **CCI'IT** Recommendation V.211. 
7.2.2 
[600 bitMl.2 kbit/s *600* baud  duplex  operation  using **CCITI'** Recommendation V.221. 
7.2.3 
1.212.4 kbit/s *600* baud  duplex  operation  using **CCI'IT** Recommendation V.2L. 
7.2.4 
[2.4 kbit/s 1200 M 
duplex  operation 
using **CCllT** Recommendation V.%]. 
7.2.5 
[4.8/7.2/9.6 kbit/s **2400** baud 
duplex  operation  using 
CCI'IT Recommendation V.321. 

## 7.3 Tif Trarr~Pavencv

7.3.1 
The 
TIF shall be totally  trpnsparent 
to 
the resolution, **1-D** picture  element 
coding and options such 
a
s
 **2-D** picture 
 
element 
coding, error c
o
r
r
e
c
t
i
o
n
 and limiting **Illodes** &scribed 
 
in 
CCI'IT 
R e c o m o n  
T.4. The 
TIF 
shall **not** interpret or *modify* t
h
e
 
content or format of any of the 
data, codewords 
or message  formats USBd by  any of these 
standard or *optional* facilities. 
7.3.2 
The 
TIF shall be semi-transparent to 
t
h
e
 
binary *coded* **control** signalling  employed  in 
the 
above 
C
C
I
'
I
T
-
r
e
c
o
m
m
e
n
d
e
d
 
services and 
transmission s
&
n
d
a
t
d
s
.
 
However, **all** pre-message,  in-message a n d post-message commaad and response signals d u d l
 
be conveyed through the TIF without  modification of their contents. **(It** is posible that t h e
 
T
I
F
 
m y  
optionally *insped* the **NSF** frpme and *modify* its contents to disable m
-
s t d a r d transmission m o d e s
, a s further described  in section 7.4.) 

7.3.3 
Similruly, the TIF ilhall **not** in 
 
any 
 
way d
f
y
 or disable **the** fail-back of circuit-mode data 
from 1 
higher-sped 
to 
a  lower  one  if 
t
h
e
 
transmission path is not of an 
adequate quality 
~,agporttbeformer.TbetrPnsparentnatureoftheTIFnaturPllysupportsthefrrll-backf~. 

## 7.4 Facilitiq

7.4.1 
Tbe 
T
I
F
 '
w
t
p
p
o
r
t
s
 neither trpnsmissions **from** Group **112** facsimile 
 
equipment nor Binary code 
Prowdud Si@ 
that *are* transmitted a
t
 the *optional* **2.4** kbit/s r
a
t
e
.
 
7.4.2 
The 
design of the 
T
I
F
 does 
not guarantee t
h
a
t
 transmissions to or from any **Grwp3** facsimile 
equipment  which uses non-standard **and/or** proprietary  procedural  protocols d o r  
transmission 
Illodes w
i
l
l
 be 
supported dher 
than the **1988** (Blue Book) **CCI'IT** Recommexldatioas T.41T.30. 
[ S o m e  facsimile  equipment is capable  of  operating  in  non-standard,  proprietary d e s
,
 
often when two rrmchines of the *same* model 
 
number 
 
and type produced 
 
by t h e
 **same** manufacturer are c u m e c t e d
.

 These procedures **are** usually  bypassed  when  dissimilar  machines, or machines from diffetent manufacturers, 
 
interwork.] 

7.4.3 
It i
s
 highly 
 
desirable that the 
 
airborne 
 
facsimile 
 
machine 
 
shall 
be capable 
 
of 
 
being 
 
commanded, 
either by a manual or stored  input, to ignore  non-standard  facilities  when  connected 
to the 
TIFU. 
Many,  but not all, facsimile  machines  have  the  capability to disable  these  non-standard  facilities 
by  keypad  entries  which  modify  the  internal **memory** in  the  machine  and  hence its configuration. 
Such  a  setting  of  the  airborne  machine  automatically  cancels  non-standard 
modes of  operation  in 
b
o
t
h
 the  air-to-ground 
and ground-to-air  directions. 
7.4.4 
The 
 
TIF may incorporate 
 
a 
 
non-transparent 
 
facility 
to inspect and 
 
decode 
the FIF 
 
(Facsimile 
Information  Field) to determine  whether  the  non-standard  capabilities  field is transmitted  by the 
called F
T
E
.
 If so, 
the 
TIF may  modify  the  NSF  (Non-Standard  Facilities)  frame so 
as to  disable 
the  capabilities. The 
methods of  modifying  the  NSF frame **are** P D ] .  

## 7.5 Functional Blocks

The TIFU is comprised  of  the  following  functional  blocks: 
The numbers  preceding  each  function  indicate that the  particular  function  is: 

1) 
required 
 
for 
 
facsimile 
 
functions 
Q
I
&
;
 
and/or 
2) 
required 
 
for 
 
voice-band 
 
data 
 
functions 
o
&
;
 
and/or 
3) 
required 
 
for 
 
speech 
 
functions u. 

1.2,3 
- **2/4-wire** analogue/[CEFT El B-channel  digital] **I/O** interface. 
1,2,3 
- 110 buffering. 
192 
- Threshold  detection. 
192 
- Data  modem preamble/carrier/trabhg sequence  detection. 
1.2 
- FTE/DTE-side  speech/data  switching. 
192 
- Line-side speechldata signalling decoding. 
192 
- Error protection  for  user d
a
!
a
 and speech/data **mode** signalling. 
192 
- Error detection and 
correction 
for  user **data** and  signalling 
decoder. 
3 
- Inmarsat 
Aeronautical **System** MELK speech 
 
encoder 
 
and 
 
decoder. 
1 
- WITT Recommendation **V.21** (halfduplex, channel 2) FSK 
 
voice-hand 
demodulator and 
remodulator. 
1 
- CCITI' 
 
Recommendation **V.27,** @mlfduplex] 
 
demodulator 
 
and 
 
remodulator. 
2 
- CCITT Recomnmdation **V.22,** [duplex] 
 
demodulator 
 
and 
 
remodulator. 
1 
- [CCITT 
 
Recommendation 
V.29 [halfduplex] voice-band **data** demodulator 
 
and 
d u l a t o r ]  
. 
192 
- PlesiochroMxls  buffering. 
192 
- *[AESIGFS* control  signalling]. 
1,2,3 
- 
line interfxing. 
1,2,3 
- Decoder line interfacing. 

## 8.

OPERATION 
TL 
circuit-mode **data** functionality *can* be  either  integrated  with  the  speech d e c or implemented k m i n d e p a k t  platform. 

m integrrrted d e s i g n
:
 
The opration of the TIF when  processing  circuit-mode  data  signals  shall be as follows and assumes 

8.1 

## Circuit-Mode Data Call Control

No  C-channel  sub-band  signal u n i t s
 **are** generated or required  for  the  operation  of the TIF  other than those  utilised  in normal circuit-de telephony  calls. 

## 8.1.1 Call **Set-Up** Rocedure

NOTE: The information  in  Attachment 
3X is equivalent to Annex 1 in the INMARSAT  SDM  MODULE SNER 3.0 

8.1.1.1 
The *call* **set-up** s
e
q
m
c
e
 for a circuit-mode data *call* shall be identical to a standard  telephone  call 
a
d
-
 s
e
q
u
e
a
m
,
 as **defined** in 
 
Sections 6
.
5
 
and 6
.
6
 of Module 1 of the Inmarsat 
Aeronautical 
System **SDM** for all  forms  of  analogue-interconnect  circuit mode **data** services 
 
provided 
 
by 
 
the 
TIF. 
8.1.1.2 
The 
same AES and **GES** power  control  tables 
and 
algorithms  shall 
also be 
used for user data 
rates 
of 4
.
8
 
kbit/s **and** less, as those 
used for *the* telephony 
 
service. 
The 
TIF **mor** protection and 
correction algorithms  have 
been 
designed to *ensure* t
h
a
t
 the **data** is  adequately  protected  against  the 
Aeronautical  System  channel  error  characteristics. 
8.1.1.3 
There  is no 
requirement to identify,  either to the 
GES or the AES, 
whether *the* TIF  is  present or 
not within t
h
e
 
speech codecs 
for **user** data  rates  of 4
.
8
 
kbit/s or less. 
8.1.1.4 
No 
signalling  shall  be required between the TIF and the 
GES control  processor to implement a 
higher  quality  channel a
t
 user data-rates of 4
.
8
 
kbit/s or less. 
8.1.1.5 
If  the TIF supports  higher 
user data  rates  for  facsimile  and  voice-band  data  modems,  e.g. 7
.
2
 
or 
9
.
6
 
kbit/s V.29 
facsimile **data** modems, a higherquality c h e l  
with a BER 
of 1.OE-5 
shall be 
established, 
 
either at 
 
the **onset** of transmission or at **some** stage 
 
during 
 
the 
 
initial 
 
procedural 
facsimile  call  set-up  before  the  training  sequence  (in both facsimile **and** voice-band **data** modem 
cases). This 
is because the  facsimile  training  check  sequence,  TCF, and 
all  facsimile  in-message 
signals are 
transmitted  at  the 
data-me of  the  high-speed  message  channel. 
This is discussed 
further 
in 
section 1
0
.
 

## 8.1.2 Circuit-Mode Data Activation And Deactivation Procedures

8.1.2.1 
All circuit-mode **data** activation  and  deactivation  procedures  relating 
to circuit-mode 
data operation 
shall be 
 
automatically 
 
performed 
 
within t
h
e
 T
I
F
 using only the primpry band of t
h
e
 assigned 
C-channels. This 
shall apply to all implementation  levels 
of the TIF and 
for all user **data** rates up 
to  and  including 
9
.
6
 
kbit/s and  is a **fundamental TIF** design  principle. 
8.1.2.2 
No 
subband C-chanoel 
 
signal *units* shall 
 
be 
 
generated or required 
 
to indicate TIF data-mode 
operation *other* t
h
a
n
 
those  utilised  in n o d  
circuit-mode  telephony calls. 
8.1.2.3 
All  high-speed d
a
t
a
,
 
i.e. **non-FSK,** TIF modem types shall be m
g
n
i
s
e
d
 by performing a spectral 
analysis of a portion of the 
traininglretraiaing 
sequences 
employed  either  during 
the 
i
n
i
t
i
a
l
 stages 
of interworking o
r
 following 
 
loss 
 
of 
e
q
u
a
l
i
z
a
t
i
o
n
.
 This s
p
e
c
t
r
a
l
 analysis 
 
will 
 
identify 
the 
characteristics of the  signal  in  terms  of 
carrier frequency  and 
baud 
rate to identify  the  modulation 
t
y
p
e
.
 Alternative methods other than 
spectral analysis 
 
may be used to identify t
h
e
 
d
m
 
type, 
and hence **modulation** in use, if 
 
the TIF encoder/&mder delays, 
 
signal o
n
&
 
and termination 
timings  given  in  Section 
11 
are 
not exceeded. 
8.1.2.4 
S 
' 
'
o
1
1
 
stages of a transmission. The 
modulation 
 
detection 
 
pn>cess 
relies **upon** a spectral 
certain V 
s e r i e s
 
voice-band data d m
 
signals,  e.g. V
.

2
&
, require additional in-band  signalling to transfer  information between interworking AES 
and **GES** TIFS. **This** is y because only theTIFconnectedtothecalledDTEmaybeabletodetectthemod~ontypeusedin~ 
dwh signal which 
 
requires a **portion** of 
 
unscrambled 
 
repetitive data to produce the rrquirsd infodon about baud-rate 
 
and 
 
carrier 
 
frequency. 

For example,  in  the **V.22,** calling vvkm case the hnndshpking  signals *start* with  scrambled 1
'
s a t
 1
.

2
 a d  
2
.

4
 
kbit/s, which  yields 
.orpectnl~~ontoenabletheTIFtodeterminebaudratePndcarrierfrequeacywhichcould d m t i f y t h e d m t y p e .  
However, the called V
.

&
 
modem  transmits  unscrambled  binary O's and 1
'
s a t
 1
.

2
 
kbit/s and is 
&fore readily identified  by spectral analysis. 

This information 
 
therefore 
 
be communicated by 
 
additional 
 
in-band 
 
signalling to the remote TIF mmected to the  calling  modem to enable  it t o select t h e
 
appropriate user data rate and hence V.22N.22, modulation  processing modes (
s e e
 
Sub-section 8
.

2
.

3
.

3
)
.

 
--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## Attachment 3X (Cont'A 8.13 Callterminationrocedures 8.2

Ueer-initiated *call* termination 
 
may 
 
occur at any 
 
time 
 
during 
 
a 
 
circuit-mode 
 
data 
 
call 
 
using 
 
the procedures defined in Sections *6.5.5* and **6.6.4** of  Module 1 of  the Inmarsat Aeronautical  System SDM. 

l
2
!

B
x
!

h
 

## 8.2.1 Input Sampling **And** Echo Control

8.2.1.1 
Referring to the  simplified 
T
I
F
 
encoder  functional  block  diagram  shown  in 
Figure 11 and  the  flow 
chart  in  Figure 
13, the  incoming  signals, 
assumed to be analogue, are 
first  converted 
to 
8 bit  PCM 
p-law  samples  every 125ps in 
an 
A-D circuit  using  an 
8 **kHz** clock. **[If** the  incoming  signals are 
from  a  CEPT El Bchannel source, 
then  the  signals  will be 
8 bit PCM  A-law.] 
Note: Figure 13 only  shows  switches  for  the **2.4** kbit/s **V.27,** version  of  the TIF, 

8.2.1.2 
The 8 bit p-law 
 
binary samples *are* then 
 
converted to linear 32 bit floating-point 
 
samples 
 
and 
formed into two 20 m
s
 long  input  buffers  each  holding 
160 values;  the  current  and  previous  input 
buffers.  (The  input  signal  is,  however,  first  divided  into  overlapping  segments 
32 ms long,  each 
containing 2
5
6
 samples 
 
identical to the 
 
process 
 
in 
 
the 
 
speech 
codex (
s
e
e
 Section **3.1.1).** The 
windowing to 
reduce  leakage  by  a  Hamming  window 
is not  however  performed  for  data  signals.) 
8.2.1.3 
The relatimhip h
e
e
n
 the 
various frames in the 
TIF, number  of  samples,  number  of  overlapped 
samples, e
t
c
.
,
 
shall be identical to that 
used i
n
 the 
speech codee (
s
e
e
 
Section 3.1.1, e
t
c
.
)
.
 
8.2.1.4 
The circuit-mode 
 
data 
 
modem 
 
call 
 
establishment 
 
procedure 
tones, CED 
 
and 
 
CNG, 
 
shall p 
through t
h
e
 
speech *codec* traasparently  in  speech m
o
d
e
.
 No 
action shall be 
taken or i
s
 r
e
q
d
 
bytheTIFencoktodetectorinterpretthesetones. 
8.2.1.5 
Echoes  will be generated in a  circuit-mode **data** call **across** the Inmarsat 
Aeronautical  System  in 
both  directions  from 
2/4-wire tenninatious 
in the 
aircraft  and 
in the terrestrial **network.** (There w
i
l
l
 
be no local  echo at most GESs as these **are** generally  4-wire PC"CQ~ected 
to  their  respective 
international  exchanges/PSTNs.) 
In an **analogue** interconnect  version of the TIF, good  quality  audio  hybrids  shall be used between the  airborne FTE/DTE and the TIF to **maintain** a  high  degree  of  isolation between TIF  modulator output **and** demodulator 
 
input. 

 
A 
 
minimum 
 
hybrid 
 
leakage 
 
figure of better than 20 dB is recommended. 

8.2.1.6 
Careful setting 
 
of 
 
the TIF output 
 
power 
 
and T
I
F
 threshold 
 
value (
s
e
e
 
Section 8.2.2.2) is also 
necessary to maximise the 
signal-toecho 
ratio at the  input to the  TIF  demodulator. 
8.2.1.7 
A  minimum signal-becho ratio of around 25 dB 
is considered to be adequate for  the T
I
F
 
software to be unaffected  by  delayed or local  echo. 

E 
the case of a fullduplex &m type which use the **same** handwidth 
 
for b o t h transmission d i r e d o a s
, e.g. V.=, echo cancellation w i l l be required to provide the **necessary** minimum igaal-trrer.ho ratio of around 20 dB. This in turn w i l l require the demodulator to have ~ccess to rb mDdulatOr output  waveform, i.e. there shall be a  direct mection between the  TIF  encoder rd d s c o d e r
.

 
This is an implementation  issue t h a t
 
can be tesolved  if  a  single  DSP,  e.g. 

a DSP32C, paEoraos both f u n c t i o n s
 
and  therefore  provides  the *necessary* internal communication path.] 

## 8.2.2 Fsk Bcs Processing I N The Tif Encoder For Facsimile Signalling

8.2.2.1 
The T
I
F
 shall  receive **and** demodulate all **V.21** FSK 
 
BCS **signals** defined  in  CCI'IT T
.
3
0
 
which 
appear on 
t
h
e
 incoming 
 
voice-hand 
 
circuit. The signals shall be remodulated a
t
 the  distant T
I
F
 
onto 
the 
outgoing  voicehand  circuit. 
Both  demodulation  and  remodulation  processes 
shal conform 
to the halfduplex, chamel 2 definition  in  CCI'IT  Recommendation 
V.21. 
--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

8.2.2.2 
A thteshold  level **detector** shall be used to calculate the 
level  of the 
signal in each  buffer. 
If t b e
 
input power  level is **less** than 
-43  dBm, t h e
 
windowed s a m p l e s  
shall always be processed  by the **voice** d g
 
algorithm as all  signals  below **this** level shall be **assumed** to be due to local, dekyed echo or n o i s e
.

 
Higher  level  signals  shall be **passed** to a voice/data  switch  algorithm to determine  the characteristics of t h e
 
signals  and  shall then be  routed to the voice ender/data demodulators as appropriate. 

8.2.2.3 
All  voice frames shall be examined  for  the  commencement  of  FSK-modulated  BCS  signals,  using 
an unsynchronised 
FSK  demodulation  technique,  typically  by using a **pair** of "optimum digital 
filters 
 
representing 
the "O" **and** " 
1" 
 
frequencies 
and measuring t
h
e
 energy 
 
in 
 
each. 
 
FSK 
demodulation  shall 
be unsynchronised 
a
t
 this 
stage to provide  rapid  FSK 
data "recognition"  times. 
8.2.2.4 
The 
TIF shall search *the* inwt **data** for 
 
the 
 
of 
an 8 bit 
 
HDLC 
 
flan 
 
secluence. 
 
which 
indicates t
h
e
 
start of M 
FSK  facsimile  BCS **dah** frame. This is a non-trarrspakt katuré of 
the 
T
I
F
 
design. 
The provisionallydedulated FSK 
 
data is then tested 
 
for t h e occurrence of the 
 
sequence OX1 11  1 
1XO*, the  HDLC  flag  sequence  contained in the  preeamble portion of all T.30 binary cuded signal  (BCS)  facsimile  control  sequences  and  the  power  contained in the "1's" and **"O's"** detected in each frame. (* 
X **represents** "don't *care"* bit.) 

8.2.2.5 
The CCITT  T.30  recommendation  specifies that the 
 
BCS frame commences with  approximately 
one **second's** worth of  HDLC  flags  (typically  38). The TIF shall acquire  the start of an 
FSK  BCS 
frame 
within two 
flags,  i.e.  within a time perid of  less than 
54 ms. 
8.2.2.6 
Thefirstfullflagdetectedinthisprocessmaybedi~bytheTIF,shorteningthefrPmeby 
8 bits. 
 
If 
the first flag 
 
is 
 
discarded, 
 
the 
f
i
n
a
l
 delay betweea the 
 
incoming 
 
and t
h
e
 outgoing, 
remodulated  BCS sequeuces 
at the TIF **decoder** shall not be altered. 
8.2.2.7 
Once  an  FSK  HDLC  flag  byte has 
been detected  by  the unsynchronised 
demodulator, the 
rest of 
the BCS control sequence bits  shall 
be detected  by a "full" synchronised 
FSK **detector** from  which 
t
h
e
 
demodulated  bits are 
e n d e d  
and  transmitted. All the  bits shall be remodulated and 
outputed 
by the 
TIF **decoder** with t
h
e
 
possible  exception  of  the  first  HDLC  flag  byte. 
8.2.2.8 
Normally  there may be 6 FSK  data bits detected **per** 20 ms block  of  input  samples or subframe. 
Timing 
 
differences **between** the FTE/DTE **and** the TIF encoder may occasionally *cause* **this** to 
become 5 or 7 **data** bits. 
8.2.2.9 
Two  buffer **control** bits  shall  therefore be **allocated** to each set of *5 , 6*  or 7 
data bits in the final 
output buffer to i
n
d
i
c
a
t
e
 
to t
h
e
 TIF decoder  whether  there  is an 
underflow,  overflow or correct 
number of bits in each  24-byte  output f
r
a
m
e
.
 
8.2.2.10 
8.2.2.11 
A majority  voting 
error protection 
and correction scheme shall be implemented on 
t
h
e
 
userdata 
in 
the 
TIF up to 
2.4  kbit/s. majority voting **has** been chosen 
for all user data 
rotes 
from 300 bids 
to 
2.4  kbit/s 
because of t
h
e
 
small  memory  and  computational 
oveheads involved  and  the  adequate 
leVd 
of **error** protection  provided 
by  such a scheme.] 
Tb 
T
I
F
 
output buffer,  which is 24-bytes  long  in  total, shall therefore  accommodate  17  copies  of 
S, 6 œ 7 FSK **data** bits, **together** with  17  copies  of the 
two 
plesiochronous  buffer  control  bits, 
a 
31 
bit **signding** control *code* **and** 8 parity  bits. 
8.2.2.12 
ForthefRmeinwhichtheBCSflagsequemeisdetectedandiftheTIFhadbeeninthevoice 
mode prior to the 
detection of data, the 
V.2131 bit  FSK-start,  i.e. 
"VDS" 
(Voice-@Data  Switch), 
signalling 
c o n t r o l  
code 
shall be 
inserted in the 
appropriate  locations 
in the  24-byte  output  buffer. 
[See Table  21  for the allocation  of  the  V.21 31  bit  signalling  control codes and Table  24  for  its location.] 

## Attachment 3X Kont'D)

8.2.23 
If the 
T
I
F
 had already been in  the  V.21  FSK  data  mode  prior  to  the  detection  of  FSK,  the 
V.21 
31 bit "DATA"  signalling  control  code  shall 
be placed  in  the  appropriate  locations in the  24-byte 
output  buffer. 
[See Table 21 for-the allocation  of  the  V.21  31  bit  signalling  control  codes  and  Table  24 
for its location.] FSK  demodulation  continues  until  an  energy  detector  indicates  that  FSK-modulated  data  has  ceased. 

8.2.2.14 
The  energy  detector  shall 
measure 
the  energy  of  each  symbol,  and 
shall signal  the  end  of  FSK  data 
when **this** values  falls  to 10% 
of the  previously  established  AGC-value.  The  FSK  turn-OFF  time 
shallbelessthan4ms. 
The  TIF  shall  then  return  to  processing  input  data as if it could be either  voice, FSK or high-speed data. 

8.2.2.15 
If  a  partially-tilled 
buffer 
is encountered,  the  last  FSK  data  bit 
is located  in  the  buffer  and  a  single 
" 
1 
" shall be placed  at  the  end  of  the  FSK  data  bits  to  indicate  to  the  decoder  the  position 
of the  last 
data  bit.  The  remaining  bits  in  the  output buffer, if any,  shall be filled  with "O's." 
This additional 1 bit must be added  to  unambiguously  indicate  the  last  bit  of  the  FSK  data. 

This shall 
 
necessitate 
 
the 
 
transmission 
 
of 
 
a 
 
further frame if the final data bit occupies 
 
the 
 
final 
 
bit position in the frame. 

The V.21 31 bit "END"  control  signal  shall be placed  in  the  appropriate  locations  in  the  24-byte output 
 
buffer 
 
of 
 
the final FSK 
 
data 
 
frame. 

This cale word 
 
indicates 
 
that 
 
the 
 
frame is the last f r a m e
 
of data, and may be only partially filled by FSK data. 

[
S
e e Table  21  for  the  allocation  of  the  V.21 31 bit  signalling  control  codes  and Table 24 for its location.] 

8.2.2.16 
After  the  data 
has been placed in the  24-byte  output  buffer, 
it is available  to 
be output at 9.6 kbit/s 
and 
 
multiplexed 
 
with 
 
the 
 
sub-band 
 
signalling 
 
data 
 
and 
 
framing 
 
bits 
 
to 
 
the 
 
final 
 
channel 
 
rate 
of 
21 kbitls and  prior 
to channel error control  coding,  interleaving  and  modulation.  Note  that  the  data 
is implicitly  interleaved in the  output  buffer **because** of  the  replication of 17 sets of  the  data in 
multiples  of 5, 6 or 7 bits. 
8.2.2.17 
It is essential  to carefully terminate the end of **each** remodulated  FSK **BCS** frame output  by  the 
decoder 
 
with 
a minimum 
 
of 
one complete 
 
flag 
 
byte 
as required by CCITT 
Recommendation T
.
3
0
 
to *ensure* **correct** processing  of  the  CRC  information. 
8.2.2.18 
Differential  delay  of  approximately 
9Oms at  the  output  of  the 
TIF redulator may be encountered 
following **the** transmission 
 
of 
 
the 
 
DCS 
 
sequence 
 
and 
 
when 
 
a 
 
V.29 
 
TCF 
 
sequence 
is processed 
through the voice &. 
[This **depends** on whether t h e
 
calling  and  called  facsimile machines are both  initially  operating  with V.29 modulation. The TCF sequences in **this** *case* will be u n r e c o p i d by the TIF, unlike V.27, mdulation, **and** hence will be processed by the  voice codec]. 

To acmmwhk this differential  delay,  a 
[100]ms  delay **shall** be implemented  at  the  end  of  each FSK sc~uence fully demodulated 
 
by 
 
the TIF t o
 *ensure* t h a t the **two** sequences 
 
will 
 
always be sufficiently in time to guarantee  a response h m  
the  called  machine unless a  valid V.27, TCF sequence is **received** and m g n i d in which case the  delay  shall **not** be required. 

NOTE: **Section** 8.2.2.18 
 
added 
 
by 
 
Corrigenda 
 
Version 
1.0 to 
 
INMARSAT **SDM** MODULE 
SNER 3
.

0
 
bcorporating CN641 

8.2.3 
HighSpeed Data *processing* in the 
T
I
F
 
Ertcoder 

## Attachment 3 X Icont'D) 8 . 2 . 3 . 1

Tbt TIF shall receive  and demdulate **all** high-speed  facsimile  message and data signals  modulated a t
 *[ S o o*  bit/s]', 1.2, 2.4, 4.8, 
 
[7.2 and 
 
9.63' 
kbit/s as appropriate 
 
and as **defined** in 
 
CCITT 
Recommendations [V.22]',  V.2&,  V.27, 
[and **V.291'** which appear on t h e
 
incoming voiceband circuit. Each 
 
transmission is preceded 
 
by a mcdem syncbronising sequence as specified 
 
in the CCITT Reconmda&ion appropriate to the  modulation  system u s e d
.

 
Within t h e complex 
 
demodulation 
 
processes 
 
carried 
 
out in t h e TIF encoder, 
 
carrier 
 
phase and symbol  timing  is  derived  and  applied  to  the  detection,  filtering  and  adaptive  equalization  processes, which  shall  be  symbol-synchronised.  The TIF encoder shall perform  these  processes  in  accordance with t h e relevant  CCITT V Series  Recommendations. 

The high-@ 
 
facsimile and **data** signals shall be remodulated by the distant TIF decoder 
 
and atput onto the voice-band  circuit  using t h e
 
modulation system  defined  in  the  appropriate C C m  
ReCOmmendation. 

A threshold  level  detector shall be u s e d
 
to determine  the  level  of  the  signal  in **each** input  buffer. 

If  the  input  power  level  is  less than 
-43 dBm the  windowed  samples shall always  be  processed by t h e voice  encoding  algorithm as all  signals  below **this** level shall be **assumed** to be due to local, delayed **echo** or noise. 

Higher  level  signals shall be passed to a voiceldata switch algorithm to determine  the  characteristics of the  signals  and  be  routed to the  appropriate  voice  encoder/data  demodulators. 

## 8 . 2 . 3 . 2 V . 2 7 , S I L I N G And Training

8
.
2
.
3
.
2
.
1
 
The detection of the 
HDLC **V.21** preamble  in the 
T
I
F
 
encoder shall m
u
s
e
 an  "FSK  block c
o
u
n
t
e
r
'
 
variable to be  initialised to l
o
O
O
.
 This 
counter is decremented for subsequent frames for which 
a V.27- *training* sequence detector  is  called and 
is used to protect  against  false  detection  of 
tones 
triggerrng the TIF data 
encoder. 
8
.
2
.
3
.
2
.
2
 
This detector  shall  be  called during **data** demodulation  and  therefore t
h
e
 "FSK  block  counter"  is 
not decremented 
 
for 
 
high 
speed **data** or FSK 
 
transmissions. 
 
After 
1oOO **nondata** frames, 
 
the 
counter  will  be 
O, which will **cause** the  decrementing to halt. 
8
.
2
.
3
.
2
.
3
 
Whilst the "FSK 
 
block 
 
counter" 
is greater t
h
a
n
 O, the TIF e n d e r  shall *test* frames for the 
2.414.8 kbit/s 
V.27,unmodulated **1800** Hz  synchronising  signal  carrier  segment  (Segment 
1) 
using 
p
t
r
a
l
 
analysis,  e.g.  using  Fourier  transform techniques. 
8
.
2
.
3
.
2
.
4
 
The detection  of V.27,1800 Hz 
carrier  in t
h
e
 
synchronising signal **shall** place t
h
e
 
T
I
F
 
&r 
into V.27, m
o
d
e
,
 and 
a V.27, "VDS" 
signalling  control 
code 
shall  be  transmitted  for 
that frame. 
[Tbe V.27, **training** sequeaxe detector may, typically, be called 50 times a d, establishing a 20 SeCoad window  within  which **the** 1
8
0
0
 Hz carrier may be  detected.] 

8
.
2
.
3
.
2
.
5
 
Having **detected** a portion  of tbe 
V.27, synchronising  signal 
uamodulated carrier segment  in the 
"
C
p
t
Z
C
a
t
.
 
u) 
m frame, the 
 
signal 
 
power 
 
within 
 
any 
 
previously 
 
input 
samples remaining in the 
p v h s  
frime buffer **shall** be  inspected to locate the 
actual **starting** point of the **1800** Hz carrier 
w
t
 
data. 
8
.
2
.
3
.
2
.
1
 
'
I
b
b
 l o a t h  
of t
h
e
 
start of the 
unmodulated carrier  segment 
of the 
synchronising  signal 
dudl then 
be 
iadicated 
by a transition  in the 
TIF encoder output data **from** continuous "O" to 
continuous "1" 
b
i
t
s
.
 
Subsequent frames have corresponding **2.4** kbit/s **V.27,** "DATA" 
 
signalling control codes and contiauous "1" 
bits shall be transmitted in 
 
the TIF *eElcoder* output **data** until the **V.27,** sileace segment,  Segmeat 2, is detected. 

' O
p
t
i
d
 TIF capabilities 
 
which q u i r e  further 
 
study 
 
and 
 
definition. 
NOTE: The information  in  Attachment 
3X 
is equivalent to Annex 1 ia the INMARSAT  SDM  MODULE SNER 3
--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## Attachment 3X Icont'A

The transition may be detected 
 
by 
 
power 
 
inspection 
 
and 
 
shall 
 
be 
 
indicated 
 
by 
 
a 
 
transition from mtinuous " 
1 ' 
to continuous "O" bits  in  the  TIF  encoder  output  data. 

8.2.3.3.7 
After this 
transition,  subsequent  frames  shall 
be tested for **2.4** and **4.8** kbit/s **V.27,** phase  reversal 
trrining signals, 
 
i.& 
 
Segment 3. 
It is recommended **that** spectral analysis techniques are again used. 

8.2.3.2.8 
When  detected, the 
start of the 
phase  reversals  shall  be  indicated  by  a  transition  from  continuous 
"O" to  continuous '1 ' 
bits  in  the  TIF **encoder** output  data. 
If  the  phase  reversals are subsequently  identified as corresponding to the **V.27,2.4** kbit/s fallback r a t e
,
 
2.4 kbits "DATA" 
signalling  control codes shall  be  added to **that** frame and all  subsequent ones, otherwise  the **V.27,4.8** kbit/s **"DATA'** signalling  control  code shall be u s e d
.

 
If  valid  phase  reversals are not  detected,  then the TIF encoder **shall** return to voice  mode, 

.
    I
          "
                 

8.2.3.2.9 
Within the 
encoder demodulator, 
 
when 
 
the 
 
phase 
 
reversal 
training sequence has been d
e
t
e
c
t
e
d
,
 
training 
 
of 
 
the **actual** TIF 
 
encoder **V.27,** demodulator 
 
shall 
 
commence. 
 
Whilst 
the 
continuous 
1 S are 
being  transmitted,  the  demodulated  data  bits  shall be examined  within  the TIF ender 
for  a  recognisable  pseudo-random  sequence,  Segment 
5, indicating  the  end 
of the  training 
segments 
and  the  beginning of **user** data. 
8.2.3.2.10 On detection  of **this** pseudo-random 
 
sequence, 
 
given 
 
in the **CCI"** Recommendation **V.27,** the 
data " 
1's" outputed 
 
from 
 
the 
 
TIF 
 
encoder 
 
shall be replaced 
 
by the appropriate 
 
pseudo-random 
seque-, 
followed  by  the  demodulated **user** data. 
8.2.3.2.11 If the 
quality  of 
the data  after **training** sequence  demodulation 
becomes 
unacceptably  low  for 
t
h
r
e
e
 
consecutive **frames,** the TIF encoder **shall** return to voice mode. 

## 8.2.3.3 V . 2 2 N . A Siling And Training

8.2.3.3.1 
The 2.1 kHz **V.22N.22,** answering d
m
 
call  establishment  proCsdure 
tones 
shall pass 
through 
the **speech** codee transparently in speech d. 
No 
action shall be taken or i
s
 **required** by the 
T
I
F
 
encoder t
o
 detect or interpret these 
tones. 
8.2.3.3.2 
TIF encoders supporting **V.22N.22,** shall 
 
continuously test input 
 
frames 
 
for 
 
the 
 
presence 
 
of 
 
a 
4-PSK unscrambled **"I'S"** signal  modulated onto a 2.4 kHz 
(highchamel) carrier. 
This signal is **transmitted** by a **V.22N.2&** answering **mcdem** and  may be detected  using  spectral estimation t e c h n i q u e s
.

 

8.2.3.3.3 
TIF **encoder** frames 
shall t
h
e
n
 
be t
e
s
t
e
d
 
for the  presence 
o
f
 
the 
f
i
r
s
t
 
calling  modem  sequence  which 
follows  shortly 
afterwards in  the  opposite 
dimtion of  transmission. 
In the *case* of a **V.22,** calling modem, this starts with a **short,** about 100 ms **long,** periodic  signal 
(Signal S
l
)
, consisting 
 
of 
 
unscrambled "001 
1' dibits, 
 
which 
 
may 
 
also be detected 
 
by spectral estitllation t e c h n i q u e s
.

 
V
.

2
2
 allinn **modem** sequences start with  a  scrambled **1's'** s e q u e n c e
, Sequence **S1,** which  in the of a recognisable **signature** in 
 
the 
 
frequency 
 
domain, 
 
may be m g n i s e d by 
 
energy lhdwlíi d e t e c t i o n
.

 
I?.ypically, to m g n i s e a frame by *energy* M o l d  
detection, the energy  of each incoming frame shall  be compared with  a  suitable  threshold  value  and  the  signal  shall be **deemed** to be  present  when the tdal energy of **two** successive frames exceeds this threshold. 

The threshold  level  may be established  by  measuring  the  encoder  input  noise  level a t a time  when sileuce is expected and  setting  the  threshold 
10 dB 
above this measuted value; **or,** when t h e
 
noise is found to be essentially **zero,** setting the threshold 10 dB above  the  idling  noise  level.] 

## Attachment 3 X Icont'Dl

8
.
2
.
3
.
3
.
4
 
Threshold **detection** shall  only 
be u
s
e
d
 
when  a V
.
2
2
l
V
.
2
2
,
 calling  sequence 
is expected, i.e. when 
m anwering signal is in 
 
progress, a
s
 the 
 
technique 
 
does 
 
not 
 
adequately 
 
discriminate 
between 
different s i g n a l  types 
and  the  threshold  detector  could 
be falsely  triggered  by  voice-modulated or 
o t k  
waveforms. 
8
.
2
.
3
.
3
.
5
 
When the TIF encoder has identified 
 
the 
 
first 
frame 
to be processed 
 
for 
 
either 
 
the 
 
calling 
or 
answering  direction,  the  signal  shall 
be inspected  to  locate  the  position  of  the first  symbol  within 
the f
r
a
m
e
.
 
The  location  of  the start of  the V.22N.22, calling or answering  segments  shall be indicated  by a  transition in the  data  transmitted to the  remote  decoder  from  continuous 
'O' bits  to  a  repeated 4 
bit **pattem** in  the  TIF  encoder  output  data. 

The  specific 
4 bit  pattern  transmitted  by  the  TIF  encoder  shall  uniquely  identify  to  the  remote  TIF 
decoder  the type of  segment  in  the  handshake  sequence  that has **been** identified  and  processed  in the TIF encoder. 

The  operating *speed* of the  remote TIF is **also** set by  these  in-band  quadbit  signalling  codes.  The in-band  codes  shall be as specified  in  the  following  table. 

Segment type 
4 
bit 
 
pattern 
Unscrambled  binary "1" a
t
 1
.
2
 
kbitls 
Scrambled  binary "1" a
t
 1
.
2
 
kbitls 
Scrambled binary "O" at 1
.
2
 
kbitls 
Scrambled  binary "1" at **2.4** kbitls 
Double  dibit "001 
1 
" at 1
.
2
 
kbit/s 
1111 
O
1
0
1
 
O
0
0
1
 
o111 
001 
1 

There are eight  possible  complete  trainjng sequences which **remain** distinguishable  when  repeated, each sequence consisting  of a combination of the abve types of  segment, as defined  in CCITT 
Recommendations V.22 
and V
.

2
&
.

 

8
.
2
.
3
.
3
.
6
 
The **TIF** encoder 
 
shall 
 
locate 
 
the **start** of user **data** by 
 
inspecting 
 
the 
 
demodulated 
 
bit 
 
pattern 
 
to 
detect a change **from** continuous  scrambled 
" 
1
'
s
"
 within  the  permitted  time  window  and 
at the  end 
of the  appropriate  segment. 
When 
 
the 
 
location 
 
of 
 
the start of 
 
the 
 
user 
 
data has been found, a 1
6
 
bit unique 
 
word, 
 
value 
"O1 
1010101  1100000" 
(69EOH), is placed in the output  bit  stream  immediately  before  the  first  data bit, replacing four of t h e
 
4 bit pattems originally  placed  there to indicate the appropriate  signalling segment. 

[Since the above 
 
unique 
 
word may **become** corrupted 
 
by 
 
transmission errors, a 
 
match **shall** be deemed t o have been found if a t least 1
3
 
of the 1
6
 
bits **are** found to match  the  unique  word bit pattern. *See* Sub-Section 8
.

2
.

5
.

2
5
.

1
 

8
.
2
.
3
.
3
.
7
 
If an 
wceptable **match** is not  found  for  the  unique  word  at its anticipated  location, or within two 
symbols t
h
e
r
e
a
f
t
e
r
,
 
then a transition  shall be forced  to  user  data  transmission. 
8
.
2
.
3
.
3
.
8
 
'Ilæ T
I
F
 
etlcodei 
shall unscramble  the  bit  stream  and  shall  transmit  the  unscrambled  data  with  the 
gpopiate 
error-protection coding (
s
e
e
 
Sub-Section 8
.
2
.
3
.
4
.
7
)
.
 
8
.
2
.
3
.
3
.
9
 
If 
the TIF *encoder* encounters more than 
64 
consecutive 
 
unscrambled **"I's"** during 
 
normal data 
demodulation,  then this is interpreted as the **start** of  a **V.22N.22,** test  sequence. 
The TIF *enCodet* shall then transmit the V
.

2
2
 test-start 
 
signalling 
 
control 
 
code, 
"VTS," with unscrambled **data** in this and  subsequent f r a m e s
,
 

8
.
2
.
3
.
3
.
1
0
 The T
I
F
 encoder  shall  detect  the  end  of  testing as 
a  break  in  transmission. 
The T
I
F
 encoder 
 
shall 
 
then 
 
transmit 
 
the 
 
V.22-test-end 
 
signalling 
 
control 
 
code, 
"VTE," and repeated "oo00" 
quadbits  shall "
m a r k
"
 
the  duration of  the  break. 

[See Table 21 for a description of these  signalling  control c o d e s
.

]
 

8
.
2
.
3
.
3
.
1
1
 Resumption  of  user-data  transmission  shall 
be signalled  by  a  transition  from  repeated "oo00" 
bits 
to **normal,** scrambled, 
 
data. 
8
.
2
.
3
.
3
.
1
2
 If  the  quality  of  user-data  demodulation **becomes** tm low  in  the  TIF  encoder for ten  consecutive 
Erames due to poor  incoming  signal  quality,  either  during  training or data  transmission,  the  TIF 
encoder  shall  revert  to  voice  mode. 
8
.
2
.
3
.
3
.
1
3
 A V.22, retraining  procedure  shall  be  implemented  to  enable  retraining  to 
be initiated at any time 
when  the 
d e m  
are 
transmitting  data 
and 
either  a  modem  retraining  procedure  is  initiated 
or the 
c h e l  
is momentarily  interrupted  at  either  calling or answering  end. 
The **onset** of  a  retraining  procedure  without  a  channel  break  shall be signalled  by  the **V.2&** inband 
 
signalling 
 
code "RETRAIN," 
to 
 
enable 
 
the 
 
modulator 
 
to be informed 
 
that it is to expect control  patterns,  rather t h a n
 
data, **and** respond  accordingly. 

If the  calling or answering  channels *are* interrupted  whilst the modem are transmitting **data** then they  will **begin** to  transmit  retraining  sequences,  but  the TIF 
will  return  to  voice  mode.  When this happens the T
I
F
 will 
 
detect 
 
a V.22, answering 
 
signal **and** the 
 
modems 
 
will 
 
subsequently be reconnected once the  channel has been reestablished. **This** may cause a  problem  with  the  TIF  not mgnising the  data  rate  of  the  transmission kcause the  calling  demodulator  may be turned on at an arbitrary 
 
point 
 
in 
 
the 
 
retraining 
 
sequence, 
 
missing 
 
the 
 
critical S1 segment. 

 
The TIFU 
implementation  shall  retain  information concerning the previous V.22, transmission so that it will know which type of **signal** to  look  for. 

A  10-second  countdown  time **shall** be implemented  which  increments on each  20ms **TIF** frame, counting  the **number** of frames since the  cessation  of the last  successful V.22, transmission. 

When V.22, signals are **again** detected 
 
by 
 
either 
 
answering or **calling** modeconnected TIF 
demodulator  the  counter can be inspected and  if it **has** not  expired  then it can be assumed  that  a warm **start,** ie the **stored** information  about  the data rate etc, can be implemented  and  the  modems reconnected. 

NOTE: 
 
Section 
 
8.2.3.3.13 
 
added 
 
by 
 
Corrigenda 
 
Version 
1.0 to INMARSAT 
 
SDM 
 
MODULE 
SNER **3.0** mrporating CN641 

## High-Speed Data 8 . 2 . 3 . 4

8
.
2
.
3
.
4
.
1
 
Once the  samples are confirmed to be 
part of a high-speed  data  sequence  in  the  'current'  20 ms 
E
r
a
m
e
,
 **any** samples remaining in t
h
e
 
previous frame 
input 
 
buffer **are** tested 
 
for 
 
the 
 
presence 
 
of 
high-speed d
a
t
a
.
 
8
.
2
.
3
.
4
.
2
 
If 
the previous and 
current frames are 
detected as high-speed  data  and  the  TIF  encoder  had 
been 
in voice **mode** prior to the  detection  of  high-speed  data,  the  appropriate 
31 
bit  high-speed  &ta 
'
V
D
S
'
 **signding** control  code  shall 
be added to the  24-byte  TIF  encoder  output  buffer. 
[
S
e
e
 Table 21 for the allocation  of  the  high-speed  data  "VDS" 
31 bit  signalling  control  codes  and 
Table **25-29** for their  location.] 
8
.
2
.
3
.
4
.
3
 
If  the TIF *encoder* had already been in data 
mode  prior to the detection  of  high-speed  data,  the 
appropriate  31  bit **high-speed** "DATA"  signalling  control  code  shall 
be added to the TIF 
encoder 
output  buffer. 
[See Table 21 for  the  allocation of the  high-speed  data  "DATA" 
3 
1 bit  signalling  control  codes and Table  25-29  for  their  location.] 

8.2.3.4.4 
If the 
current frame is detected as 
voice  data,  the  appropriate 31 bit  high-speed  "END"  signalling 
control  code  shall 
be **added** to the  TIF  encoder  output  buffer,  indicating  that  the  frame  is  the  last 
h 
of **data,** and  may  only  be  partially-filled  by  valid  high-speed  data. 
[
S
e e Table  21  for 
&e allocation  of  the  high-speed  data  "END"  31  bit  signalling  control  codes  and Table  25-29  for  their  location.] 

8.2.3.4.5 
The TIF encoder  shall  acquire  the  timing  instant  of  the 
onset of  high-speed  data  within  one  frame, 
i.e. the  high-speed  data **turn-ON** time  shall be 20 ms. 
8.2.3.4.6 
Normally there shall be 24  bits  detected  per  20 ms block of input  samples at a  user  data  rate of 
1.2 kbit/s, 48  bits at 2.4  kbitls, % bits  at  4.8 kbit/s, etc. 
Timing  differences between the  terminal  equipment  and  the TIF can cause this to  become  23 
or 25 
bits  for 1.2 kbit/s data,  47 or 49  bits  for  2.4 
kbit/s data, 95  or 
97  bits  for  4.8 
kbit/s data,  etc., on each  occasion. 

A  pair  of  buffer  control bits, PC1  and  PC2,  shall  be  allocated to each  set  of 23/24/25, 47/48/49 
or 95/%/97 
 
user 
 
data 
 
bits 
 
for 
 
1.2/2.4/4.8 
kbit/s data 
 
respectively 
 
in the final 
 
output 
 
buffer 
 
to indicate  to  the  TIF  decoder  whether  there is an  underflow,  overflow or correct  number  of  bits in each  24-byte E
r a m e
.

 Table  22  shows  the  coding  scheme  for  PC1  and  PC2 
for each  user  data  rate. 

[In the *case* of 2.4 kbitls **data.** there is exactly  the  right  number of bits  in  the final, 24-byte  long, output  buffer to accumulate t h
-
*
 
copies  of 
47,48 or 49  bits,  together  with three copies of the two plesiochmmus  buffer  control  bits,  a 31 bit  signalling  control *code* and 8 parity  bits.  There may be some *spare* bits  with  other  modulation  types.] 

8.2.3.4.7 
A 
 
majority 
 
voting error protection/correction 
 
scheme is implemented 
 
for 
 
V.22/V.2&/V.27, 
1.2 
and 
 
2.4 kbit/s user 
 
data. 
 
A 
cycliccode scheme 
 
with 
 
optimum 
 
decoding 
is used for V.27, 
4.8 kbit/s user d
a
t
a
.
 
8.2.3.4.8 
After the data bas 
been placed in the 24-byte  output  buffer it is available to line at  9.6 kbitls as 
required  by t
h
e
 
ACSE. In the case 
of  user  data  rates  less t
h
a
n
 
2.4 kbit/s, the  data is implicitly 
interleaved  in  the  output  buffer **because** of  the  replication of a  number  of **sets** of  the  user  data. 
This is useful  additional  protection  against  burst  errors. 
8.2.3.4.9 
Demodulation continues until 
 
the 
 
energy 
 
detector 
 
indicates 
 
that 
 
bigh-speed 
 
modulated 
 
data 
 
has 
ceased 
and the TIF encoder shall r
e
t
u
r
n
 to processing  input  data as 
voice or data. 
[It is recommended that the  energy  detector measures the  energy  of **each** symbol,  and  signals  the end  of  high-speed data when this value  falls to 10% 
of the previously  established  AGC-value  over t h r e e
 
d v e
 
symbols.] 

8.2.3.4.10 The  high-speed **data** turn-OFF  time  shall be  less t
h
a
n
 
3 ms at 2.4 kbit/s, 2 ms at 4.8 kbit/s and 
1.5 m a
t
 9.6 kbit/s. 
8.2.3.4.11 If a prutially-fiued  output  buffer 
is e
n
c
o
u
n
t
e
r
e
d
,
 the  last  high-speed  data  bit 
to be output is located 
in tfie 
buffer and 
a single "1" bit **shall** be  placed 
a
t
 the  end  of 
the high-speed  data 
to unambiguously 
imiiak the 
position 
of the 
last data 
bit to the TIF decoder. 
T b  
locations 
 
in 
 
the 
 
output 
 
buffer, 
 
if 
 
any, shall be filled 
 
with 
"O's." 
This shall necœmtate the transmission  of  a  further frame if  the  fînal  user  data  bit  occupies  the f i n a l
 
location mthefrar&e. 

## 8.2.4 T I F Decoder

Referring to the TIF d e c o d e r
 
detailed 
 
functional 
 
block 
 
diagram, Figure 12, and 
 
the **flow** chart shown in Figure 14,  the  9.6 kbit/s line  signal is first  buffered  in  a  24-byte  digital  input  buffer. 

OnCe the parity  bits  have been checked,  the 
31 bit  signalling  control  code is examined to  determine what  &interleaving, error c o r r e c t i o n
 
and  modulation  process **will** be required  for  the  data  in  the frame and  whether  the  current frame is a start-ofdata frame, a  continuation  data  frame, or that  the code is signalling  the  end of the  current  period  of  data  transmission, i.e. an  end-of-data  frame. 

Once this **has** been determined, 
 
the 
 
data is deinterleaved, 
 
buffer-control 
 
examined 
 
and 
 
the appropriate  number of bits  accumulated.  The error correction  logic  is  invoked,  error-correction completed  and  then  the  appropriate  data  remodulator  is  activated  to  output  the  modulated  analogue samples  to  the m
/
D
T
E
.

 

8.2.4.1 
The 8 **parity** check, or "burst, 
" bits are 
inspected  to  determine  the  number  of 
errors present in the 
parity word. 
[The same **parity** check  process is used as in  the  voice  function (
s e e
 
Section **4.2.2).** In the TIF 
voice-band  data case it is expected  that  the parity bits  will  have  nearly all bits in error a s
 
the  parity bits  have been OR'ed  with  a  sequence  which  converts  the  parity  from  even  to odd, i.e. the  opposite of  the case with  speech frames. 

Referring 
 
again 
 
to 
 
the 
 
detailed 
 
TIF 
 
decoder 
 
flowcharts 
 
shown 
 
in 
 
Figures 
10 and **14,** the 
 
voice decoder  and  data  decoder  decision  logic  respectively,  the  presence  of 
> 
= six errors is  a  positive indication  that  the  current  frame  is  probably  a  data  frame.  No  information can be  output  from  the TIF  decoder  until  all  the  buffer  contents  have been read, d i k e  
the  voice  decoder  which  can start after 88 bits  have **been** checked  and  decoded. 

8.2.4.2 
If 
four or more  burst 
errors are 
detected  then  the  voice  decoder 
is muted,  and  if 
two or three burst 
errors **are** detected,  then  the  previous  LPC frame is repeated or the  decoder is again  muted. 
8.2.4.3 
Additional  decision  logic  to  support  the  control  signalling  scheme  for  the  data  functions 
is shown 
in Figure 14. 
Note: 
The tem "data-flag" is used in 
 
the 
 
following 
 
decoder 
 
decision 
 
logic 
 
explanation 
 
to represent  a  generic  data  operation  and *can* be associated  with as many V 
series  modem functions as are present in the TIF. 

8.2.4.4 
When six, seven or eight  burst errors are 
d
e
t
e
c
t
e
d
,
 
then  the  input f
r
a
m
e
 
could either be a control 
frame, corrupted by 
 
channel 
 
errors, or, possibly, 
 
a 
 
badly 
 
corrupted 
 
voice frame. The  additional 
logic  shown in Figure 14 is designed  to  initiate  appropriate  action in the decoder. 
8.2.4.5 
For six or more 
burst  errors,  the  first  process  checks  the 31 bit signalling  code  field  using  a  bit 
comparison with  the **stored** c
o
d
e
s
.
 
8.2.4.6 
If greater than 
26 of the  received  bits  match 
me of  the **stored** codes than 
a  positive  identification 
of t
h
a
t
 
code is noted. 
[
I
n Figure **15,** variable **IDm** represents the 
 
number 
 
of 
 
bits 
 
matched 
 
with 
 
code 
 
m, 
 
where m= 1 
corresponds t o
 
t h e
 
VDS 
code, m=2 the  DATA  code,  and m=3 the **END** code. These code  words are different  for  each  V  series d m
 
function  present in the TIF, see Table 21.1 

8.2.4.7 
If  the VDS 
code 
is detected, then the signalling  and **data** fields of the control frame 
are decoded, 
a  flag s
e
t
 (
t
h
e
 
"data-flag")  and  the  variable  BFNUM *set* to zero. 
8.2.4.8 
A **0-to-1** transition  in 
t
h
e
 
"data-flag"  will  initiate  a  switch  in  the  decoder  from  the  speech  algorithm 
t
o
 the appropriate 
data 
demodulator, and 
the  transfer o
f
 
the d d e d  
signal  and  data  information 
t
o
 t
b
 
modulator. 
8.2.4.9 
V W l e  
BFNUM is a **bad** control frame counter used to 
 
count 
 
the 
 
number 
 
of 
 
successive 
 
bad 
firmes and 
is *set* t
o
 zero because IDm>26. 
8.2.4.10 
If the DATA *code* is d
e
t
e
c
t
e
d
,
 then 
 
the 
 
"data-flag" 
is checked. 
 
If 
 
the 
 
flag 
is set, 
 
then 
 
the 
modulator is deemed to be operating  in  a  satisfactory  manner  and  the  data  and  signal  information 
decoded. 
 
Variable 
 
BFNUM is s
e
t
 to O. 
8.2.4.11 
With the 
"data-flag"  remaining 
set, 
the **decoder** will trausfer  the **data** and  the  data  size  information 
t
o
 the 
modulator d 
modulation  will  continue.  If  however  the  "data-flag" is found not to be set, 
thpr 
au 
obnormal situation 
has 
arisen as the "dah-flag" should  always be *set* for a DATA f
r
a
m
e
.
 
I
n
 
this c
a
s
e
,
 if the 
previous frames were **not** of a DATA type, then it is decided that the DATA 
frune 
has **been** deiected through the severe corruption 
of a frame **from** the 
 
voice 
 
encoder, and 
thetefore the 
voice decoder is muted,  the  squelch  flag 
set, 
and 
a DATA frame 
counter  incremented 
by 1. 
8.2.4.12 
The 
identities  of  the  previous 
frames are 
checked  by  inspection  of a data frame 
counter,  variable 
DFNUM.  If DFNUM<2 ththe  previous frames were not of type 
DATA. 
8.2.4. W 
If  DFNUM > 
1 then  there  have been three 
ccmsecutive  DATA  frames  and it is decided that the 
DATA  identification is valid  and  therefore  the  "data-flag" is *set,* the  data decoded and  BFNUM 
set to 
O. **This** branch 
 
of 
 
the 
 
decision 
 
logic 
 
allows 
 
the 
 
decoder 
to switch to the 
 
data **mode** after 
corruption has c
a
u
s
e
d
 either *the* VDS *code* to be missed or the 
 
data 
 
mode 
to be 
 
wrongly 
t
e
r
m
i
n
a
t
e
d
.
 
8.2.4.14 
If 
 
the 
 
END 
 
code 
is d
e
t
e
c
t
e
d
 and 
 
the 
 
"data-flag" 
is *set,* then 
 
the 
 
"data-flag" is reset, the 
data 
decoded  and  DFNUM is *set* to 
O. The 1-td) 
transition of the  "data-flag"  will  indicate  the  end of 
modulation to the  decoder  and  the  modulator  will  remain  "ON" 
for the 
next frame in  order 
to allow 
all the  buffered  data 
to be output. 
8.2.4.15 
For  the frame following  an  END 
the 
modulation  will 
be continued.  If  the  "data-flag" is found not 
to be set, 
then 
the  voice codec 
is muted,  the  squelch  flag *set* and  DFNUM *set* to 
O. 
8.2.4.16 
If six or more 
burst errors have been detected  but **none** of  the D m  
variables are **greater** than 
26, 
then  the  "data-flag" is checked. 
8.2.4.17 
If the  flag is *set* and  the  previous two 
frames were **not** both bad, 
then the 
frame 
is considered to 
be 
a corrupted  DATA 
frame 
and  modulation 
is continued. The data is decoded and  the  "data-flag" 
left *set,* but 
 
the occurrence of 
 
a bad frame is recorded 
 
by 
 
incrementing 
 
the 
bad frame counter, 
BFNUM,  by 1
.
 If, however,  the two 
previous frames 
were bad (BFNUM> l), 
then  the frame is 
considered to be a 
 
severely corrupted voice frame, and t
h
e
 "data-flag" is r
e
s
e
t
,
 the 
 
voice d
e
c
 
muted, t
h
e
 
squelch  flag *set* and 
DFNUM *set* to O. 
8.2.4.18 
If six or more burst **errors** have been **detected** and  the  "data-flag" is found to be r
e
s
e
t
,
 then 
t
h
e
 
frame is again  considered to be a severely corrupted voice f
r
a
m
e
.
 The 
voice  decoder is therefore 
muted and 
the 
squelch  flag s
e
t
.
 
8.2.4.19 
The 
decision  logic  described so far has dealt  with  severely **corrupted** speech  frames  and  DATA 
frames with little o
r
 
W corruption indicated, 
with **six** or more  burst 
errors d
e
t
e
c
t
e
d
.
 It *cannot* be 
expected that 
control  information  will 
be successfully communicated 
when  severely  corrupted,  but 
the  effects  of  such 
corruption 
can 
be 
reduced by  consideration  of  past  decoded 
f
r
a
m
e
s
.
 
An 
essential 
requirement of the  decision  logic is to allow a switch  from  modulator to speech **decoder** when 
non-control Erames are 
detected to  reduce  the  effects  of 
an 
END  control code 
being missed a
t
 t
h
e
 
d
e
c
o
d
e
r
.
 
However, 
 
such 
a capability w
i
l
l
 **also** allow 
 
severe 
 
corruption 
to initiate a 
m>dulator"spch 
demder switch 
 
during 
a transmission 
 
of 
 
demodulated 
 
data. 
 
With 
 
the 
subeequent modem **retraining** such an 
action  would be likely to cause 
significant  corruption  of 
a 
-
e
 
transmissim. A decision  logic  branch 
has 
therefore been included  for  when  less 
than six 
bartcrrorspre*ted. 
8.2.4.20 
If~thrnsixbursterrorsare~tedandthe"data-flag"isnotset,thentheframeistreatedPs 
a pech h, 
with 
 
DFNUM *set* to 
O, **and** the 
 
speech 
 
decoder 
 
logic shown in  Figure 1
0
 
thea 
u
s
e
d
.
 If t
h
e
 "dah-flag" is *set,* then  the bad frame 
counter  (BFNUM) is checked.  If t
h
e
 
previous 
two frames **are** shown t
o
 be 
bad, 
then **the** "data-flag" is r
e
s
e
-
t
,
 
the **speech** decoder 
 
muted, 
 
the 
squelch  flag *set* and  DFNUM *set* to 
O. If the  previous frames were  both  not bad, 
then 
the data  is 
decoded,  modulation  continued  and  BFNUM  incremented  by 1
.
 
8.2.4.21 
At the decoder 
the V.27, carrier, **silence** and **training** sequence  transitions  and  durotions  shall  be 
generated and 
controlled  in 
the 
remodulator according to 
the **"O-to-1"** transitions  placed 
in 
the dota 
bits in t
h
e
 
encoding process (
s
e
e
 
Sub-Section 8
.
2
.
3
.
2
)
.
 
NOTE: The infonnation in  Attachment 3X 
is equivalent to h e x  
1 i n the INMARSAT  SDM  MODULE 5NER 3
.

0
- all  rights **reserved** Copyright * 
Inmatsat 
1
9
9
3
 

8.2.4.22 
In the cose 
of  V.27,  operation, 
if t
h
e
 
location  of  the appropriate  pseudo-random  sequence  is not 
ideatified 
 
within f 
5 symbols of its expected 
 
location 
 
in 
the **incoming** bit 
 
stream, then the 
incoming **data** shall be assumed to **start** at 
 
the 
 
expected 
 
location 
 
(which 
shall be based upon a 
symbol  count  from 
the 
start of  the  phase  reversals). 
8.2.4.23 
The transitions between 
the **segments** in  the V.22N.22, handshake  sequences  and  the  durations 
of the 
segments shall control  the 
data generated  by  the  remodulator  in  accordance  with 
the 
changes 
detected  in  the  incoming  bit  patterns 
(
s
e
e
 
the  table  in  Sub-Section  8.2.3.3.6). 
8.2.4.24 
The V.22N.2LN.27, segment  identification  sequences  shall be replaced by  the corresponding 
data 
patterns 
which *are* t
h
e
n
 modulated  to **regenerate** an  ideal  version  of  the appropriate  training 
waveform. 
8.2.4.25 
For V.22, transmission,  the TIF **decoder** shall  locate the 
start of the **user** data  by  detecting the 
16 bit **unique** word  "0110101011100000'  (69EOI-I)  in  the  incoming  bit s
t
r
e
a
m
.
 
Since t h e
 
unique  word may **become** corrupted by transmission errors, a match shall be deemed to be acceptable  if a t least 13 out  of  the  16 bits *are* found to match. 

 
If 
 
an acceptable match for the unique 
 
word 
 
is **not** found 
 
at 
 
its 
 
anticipated 
 
location, or within **two** symbols 
 
thereafter, 
 
the 
 
TIF 
decoder  shall  decode t h e following  symbols as userdata. 

8.2.4.26 
The TIF d d e r  
shall 
 
rescramble 
 
the 
user data bit 
 
stream 
 
in 
 
accordance 
 
with 
 
the 
 
scrambling 
defined in **CCI'IT** Recommendation V.22,. 
8.2.4.27 
When the 
TIF decoder detects 
the " W S "  
signalling  control  code  it  shall  remodulate  the  received 
symbols  in t
h
a
t
 frame 
and  subsequent  frames  in  unscrambled  form. 
8.2.4.28 
Following **detection** of the "
V
T
E
'
 
signalling 
 
control *code* the TIF decoder *shall* turn off data 
remodulation **and** transmission 
 
for 
 
the 
 
whole 
time period t
h
a
t
 the *"oo00"* sequence is being 
received. 
8.2.4.29 
Resumption  of 
normal data  scrambling,  remodulation  and  transmission  shall 
be detected  by t
h
e
 
TIF 
decoder when  the  data  changes  from  the  repeated 
"
o
o
0
0
'
 
pattern 
to n o d  
data  and  when  the  first 
wn-zero quadbit  is  received. 

## 8.2.5 Tif Facsimile Function:  Propagation Delay Compensation  (Optional)

The TIF shall  optionally be capable  of  generating a data  sequence  which consists of r e p e a t e d Flag patterns of  HDLC frame and which is modulated  in C C I T  V.21  form,  and  transmitting  it to the FTE over the outgoing analogue interconnect  circuit. This sequemx is provided  in order to ensure that t h e response timeout limits s e t
 **out** in  CCI'IT  Recommendation  T.30 are **not** violated  at  the F
T
E
.

 
Generation of the sequence of Flags  shall OCCUT if **reception** of a valid  V.21 data stream  from t h e
 
other TIF is **not** declared 
 
within 
 
1400 ms (for 
 
GES TIF) or 2400 ms (for AES TIF) of t h e
 
reception 
(from the FTE) of the  end  Flag  of  the  FSK **BCS** *signal* requiring  the r e s p o n s e
.

 
- **WC:** Digital transmit 
 
command; 
Tbe binnry *coded* procedural **signals** which will be received from the FTE on **the** incoming aJooue intemmnect  circuit  and  which  require a **response** from  the  distant TIF are as follows: 
- **DIS:** Digital 
 
identification s i g n a l
;
 
- TCF: *Training* check **(preceded** by 
 
DCS: 
 
Digital 
 
command 
 
signal); 
- **EOM:** End-of-message; 
- MPS: Multipage 
 
signal; 

- EOP: End-of-procedure; 
- CTC: **Mode** Wing command; - PPS.NuLL: Partial  page  signal/partial 
page  boundary; 
- PPS.EOM: 
 
Partial 
 
page 
signalEOM; 
- PPSMPS: Partial 
 
page 
 
SignalMPS; 
- PPS.EOP: 
 
Partial 
 
page 
 
SignalEOP; 
- EOR.NULL End-of-retransmissiodpartial 
page  boundary; 
- EOR.EOM: End-of-retransmissionEOM; 
--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---
 
CN641 
 
Reprinted 
 
with 
 
 
of Inmarsat 
- all 
 

## Attachment 3 X (Q

- **EOR.EOM:** "of-tetransmissiodE0hí; 
- EOR.MPS: End-of-retransmission/MPS; - EOR.EOP: End-of-retransmission/EOP; 
and 
- **RR:** Receive 
 
ready. 
If the TIF receives V.21 data stream **from** the ~l srTIFwithin6secondso f the  coIllllKIlcement of a transmission  of the sequence of  Flags,  transmission  of  the  sequence  of  Flags  shall  continue until au integral  Flag (one-octet) has been completed. This shall be followed  immediately  by the signal  modulated  by  the data **stream** received  from the other TIF without an interruption of signal energy on the  outgoing **analogue** interconnect  circuit. 

When either **the** sequence of Flags **has** lasted for the period  of 6 seconds or another FSK BCS 
signal has been received on the 
 
incoming **analogue** interconnect 
 
circuit **from** the FTE 
while transmitting the sequence  of  Flags,  the  receiving TIF shall  immediately  terminate  the  transmission of  the s e q u e n c e
.

 

## 9 T I F Interface Reouirements 9.1 T I F Functional Tnterface

The TIF functional  interface can be identical to the  voice d e c functional  interface  recommended in 
 
Module 1, Appendix 4, of the 
 
SDM 
 
for V.21N.22JV.27, **analogue** interconnect 
 
services operating  at  user  data rats below **7.2** kbit/s. 

9.1.1 
For voice-band d e m  
types 
which 
 
operate 
 
with a common carrier frequency 
 
for b
o
t
h
 
directions 
of 
 
transmission, 
 
e.g. **V.2L,** a direct c ~ ~ e c t i o n  
between the **TIF** *encoder* and 
 
decoder will be 
required to enable **echo** control *software* to be installed. This can 
most conveniently  catered  for 
by  implementing the 
two functions  in a single DSP circuit and is the  recommended  architectural 
app-h. 
9.1.2 
For 
 
higher 
 
user data 
r
a
t
e
s
 
a **software** interface 
 
shall be neccsaq~from 
the TIF to the AES or GES 
control  logic 
to  signal the 
requirement for a highquality channel. 

## 9.2 Adoeue/Dieital Aes/Ges Interfam

Although airborne or **ground-based** circuit-mode  voice-baud data services users may intercmaect by **analogue** m e a n s
, it  should be borne in **mind** that  the  interconnection to the TIF 
in  either or both the AES and **GES** may be **analogue** or digital.  Digital  interconnection to the TIF is likely t o be needed whea either the GES, or **aircraft** cabin  communications  system(s),  interfaces to the T
I
F
 
using a digital E M  
m a t i o n .  
- 
Note: 
Additional clock slip **precautions** must be taken if **PCM** digital 
 
interconnections are required **between** the TIF **and** the 
 
cabin or ground networks. 

One recommended course of  action  is to u s e an **accurate** clock  in the AES itself and this solution 
 
is 
 
referenced 
 
in 
 
Module 2, Section 4.3.3, C-Channel Trammitter Clock Accuracy. 

A more  acceptable  long-term  solution  will be t o
 
include a plesiochrmow sliding interpolation  process  in  the T
I
F
 decoder. The details of this process *are* TBD. 

T b  
. .  
TIF **currently** h r p o r r r t e s plesiochronous  buffering, to be described  in the next  section,  which ahumnta completely 
 
auy **data** slippage between analogue-connected terminal 
 
equipment, the M
t e
 @work and the PSTN, provided  the links are analogue from the GES to the **PSTN,** which i s
 **llot** always the c a s e
.

 
Voice-band services shall use a common circuit-mode **data** chamel formt as described  in  Section 
9.4. 

## Attachment 3X (Cont'Dl 9.3

9.3.1 
"be clock rate accurscy of  the  voice-band d
a
t
a
 received  from  the FTE 
by the **TIF** is, in general, 
rrmch worse than **the** SDM-specified 
 
clock 
rate accuracy 
 
of 
 
the 
 
satellite 
 
system 
 
Cchannel 
equipment.  It is thërefore **necessary** to  implement  a  plesiochronous  buffer  arrangement 
in both the 
AES and 
GES TIFS in the 
direction  of  transmission. 
9.3.2 
The rate 
 
adaption 
 
scheme 
 
described 
 
in 
 
Section 
9
.
4
.
1
 provides the means to 
 
transfer 
 
a 
 
variable 
number  of data 
bits in 
each  primary **data** field  of 1
9
2
 
bits. 
9.3.3 
The rate odaption 
 
scheme 
 
shall be used to a
d
j
u
s
t
 the **data** field 
 
contents 
 
when an overflow or 
underflow o
c
c
m
.
 Integrity  of  the  user **data** is therefore  assured,  avoiding  the  occurrence of data 
slips  for all combinations  of F
I
E
 
and 
satellite  system 
data clock  accuracies. 

## 9.4 Channel Format  Interfacing

9.4.1 
Each  circuit-mode **data** call shall  utilise  a  pair  of  C-chaunels  for 
t
h
e
 
duration  of the 
call. 
9.4.2 
The  digital  information  bit  stream  carried  in  the  primary-band 
of  the  C-channel  shall be directly 
employed to transport  the d
a
t
a
 traffic. 
9.4.3 
Each Cehaunel primary  field  of 1
9
2
 
bits shall contain 
only data 
signals or *encoded* voice  signals, 
depending  upon  the  current TIF m
o
d
e
.
 
9.4.4 
The 
voice  eucoding/decoding  algorithms  normally  associated  with  C-chanuel  telephony  signals 
shall 
not be used during 
 
the **data** transfers, 
 
although 
 
the 
TIF *can* **switch** between data **and** voice 
processing  and  transmission  automatically  throughout  the  call. 
9.4.5 
Rate 
adaption, error protection,  plesiochronous  buffering  and  bit-interleaving  shall 
be used in the 
primary 
 
field to match the user **data** rate to the bit-rate 
 
of **the** primary band of 
 
the assigned 
C-chaunels  and  protect the **userdata** from  slips **and** transmission  errors. 

## 9.4.6 Rate Adaption Scheme

The following rate adaption  scheme for circuit-mode data shall  apply t o
 
both the forward  and return directions  and  only to the C-channel  primary-band rate of 9
.

6
 kbit/s. 

9.4.6.1 
The available Cchaunel transmission 
 
capacity is subdivided into primary **data** fields 
 
of 20 
ms 
duration, i.e. 192 
bits, a
t
 the 
primary-band **data** rate of 9
.
6
 
kbitls. 
9.4.6.2 
The TIF shall allocate the 
user **data** bits in a  primary **data** field  of 1
9
2
 
bits  for  each  of  the 
V 
series 
data rates from 300 
bit/s to 
9
.
6
 
kbitls, as shown in 
Tables 24 
to 3
2
.
 
9

| N      | o   | .   |     |
|--------|-----|-----|-----|
| of     |     |     |     |
| User   |     |     |     |
| Data   |     |     |     |
| um     |     |     |     |
| Data   |     |     |     |
| Rate   |     |     |     |
| Bits   |     |     |     |
| per    |     |     |     |
| Field  |     |     |     |
| bit/S  |     |     |     |
| N      | o   | .   |     |
| o      | f   |     |     |
| Copies |     |     |     |
| (m)    |     |     |     |
| per    |     |     |     |
| Field  |     |     |     |
| 300    |     |     |     |
| 6      | 0   | 0   | '   |
| 1200'  |     |     |     |
| 2400   |     |     |     |
| 4800   |     |     |     |
| 7200'  |     |     |     |
| 9      | 6   | 0   | 0   |
| 7      |     |     |     |
| 13     |     |     |     |
| 25     |     |     |     |
| 49     |     |     |     |
| 97     |     |     |     |
| 145    |     |     |     |
| 192    |     |     |     |
| 17     |     |     |     |
| 9      |     |     |     |
| 5      |     |     |     |
| 3      |     |     |     |
| 1      |     |     |     |
| 1      |     |     |     |
| 1      |     |     |     |

* 
 This 
      is only an 
               indication of a possible rate 
                                        adaption scheme  for these particular user data r
                                                                                  a
                                                                                   t
                                                                                    e
                                                                                     s
                                                                                      .
                                                                                       

Rate 07.21) 
Fundion 
Code 
No. of bits 
SC 
31 
BD 
8 
A1-A7 
7 
PC 
2 
16x(PC1,2+Al-A7) 
144 
Signalling  Control  Code 
Burst Error Detection C
&
 
Data Plesiochrowus Buffer  Code 
Error Protected Bits 
(including Data & PBCs) 
Total 
192 
bitls User Data 
Rate N.22) 
' Fundion 
Code 
N
o
.
 
of bits 
SC 
31 
BD 
8 
A1-A13 
13 
PC 
2 
8x(PC1,2+Al-A13) 
120 
Signalling Control Code 
Burst  Error Detection Code 
Data 
Plesiochromw Buffer Code 
Error Protected 
Bits 
(including Dah & PB&) 
Unusad 
SPARE 
18 
T d  
192 

NOTE: The information in Attachment 3X i
                                  s
                                   equivalent t
                                            o
                                              Annex 1 i
                                                     n
                                                      the INMARSAT SDM  MODULE 5NER 3.0 
[Incorporating  CN641 Reprinted with permission of Inmarsat 
                                               - all rights reserved Copyright * 
                                                                        Inmarsat 
                                                                               1993 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

Function 
Code 
No. of bits 
SC 
31 
BD 
8 
Al-A25 
25 
PC 
2 
4x(PCl,2+Al-A25) 
108 
sidling control code 
Burst Error Detection 
Code 
DatP 
Plesiochronous  Buffer  Code 
Error Protected  Bits 
(including Data & PBCs) 
Unused 
SPARE 
 
18 
Tdal 
192 
|                              | Function    |     | Code    |
|------------------------------|-------------|-----|---------|
| N                            | o           | .   |         |
| of                           |             |     |         |
| bits                         |             |     |         |
| Signalling  Control  Code    |             |     |         |
| Burst Error Detection  Code  |             |     |         |
| Data                         |             |     |         |
| Plesiochxvnous  Buffer  Code |             |     |         |
| Error Protected  Bits        |             |     |         |
| SCC                          |             | 31  |         |
| BD                           | 8           |     |         |
| Dl                           | 49          |     |         |
| PC                           |             | 2   |         |
| 2x(PC1,2+Al-A49)             |             |     |         |
| 102                          |             |     |         |
| Tdal                         |             |     |         |
| 192                          |             |     |         |
Function 
Code 
No. of bits 
Signalling Control Code 
Burst Error Detection  Code Data Plesiochromus  Buffer  Code Error Protection  Bits 
SC 
BD 
Dl 
PC 
EP 
31 
8 
97 
2 
54 
Total 
192 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

Flmctkm 
Code 
No. o€ 
bits 
SC 
BD 
DI 
PC 
SPARE 
31 
8 
145 
2 6 
Signnlling  Control Code 
Burst Error Detection 
Code 
Data 
Plesiochronous  Buffer Code 
Unused 
Total 
192 
FunCtiOn 
Code 
No. of bits 
SC 
BD 
Dl 
PC EP 
[Signalling  Control  Code 
[Burst Error **Detection** Code 
Data 
[Plesiochronous  Buffer  Code 
[Error Protection 
o
1
 
o
1
 
192 
0
1
 
o1 
Total 
192 

* 
The 
9.6 kbit/s user rate data frames shall contain **data** only; the start and f i n i s h
 
of a **period** of continuous 9.6 kbit/s data  transmission shall be indicated  by  special  signalling  control frames. 

## 9.4.7 S I L I N G Control Codes

9.4.7.1 
The 
 
signalling control codes 
given in Table 21 shall communicate 
essential 
 
information to 
the 
TIF 
decoder to 
allow the 
correct mode of decoder operation to 
be determined  for  each  received 
f
r
a
m
e
.
 
Such  information shall include: 
0 
a voice-to-data 
 
switch 
(VDS) command; 
( ~ 1  
'in&-mode' 
(DATA) c
o
m
m
a
n
d
;
 
0 
a data-to-voice (END) 
command; 
0 
a V.22, t
e
s
t
 start 
and 
end **(VTS/VTE)** command 
and 
0 
a V.22, 
retrain (RETRAIN) command. 
NOTE: Section 9.4.7.1 **modified** by 
 
Corrigenda 
 
Version 
1.0 to INMARSAT 
 
SDM 
 
MODULE 
5NER 3.0  [Incorporating CN641 

9.4.7.2 
A unique Signalling *ccde* shall be 
transmitted f
o
r
 one 
of 
these c
o
d
 
in 
each frame 
whilst the 
&cudex is operating ia data m
o
d
e
,
 apart from the 
9.6  kbit/s **user** rate **data** frame, 
which contaias 
OlJy d8ta. 

## Attachment 3X (Eont'Dl

9.4.7.3 
The 
different signalling 
 
control d e s ,  
which 
 
occupy 
 
bits 
 
1 
to 31 
 
of each T
I
F
 frame, shall be 
allocated the 
appropriate  3  1  bit 
deword listed  in  Table  21 
t
o
 discriminate. between 
the  different 
cauro1 **signals,** as follows: 

## Table 2 1 : 31 Bit Sienallim Control C M

| User                            | Data    | Rate                            |
|---------------------------------|---------|---------------------------------|
| Code                            |         |                                 |
| 31                              |         |                                 |
| bit                             |         |                                 |
| Code                            |         |                                 |
| [S-1                            |         |                                 |
| to                              |         |                                 |
| S                               | 3       | 1                               |
| V.21                            |         | 300                             |
| VDS                             |         |                                 |
| 1100110011001100110011001100110 |         |                                 |
| DATA                            |         | 001                             |
| END                             |         |                                 |
| 0110011OO110011OO11001100110011 |         |                                 |
| V.22N.22,                       |         |                                 |
| VDS                             |         |                                 |
| 1010010110100101                |         | 101001011010010                 |
| DATA                            |         |                                 |
| 11oooo1111oooo1111oooo1111oooo1 |         |                                 |
| V.22                            |         | Test-Start                      |
| VTS                             |         |                                 |
| 0110100101101001011010010110100 |         |                                 |
| V.                              |         |                                 |
| 22ITest_End                     |         |                                 |
| VTE                             |         |                                 |
| 0110011010011001011001101001100 |         |                                 |
| END                             |         |                                 |
| oooo1111oooo1111m1111oooo111    |         |                                 |
| V.22-Tst-Rehh                   | R E W N | 0101101001011010010110100101101 |
| V.27-2.4                        |         |                                 |
| Fax                             |         |                                 |
| VDS                             |         | 1111111111111111111111111111111 |
| DATA                            |         | 1010101010101010101010101010101 |
| END                             |         |                                 |
| v.27-4.8                        |         |                                 |
| F=                              |         |                                 |
| VDS                             |         |                                 |
| 1111111111111111111111111111111 |         |                                 |
| DATA                            |         | 1001100110011001100110011001100 |
| END                             |         |                                 |
| 1111oooo1111oooo1111oooo1111ooo |         |                                 |

NOTE: Table 21 modified 
 
by 
 
Corrigenda 
 
Version 
 
1.0 
 
to 
 
INMARSAT 
 
SDM 
 
MODULE 
SNER 
3.0  [Incorporating CN641 

9.4.7.4 
Other codes 
can be introduced, if r
e
q
u
i
r
e
d
,
 for 
 
other V **series** d e m  
and other 
 
functions, 
 
such 
as signalling  for V.%, V.29 and 
V.32. 
9.4.8 
PIesiochronous Buffer Control **Codes** (PCs) 
9.4.8.1 
The 
coding **rules** for 
 
the PC 
field, 
 
and 
 
the 
 
corresponding contents 
of 
 
the data and **error** protection 
fields **are** given  in  Table  22  below. 

m 
bits 
Al-7 
 
Al-13 
 
Al-25 
A1-49 
Al-97 
 
Al-145 
 
Al-192 
uldsrflow 
Ol(5) 
ll(11) 
ll(23) Ol(47) ll(95) 
ll(143) 
NIA 
N a m l  
1q6) Oo(12) 
W24) lO(48) W%) oo(144) 
NIA 
ouaflow 
ll(7) 
Ol(13) 
Ol(25) 
ll(49) Ol(97) Ol(145) 
N/A 
~ 
~~ 
NOTE: 
 
Table 
 
22 
 
modified 
 
by 
 
Corrigenda 
 
Version 
 
1.0 
 
to 
 
INMARSAT 
 
SDM 
 
MODULE 
5NER 
3.0 [Incorporating CN641 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

9.4.8.2 
Tbe2bitPCfieldmustbeprotectedwiththedatabits,sothotinthecaseofauserdata-rateof 
2.4 kbit/s, where the **data** sub-fields use a majority-vding 
rate = **113** code 
for  transmission error 
p
r
o
t
e
c
t
i
o
n
,
 
a tdal 
of **153** bits are 
protected. 
9.4.9 

## Interleaving And User Data Error Protection Scbeme

9.4.9.1 
Post-Viterbi **decoding** error bursts in **the** l
i
n
e
 
data sent to the TIF dec5der **are** minimised by 
interleaving  of the 
user d
a
t
a
,
 
including  the error protection  bits and 
plesiochronous  buffer codes 
intheTIFemxder. 
9.4.9.2 
The **2.4** kbit/s  user data and 
buffering  bits are 
combined to 
give  a 51 bit word  which, because of 
the rate = **113** majority-voting error protection scheme 
employed  for **2.4** kbit/s user 
d
a
t
a
,
 
is h 
repeated t
h
r
e
e
 
times within t
h
e
 
frame. This 
effectively spaces 
out adjacent  bits  in 
t
h
e
 
user **data** by 
51 bits,  giving  protection  against 
error bursts of up 
to 
51 bits  in  length. 
9.4.9.3 
The 4.5 kbit/s user data and buffering bits are combined to give a 99 bit word which is protected by a single burst error-correcting (153,99,24) optimised cyclic code based on the polynomial:

$\texttt{g}(\texttt{x})\,=\,\texttt{x}^{\texttt{14}}\,+\,\texttt{x}^{\texttt{4}}\,+\,\texttt{x}^{\texttt{5}}\,+\,\texttt{x}^{\texttt{6}}\,+\,\texttt{x}^{\texttt{7}}\,+\,\texttt{x}^{\texttt{12}}\,+\,\texttt{x}^{\texttt{7}}\,+\,\texttt{x}^{\texttt{8}}\,+\,\texttt{1}$
An optimal M i n g  
method shall be employed  which can correct an error burst up to 
47 bits long. 

## 9.4.10 Bust Error Detection Bits

9.4.10.1 
As 
described 
in  Section 
8, it is essential t
h
a
t
 
the  signalling  control 
codes 
are 
communicated 
reliably 
between the 
encoder  and  demder  incorporating t
h
e
 
TIF and t
h
e
 voice codee function (see 
also 
Section 4.2.2). The 
operation  of t
h
e
 
encoder in  a  different 
mode to the 
decoder  must be avoided 
and  if 
the 
integrity  of  operation  is  threatened 
by a severe  burst  of 
errors then corrective  action  must 
be taken. 
9.4.10.2 
The **basis** for the 
mode protection  scheme is the 
2-D scheme **used** for the 
Lpc 
bits in the 
voice 
& 
function. The 
voice 
 
encoder 
 
transmits 4
0
 
L X  
bits 
 
for **each** frame processed. These bits 
are 
the 
first  bits  transmitted  in  each **192** bit f
r
a
m
e
.
 
9.4.10.3 
The  voice 
wdec transmission frame structure 
is shown in  Figure 
9, with K l o  
to 
KIOC] signifying 
the position  of t
h
e
 
ten 
predictor  coefficients,  quantised  in  PARCOR  form 
to varying  numbers  of 
bits. 26 of the 
most important  bits,  listed  in  Table 
23, are 
protected  by 
a 6 bit  extended 
Hamming 
c
o
d
e
,
 (bits H4 
to 
H-1 in  Table **23)'** and the 
resulting  bits are **transmitted** immediately  after the 
LPCbits. The26protectedLpcbitsandthe6Hammingbitsarefurtherprotectedby8burst 
error detection bits, **BD1-BDS,** with 1 burst  bit allocated 
to 
4 protected  bits. In 
the 
voice codec 
the 

| K1[6]    |       | K1[5]    |
|----------|-------|----------|
| K1[4]    | K1[3] |          |
| K1[2]    |       |          |
| K1[1]    |       |          |
| K2[6]    | K2[5] |          |
| =Pl      |       |          |
| W21      |       |          |
| W 5 1    | W 4 1 |          |
| W31      | K4PI  | K4[41    |
| KY31     |       | K5[4]    |
| K5[3]    | K6[4] | K6[3]    |
| K7[3]    | K7[2] | K7[1]    |
| m        | 3     | 1        |
| W21      |       |          |
| H 4      |       |          |
| H-5      | H 4   |          |
| H-3      |       |          |
| H-2      |       |          |
| H-       |       |          |
| 1        |       |          |
| ~        | ~~    |          |
| BD8      |       |          |
| .        |       |          |
| BD7      |       | BD6      |
| BD4      |       |          |
| BD3      | BD2   | BD1      |

Note: The b u r s t
 
error detection bits are chosen to give odd parity of the columns in Table 23 for all m-voice *encoded* f r a m e s
.

 

9.4.10.' 4 
An 
odd-parity 
'
b
u
r
s
t
 error detection' scheme, 
identical to 
the even parity scheme 
used in  the  voice 
codec 
function, 
shall be **used** in  the TIF. 

## A'Itachicient 3X Kont'Dl

9.4.10.5 
The 
use of odd 
parity burst  'protection' instead of  even  produces 
codes 
that 
will never be used 
by 
tbe 
voice **encoder** and  would  only  ever 
be received at t
h
e
 
voice M e r  
as 
voice  frames  after  very 
severe corruption in  transmission. 
9.4.10.6 
Tbe 
burst error *tion 
bits are 
the first to be examined  in  each  frame  when  decoding  after  being 
exclusive-ORed  with t
h
e
 10101010 
mask whether  the Erame is voice or **data.** The  parity  check is 
evaluated,Mdiflessthanorequaltothreeerrorsptedetectedtheframeisassumedtobeavoice 
frame and  ptocessed  accordingly.  If six, 
seven or eight errors are 
detected  the  signalling  control 
d e  
bits  shall be decoded in **sccordance** with  Table 21 to  determine the 
frame type. 

## 9.4.11 Tmmksion Frame Strvcture

9.4.11.1 
Detailed  bit  allocation  tables  for  the  blocked-frame  structure 
for 300  bit/s, *600* bitls, 1.2, 2.4,  4.8 
and **7.2** kbitls TIF user 
data 
rates **are** defined  in Tables 24 to 
29. The three 
special frames (start, 
data and finish) associated  with  the  packetised 
structure 
for  the 
9.6 kbitls 
user 
data rate 
are 
defined 
in  Tables 3
0
,
 
31 and 32 
respectively. 
9.4.11.2 
The  Signalling  Control  Code  field 
shal always  occupy  the first 31 bits  of  the  frame  and  the  Burst 
Error Detection  bits  shall  always  occupy  bits 47 to 
54, apart  from  the  packetised  structure-based 
9.6 kbitls user **data** frame, which contains **data** only. 
9.4.12 

## Output Interfacing - Octet Reversal

The TIF transmission frame formats shown in Tables 24 to 
32 list the **octets** in MSB- > 
LSB order reading from  left to right. On output to line t h e
 
octets *are* reversed, i.e. are read out of memory in the sequence 8 7 6 5 4 3 2 1,  where  bit 8 is the MSB, bit 1 
the MB. 

## 10 Power Control For Higher-Ouality Channels

10.1 
User data rates 
higher than 
4.8 kbitls 
require higherquality both-way  primary Cchannels betwee0 
AES 
and  GES TIFS 
than 
the 
nominal voice-mode **link** BER  provides. 
10.2 
It shall be **necessary** to indicate t
h
e
 
commencement  of  circuit-mode **data** transmissions  using  the 
TIF to 
both  the 
AES and  GES 
to allow  the  GES  Power  Control  Decision  Table 
to be switched  from 
t
h
a
t
 
controlling AES and  GES  power  levels  for 
the circuit-mode  voice  service,  providing 
a nominal 
channel 
 
BER 
 
of 1
.
O
E
-
3
 
to 1.0E-4, to a 
 
new 
 
table, 
 
and 
 
hence 
 
new 
AES a
n
d
 GES 
 
power 
 
level 
settings, to provide  a 
nominal channel  BER  of  1.OE-5 for  circuit-mode 
data calls a
t
 user data rates 
higher than 
4.8 kbit/s. 
10.3 
The new AES 
and  GES  levels shall be established  in  time  for the receipt  of  the  relevant  modern 
training sequence, 
transmitted a
t
 t
h
e
 
high-speed user data-me. 
10.4 
Higher  EIRPs  for  circuit-mode 
data calls at user 
data **rates** higher *than* **4.8** kbitls can 
be 
provided 
by two 
altemative 
modes of  operation as follows: 
10.4.1 
At t
h
e
 commencemt of 
 
circuit-mode **data** call 
 
both *AES* and 
 
GES *can* easily 
 
determine t
h
a
t
 
circuit-mxfe data **operation** is occurring 
 
from 
 
the **voice/data** detector. 
 
Therefore 
 
a 
'data-mode' 
GES Power 
Control Decision  Table *can* be implemented  immediately  irrespective  of  whether 
t
h
e
 
6tr r
a
t
e
 
of the 
call requires a higherquality channel or **not** by signalling  from  the  GES  TIF 
to 
the 
ACSE control software, 
using a simple  single-line  interface 
to the ACSE. 
Tb higberquplity GES  Power  Control  Decision  Table  shall be switched  in  within  [TBD] ms of the commeacement of a **TIF-based** circuit-mode **data** call. 

If it  is subsequently  established  by  the  GES-based TIF that the call is proceeding  with a user data r a t e
 
less than 
7.2 kbit/s, by **decoding** the  DIS/DCS  BCS  fields  for  instance, t h e
 
voice-mode  GES 
Power 
 
Control 
 
Decision 
 
Table can be switched 
 
back 
 
and 
 
link 
 
EIRP 
r e d
&
 to the nominal voice-mode  level to **maintain** a BER **better** t h a n
 
1.OE-3. 

10.4.2 
The voicemode GES Power  Control  Decision  Table 
is used until  the 
GES has determined thpt the 
requirements of 
 
either t
h
e
 **calling/called** *FTEDTE* equipment 
 
(for instame by **decoding** the 
DIS/DCS **BCS** fields), and/or the AES 
and its own 
TIF capabilities, **demand** a higher 
 
quality 
chnnel in  which *case* the 
data-mode GFS 
Power  Control  Decision  Table can 
be enabled and t
h
e
 
p
o
w
e
r
 
levels a
d
j
u
s
i
e
d
 to provide an 
increase in channel  quality. 
The higherquality GES Power Control Decision  Table shall be  switched  in  within  [TBD] ms of commencement  of  a TIF-based circuit-mode data c a l l
.

 

10.5 
Two  C-channel  Power  Control  Decision  Tables  therefore 
need to be available  in  the 
GES, 
one 
for 
circuit-mode  voice  and 
one 
for circuit-de **data** services.  The  former  would  normally 
be active, 
except 
 
during 
 
circuit-mode 
data transmissions 
 
when 
 
the 
lauer w
i
l
l
 govern 
 
the *AES* and GES 
C-channel **signal** power  levels, **enabling** both  EIRPs 
to be **adjusted** to a  value  capable  of  providing 
a  higher  quality, d
a
t
a
-
m
o
d
e
,
 **BER** performance  around **1.OE-5** for  user **data** rates 
greater than 4.8 
kbitls. 
10.6 
The additional **GES** Power Control Decision  Table software flags,  indicating  that a switch from 
one 
 
table 
to another is required, W be processed 
 
in 
t
h
e
 **GES** control 
 
software 
 
for 
both 
air-to-ground  and  ground-to-air 
calling directions. 
The 
 
flags 
 
can 
be included 
 
in 
 
a 
 
special 
 
in-band 
 
signalling 
 
field 
 
prefixed 
to the 
 
first modem 
procedural  signal  received 
at the GFS 
in  the 
case 
of  ground-to-air **calls,** and  by  in-band  signalling 
from t
h
e
 AES 
to the **GES** at 
 
the 
 
commencement 
 
of 
t
h
e
 *call* since **the** AES 
voice *codec* has 
knowledge  of b
o
t
h
 
its capability  and **mode** of  operation  [TBDI. 
10.7 
If a  lower *speed* user **data-rate** only is supported in the TIF, 
i.e. **4.8** kbit/s or less, m 
in-bad 
signalling, **and** hence no change in Power 
 
Control 
 
Decision 
 
table and **AESIGES** EIRPs w
i
l
l
 be 
r
e
q
u
e
s
t
e
d
.
 

## 1 1 M F M A R Y Of Voice And T I F Encoderldecoder Transhfission Delays And Tihlieigs

11.1 
The maximum  voice **encoding** delay shall be 46 m. 
The voice ending delay  measurement  shall be made  with  a  pair  of  voice d e c s  
uxmected backto-back. 

The **encoding** delay **time** shall be measured **from** the  instant  the  encoder  receives  the **first** input PCM sample to the instant  the **first** channel  bit is transmitted to line. 

11.2 
The 
maximum  voice **decoding** delay shall be 25 ms. 
The voice **decoding** delay  measurement shall be **made** with  a  pair  of  voice codecs conmcted backto-back. 

Thedecodingclelaytimeshallthenbemeasuredfromtheinstantthedecoderhasreceivedthe~ 
chnnaei  bit to the instant t h e
 
first decoded PCM sample is output. 

11.3 
Tb6 
nmximum end-of-qwnce delay in the 
TIF encoder  for all t
y
p
e
s
 
of  circuit-mode data signals 
ridl be 
collstpnt at 2 sub", 
i.e. 40 
ms, plus 6 ms due to buffering in **the** input routine, 
eatotaleacoderclelayof46ms. 
11.4 
The lllllxJmum  delay  in  the TIF decoder shall be three 
20 ms s u b "  
only, i.e. 60 
m. 
11.5 
The maximum  overall  end-to-end  delay b
e
e
n
 a pair  of **T I F S**  shall  therefore be approximately 
106 ms. 
This overall  delay figure refers to the  delay to be measured between t h e
 
end of t h e
 
sequeme input totheTIFdemodulatorandtheendoftheq~emergingfromthe'IIFremoduiator. 

Inthe c a s e
 
of FSK BCS signals, the demodulating TIF 
may **shorten** the **BCS** sequeme by up to 17 bits at **300** bids, i.e. 57 m, making t h e
 
end-toend 
'start' delay 163 ms. **This** is wt significant because of t h e
 
number  of  flag  bytes  transmitted at the start of each FSK **BCS** frame can vary  within f 
150 
ms. 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

## Attachllient 3X (Cont'Dl

Tbe~"end'finishiag'delaymayalsobeextendedbyafurther26ms~theTIFwillodd 
1
0
.

 extra *flag* byte to an FSK-modulated 
 
BCS 
Erame if 
 
only 
 
one 
 
flag 
 
byte is detected in the poetamble, as permitted  by CCI'IT  Recommendation T.30. 

Similarly, the end-&ad '
s t a r t
'
 
delay  for  high-speed  data  sequences  may be increased by  up to 
20 
m, to 110-130 **ms,** because the TIF will  truncate  up t o
 20 
ms of the  &er tone, again  within t h e
 
limits permitted by CCI'IT  Recommendation T.30. 

11.6 
The maximum *response* times 
for 300 bit/s BCS 
 
FSK signal  detection  and  termination  shall 
be: 
OFF to 
ON: less than 
55 ms 
ON to OFF: less than 
5 ms 
11.7 
The maximum response times 
for  high-speed **data** signal  detection  and  termination 
shall be: 
OFF to ON: less than 
20 
ms for 
 
all 
 
modulation types 
ON to OFF: t
h
r
e
e
 
symbols,  i.e. **less** than 3 ms for 2
.
4
 
kbit/s PSK data 

## 12 Applicable  Documents

Standardized  test 
                  charts 
                         for document 
                                       facsimile transmissions, CCI" Recommendation  T.21, 
                                                                                                  1988. 

srandardization  of Group 3 
facsimile apparatus for document *transmission,* CCI" Reco-datim T.4, 1988. 

Procedures for document facsimile transmission in the  general  switched tekphone *network,* C C m  
Recommendation 
 
T.30, 1988. 

Data Communications o w  
                         the 
                            
                           telephone 
                                     network, Recommendations of the VSeries, CCI'IT 
Recommendations V
                .
                 2
                  7
                  ,
                    and V.2L. 

M 

## W Glossary Of Terms And Acronyms

1 
-D 
2-D 
2-FSK 
3-D 
CDEPSK 
1
6
-
Q
m
 
BTL 
ccm TIF 
TIFU 
FTE 
AES 
GES ACSE 
A/C 
AGC 
SDM 
BCS 
BER 
cm0 
CED 
DFT 
DMA DSP DIS CS1 
CCS 
m CDS NSF 
ECM 
-ional Two-dimensional 
'L-Freqwmcy Freqkcy **Shift** Keyed Three-dimensioapI 
4" 
Differentially-Ended Phase **Shift** Keyed 
1 d S W  
Quadrahue Amplitude  Modulation BT Lahatories Comitd  Consultatif I
n t e r n a t i o n a l
 
de T6ldphonie e t de TBlBgraphie Terminal I
n t e r f a c e
 
Function Terminal I
n t e r f a c e
 
Function  Unit Facsimile  Terminal  Equipment Aeronautical Earth Station Ground Earth Station Access  Control **and** Signalling  Equipment Aircraft Automatic **Gain** Control System  Definition  Manual Binary Coded  Signal Bit-Error Rate Carrier-WNoise  Power  Spectral  Density Called **Station** Identification Discrete  Fourier  Transform Direct Memory Access Digital  Signal  Processor Digital  Identification  Signal Called  Subscriber  Identification Cabin Communications  System Cabin Telecommunications  Unit Cabin Distribution  System Nm-Standard  Facilities Error Correction Mode Bit-Energy-teNoise Power  Spectral  Density Ratio Forward Error Correction First-in-First-out 
(buffer) 
Data I
n t e r f a c e
 
Unit Direct  memory a c c e s s
 
High-Level  Data **Link** Control W
O
 
FEC 
FIFO 
INMARSAT  SDM  MODULE SNER 3.0 
- all **rights** reserved  Copyright Q Inmarsat 
--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

NOTE: 
     The information 
                in 
                  Attachment 3X 
                            is equivalent 
                                    t
                                     o
                                      h e x  
                                           1 i
                                            n
                                              the INMARSAT  SDM  MODULE SNER 3.0 
[Incorporating 
         CN641 Reprinted with permission of Inmarsat 
                                       - all rights reserved Copyright o Inmptsot 
                                                                  1993 

NOTE: The. information  in  Attachment 3X 
                                 is equivalent t
                                           o
                                             Annex 1 in the 
                                                        INMARSAT  SDM  MODULE 5NER 3.0 
[Incorporating  CN641 Reprinted with permission of Inmarsat 
                                              - all rights reserved Copyright * 
                                                                       Inmarsat 
                                                                              1993 

(cont'd) 

NOTE: 
     The information i
                n
                  Attachment 3X 
                           is equivalent t
                                    o
                                     h e x  
                                          1 in the INMARSAT SDM  MODULE 
                                                                  5NER 3.0 
[Incorporating CN641 Reprinted with  permission of lnmarsat 
                                      - all  rights reserved Copyright e Inmarslt 
                                                                 1993 

NOTE: The 
          information 
                   in 
                     Attachment 3X 
                                is equivalent to Annex 1 in 
                                                     the INMARSAT  SDM  MODULE  WVER 3.0 
mmxporating CN641 
                 
                Reprinted with p e r m i s s i o n  
                                    of Inmersat 
                                             - a
                                               l
                                                l
                                                 rights reserved Copyright 
                                                                      Inmarsat 1993 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

NOTE:  Table 24 modified 
                          by  Corrigenda  Version 1.0 to 
                                                     INMARSAT SDM  MODULE 5NER 
3.0 [Incorporating  CN641 

NOTE: The information i
                    n
                     Attachment 3X is equivalent to 
                                             h e x  
                                                  1 in  the INMARSAT SDM MODULE 5NER 3
                                                                                      .
                                                                                       0
                                                                                         
-prating 
           CN641  Reprinted  with  permission of Iamarsat 
                                              - all  rights reserved Copyright * Inmarsat 
                                                                              1993 

NOTE: The information in 
                     Attachment 3X is equivalent t
                                            o
                                             Annex 1 in 
                                                      the INMARSAT SDM MODULE SNER 3.0 
[Incorporating CN641 
                 
                Reprinted with p e r m i s s i o n  of Inmarsat 
                                              - a
                                                l
                                                 l
                                                  rights reserved Copyright Inmarsat 
                                                                               1993 

## (Cont'D)

NOTE: The 
          information in 
                     Attachment  3X is equivalent t
                                           o
                                             AMex 1 i
                                                    n
                                                      the INMARSAT SDM MODULE SNER 3.0 
[Incorporating CNM] Reprinted with permission of Inmarsat 
                                              - all rights resewed Copyright e Inmarsat 
                                                                              1993 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

                                           C~pyright 
                                                     Inmarsat 1993 
NOTE: 
       Table 27 modified 
                      by Corrigenda Version 1.0 t
                                            o
                                             INMARSAT  SDM  MODULE SNER 
3.0 [Incorporating CN641 

NOTE: The information in 
                     Attachment  3X is equivalent t
                                            o
                                             Annex 1 i
                                                     n
                                                      the INMARSAT  SDM  MODULE SNER  3.0 
mrporating CN64] Reprinted with p e r m i s s i o n  of Inmarsat 
                                              - all  rights reserved Copyright * 
                                                                       Inmarsat 
                                                                               1993 

--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

NOTE: The information i
                    n
                     Attachment 3X is equivalent t
                                            o
                                              Annex 1 i
                                                     n
                                                       the INMARSAT SDM 
                                                                         MODULE SNER 3.0 
lIncorporating CN641 Reprinted with permission of Inmarsat 
                                               - all rights reserved Copyright Inmarsat 
                                                                                1993 

## Attachment 3 X (Wnt'A

NOTE: 
     The 
        information  in Attachment 3X is equivalent t
                                     o
                                      Annex 1 in the INMARSAT SDM 
                                                            MODULE SNER 3
                                                                         .
                                                                          0
                                                                           
lIncorporrrting CNM] R
               e
               p
                r
                i
                 n
                  t
                  e
                   d
                     with 
                        p e r m i s s i o n  
                               of Inmarsat 
                                       - all rights reserved Copyright * lnmarsat 
                                                                  1993 

## Attachment 3X Icont'Dj

i n the INMARSAT SDM MODULE SNER 3.0 
--`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

NOTE: The 
          information 
                   i
                    n
                     A t t a c b t  3X i
                                  s
                                   equivalent t
                                            o
                                              Anuex 1 in 
                                                       the 
                                                         INMARSAT SDM MODULE SNER 3.0 
brporating CN641 R
                  e
                  p
                   r
                    i
                     n
                      t
                      e
                       d
                         
                         with 
                             p e r m i s s i o n  
                                      of Inmarsat 
                                               - a
                                                 l
                                                 l
                                                   rights reserved Copyright * Inmarsat 
                                                                                1993 

NOTE: The information i
                    n
                     Attachment 3X 
                                 i
                                  s
                                   equivalent t
                                            o
                                              Annex 1 i
                                                     n
                                                       the INMARSAT SDM MODULE 5NER 3
                                                                                        .
                                                                                        0
                                                                                          
lIncorporating CNM] Reprinted with permission of Inmarsat 
                                               - all rights reserved  Copyright e 
                                                                        Inmarsat 
                                                                                1993 
                                                   --`,```,,`,```,,,`,,,,``,,,`-`-`,,`,,`,`,,`---

